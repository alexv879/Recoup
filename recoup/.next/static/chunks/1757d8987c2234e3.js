(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,341507,e=>{"use strict";var s=e.i(843476),a=e.i(271645),r=e.i(827085),t=e.i(475254);let d=(0,t.default)("building-2",[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]]),n=(0,t.default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),l=(0,t.default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),i=(0,t.default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),o=(0,t.default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);function c(){let{user:e}=(0,r.useUser)(),[t,c]=(0,a.useState)(!0),[u,m]=(0,a.useState)(!1),[x,g]=(0,a.useState)(!1),[p,h]=(0,a.useState)(null),[y,b]=(0,a.useState)(""),[f,j]=(0,a.useState)("freelancer"),[v,N]=(0,a.useState)({companyName:"",addressLine1:"",addressLine2:"",city:"",postcode:"",country:"United Kingdom"}),[w,k]=(0,a.useState)(!0);(0,a.useEffect)(()=>{!async function(){try{let e=await fetch("/api/users/me");if(!e.ok)throw Error("Failed to load settings");let s=await e.json();b(s.businessName||""),j(s.businessType||"freelancer"),s.businessAddress&&N({companyName:s.businessAddress.companyName||"",addressLine1:s.businessAddress.addressLine1||"",addressLine2:s.businessAddress.addressLine2||"",city:s.businessAddress.city||"",postcode:s.businessAddress.postcode||"",country:s.businessAddress.country||"United Kingdom"}),c(!1)}catch(e){console.error("Error loading settings:",e),h("Failed to load settings"),c(!1)}}()},[]);let A=e=>/^[A-Z]{1,2}\d{1,2}[A-Z]?\s?\d[A-Z]{2}$/i.test(e.trim()),C=async()=>{try{m(!0),h(null),g(!1);let e=v.addressLine1||v.city||v.postcode;if(e){if(!v.addressLine1||!v.city||!v.postcode){h("Please complete all required address fields (Address, City, Postcode)"),m(!1);return}if(!A(v.postcode)){h("Please enter a valid UK postcode (e.g., SW1A 1AA)"),m(!1);return}}let s=await fetch("/api/users/me",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({businessName:y,businessType:f,businessAddress:e?v:null})});if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to save settings")}g(!0),setTimeout(()=>g(!1),3e3)}catch(e){console.error("Error saving settings:",e),h(e.message||"Failed to save settings")}finally{m(!1)}};return t?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):(0,s.jsxs)("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"border-b pb-4",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Settings"}),(0,s.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage your account and business settings"})]}),x&&(0,s.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 flex items-center gap-3",children:[(0,s.jsx)(o,{className:"w-5 h-5 text-green-600"}),(0,s.jsx)("span",{className:"text-green-800 font-medium",children:"Settings saved successfully!"})]}),p&&(0,s.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-center gap-3",children:[(0,s.jsx)(i,{className:"w-5 h-5 text-red-600"}),(0,s.jsx)("span",{className:"text-red-800",children:p})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,s.jsx)(d,{className:"w-6 h-6 text-indigo-600"}),(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Business Details"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Name"}),(0,s.jsx)("input",{type:"text",value:y,onChange:e=>b(e.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-indigo-600 focus:border-transparent",placeholder:"Your business or freelance name"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Type"}),(0,s.jsxs)("select",{value:f,onChange:e=>j(e.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-indigo-600 focus:border-transparent",children:[(0,s.jsx)("option",{value:"freelancer",children:"Freelancer"}),(0,s.jsx)("option",{value:"consultant",children:"Consultant"}),(0,s.jsx)("option",{value:"agency",children:"Agency"})]})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsx)(n,{className:"w-6 h-6 text-indigo-600"}),(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Business Address"})]}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-6",children:"Required for sending physical collection letters. Your address will appear on letter headers."}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Company Name ",(0,s.jsx)("span",{className:"text-gray-400",children:"(Optional)"})]}),(0,s.jsx)("input",{type:"text",value:v.companyName,onChange:e=>N({...v,companyName:e.target.value}),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-indigo-600 focus:border-transparent",placeholder:"Company Ltd"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Address Line 1 ",(0,s.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,s.jsx)("input",{type:"text",value:v.addressLine1,onChange:e=>N({...v,addressLine1:e.target.value}),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-indigo-600 focus:border-transparent",placeholder:"123 High Street"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Address Line 2 ",(0,s.jsx)("span",{className:"text-gray-400",children:"(Optional)"})]}),(0,s.jsx)("input",{type:"text",value:v.addressLine2,onChange:e=>N({...v,addressLine2:e.target.value}),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-indigo-600 focus:border-transparent",placeholder:"Suite 4B"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["City ",(0,s.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,s.jsx)("input",{type:"text",value:v.city,onChange:e=>N({...v,city:e.target.value}),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-indigo-600 focus:border-transparent",placeholder:"London"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Postcode ",(0,s.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,s.jsx)("input",{type:"text",value:v.postcode,onChange:e=>{var s;return s=e.target.value,void(N({...v,postcode:s}),s.trim()?k(A(s)):k(!0))},className:`w-full border rounded-lg px-4 py-2 focus:ring-2 focus:ring-indigo-600 focus:border-transparent ${!w?"border-red-300 bg-red-50":"border-gray-300"}`,placeholder:"SW1A 1AA"}),!w&&(0,s.jsx)("p",{className:"text-xs text-red-600 mt-1",children:"Please enter a valid UK postcode"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Country"}),(0,s.jsx)("input",{type:"text",value:v.country,readOnly:!0,className:"w-full border border-gray-300 rounded-lg px-4 py-2 bg-gray-50 text-gray-500"})]})]})]}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("button",{onClick:C,disabled:u||!w,className:"bg-indigo-600 hover:bg-indigo-700 text-white font-medium px-6 py-3 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed inline-flex items-center gap-2 transition-colors",children:u?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l,{className:"w-5 h-5"}),"Save Settings"]})})})]})}e.s(["default",()=>c],341507)}]);

//# sourceMappingURL=415f111029ead5bf.js.map