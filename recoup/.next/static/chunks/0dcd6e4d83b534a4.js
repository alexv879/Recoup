(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,207670,e=>{"use strict";function t(){for(var e,t,r=0,i="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=function e(t){var r,i,a="";if("string"==typeof t||"number"==typeof t)a+=t;else if("object"==typeof t)if(Array.isArray(t)){var s=t.length;for(r=0;r<s;r++)t[r]&&(i=e(t[r]))&&(a&&(a+=" "),a+=i)}else for(i in t)t[i]&&(a&&(a+=" "),a+=i);return a}(e))&&(i&&(i+=" "),i+=t);return i}e.s(["clsx",()=>t])},718677,e=>{"use strict";var t=e.i(843476),r=e.i(647163);function i({className:e,variant:i="default",size:a="default",asChild:s=!1,...n}){return(0,t.jsx)("button",{className:(0,r.cn)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"underline-offset-4 hover:underline text-primary"}[i],{default:"h-10 py-2 px-4",sm:"h-9 px-3 rounded-md",lg:"h-11 px-8 rounded-md",icon:"h-10 w-10"}[a],e),...n})}e.s(["Button",()=>i])},56522,e=>{"use strict";var t=e.i(843476),r=e.i(647163);function i({className:e,children:i,...a}){return(0,t.jsx)("div",{className:(0,r.cn)("rounded-lg border bg-white shadow-sm",e),...a,children:i})}e.s(["Card",()=>i])},778337,e=>{"use strict";var t=e.i(843476),r=e.i(647163);function i({className:e,variant:i="default",...a}){return(0,t.jsx)("div",{className:(0,r.cn)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}[i],e),...a})}e.s(["Badge",()=>i])},709598,e=>{"use strict";var t=e.i(843476),r=e.i(271645),i=e.i(56522),a=e.i(778337),s=e.i(718677);function n(){let[e,n]=(0,r.useState)([]),[o,c]=(0,r.useState)(!0),[l,d]=(0,r.useState)("all");(0,r.useEffect)(()=>{u()},[]);let u=async()=>{c(!0);try{let e=await fetch("/api/notifications");if(e.ok){let t=await e.json();n(t.notifications||[])}}catch(e){console.error("Failed to fetch notifications:",e)}finally{c(!1)}},f=async e=>{try{(await fetch(`/api/notifications/${e}/read`,{method:"POST"})).ok&&n(t=>t.map(t=>t.notificationId===e?{...t,isRead:!0}:t))}catch(e){console.error("Failed to mark notification as read:",e)}},x=async()=>{try{(await fetch("/api/notifications",{method:"PUT"})).ok&&n(e=>e.map(e=>({...e,isRead:!0})))}catch(e){console.error("Failed to mark all as read:",e)}},m=e.filter(e=>"all"===l||!e.isRead),h=e.filter(e=>!e.isRead).length;return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("div",{className:"bg-white border-b",children:(0,t.jsx)("div",{className:"container mx-auto px-4 py-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Notifications"}),h>0&&(0,t.jsxs)(a.Badge,{variant:"destructive",children:[h," unread"]})]}),(0,t.jsx)("p",{className:"text-gray-600 mt-1",children:"Stay updated with your business activities"})]}),h>0&&(0,t.jsx)(s.Button,{variant:"outline",onClick:x,children:"Mark All as Read"})]})})}),(0,t.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,t.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,t.jsx)(i.Card,{className:"p-4 mb-6",children:(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(s.Button,{variant:"all"===l?"default":"outline",size:"sm",onClick:()=>d("all"),children:"All"}),(0,t.jsxs)(s.Button,{variant:"unread"===l?"default":"outline",size:"sm",onClick:()=>d("unread"),children:["Unread (",h,")"]})]})}),o?(0,t.jsx)("div",{className:"text-center py-12",children:(0,t.jsx)("p",{className:"text-gray-500",children:"Loading notifications..."})}):0===m.length?(0,t.jsxs)(i.Card,{className:"p-12 text-center",children:[(0,t.jsx)("div",{className:"text-6xl mb-4",children:"ğŸ””"}),(0,t.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No notifications"}),(0,t.jsx)("p",{className:"text-gray-600",children:"unread"===l?"All caught up! No unread notifications":"You don't have any notifications yet"})]}):(0,t.jsx)("div",{className:"space-y-4",children:m.map(e=>{let r,n,o,c,l;return(0,t.jsx)(i.Card,{className:`p-6 cursor-pointer transition-all ${!e.isRead?"border-l-4 border-l-blue-500":""} ${{invoice_drought:"bg-blue-50",payment_delay:"bg-orange-50",opportunity:"bg-green-50",system:"bg-gray-50"}[e.type]||"bg-gray-50"}`,onClick:()=>!e.isRead&&f(e.notificationId),children:(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[(0,t.jsx)("div",{className:"text-3xl",children:{invoice_drought:"ğŸ“„",payment_delay:"â°",opportunity:"ğŸ’¡",system:"ğŸ””"}[e.type]||"ğŸ””"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900 mb-1",children:e.title}),(0,t.jsx)("p",{className:"text-gray-700",children:e.message})]}),!e.isRead&&(0,t.jsx)(a.Badge,{variant:"default",className:"ml-2",children:"New"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:(r=new Date(1e3*e.createdAt._seconds),o=Math.floor((n=new Date().getTime()-r.getTime())/6e4),c=Math.floor(n/36e5),l=Math.floor(n/864e5),o<1?"Just now":o<60?`${o}m ago`:c<24?`${c}h ago`:l<7?`${l}d ago`:r.toLocaleDateString("en-GB"))}),e.actionUrl&&e.actionText&&(0,t.jsx)(s.Button,{variant:"outline",size:"sm",onClick:t=>{t.stopPropagation(),window.location.href=e.actionUrl},children:e.actionText})]})]})]})},e.notificationId)})})]})})]})}e.s(["default",()=>n])}]);

//# sourceMappingURL=209823d84a9b484e.js.map