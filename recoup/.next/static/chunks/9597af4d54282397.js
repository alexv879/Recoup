(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,233525,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"warnOnce",{enumerable:!0,get:function(){return n}});let n=e=>{}},207670,e=>{"use strict";function t(){for(var e,t,a=0,n="",r=arguments.length;a<r;a++)(e=arguments[a])&&(t=function e(t){var a,n,r="";if("string"==typeof t||"number"==typeof t)r+=t;else if("object"==typeof t)if(Array.isArray(t)){var l=t.length;for(a=0;a<l;a++)t[a]&&(n=e(t[a]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}(e))&&(n&&(n+=" "),n+=t);return n}e.s(["clsx",()=>t])},718677,e=>{"use strict";var t=e.i(843476),a=e.i(647163);function n({className:e,variant:n="default",size:r="default",asChild:l=!1,...s}){return(0,t.jsx)("button",{className:(0,a.cn)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"underline-offset-4 hover:underline text-primary"}[n],{default:"h-10 py-2 px-4",sm:"h-9 px-3 rounded-md",lg:"h-11 px-8 rounded-md",icon:"h-10 w-10"}[r],e),...s})}e.s(["Button",()=>n])},998183,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n={assign:function(){return o},searchParamsToUrlQuery:function(){return l},urlQueryToSearchParams:function(){return i}};for(var r in n)Object.defineProperty(a,r,{enumerable:!0,get:n[r]});function l(e){let t={};for(let[a,n]of e.entries()){let e=t[a];void 0===e?t[a]=n:Array.isArray(e)?e.push(n):t[a]=[e,n]}return t}function s(e){return"string"==typeof e?e:("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function i(e){let t=new URLSearchParams;for(let[a,n]of Object.entries(e))if(Array.isArray(n))for(let e of n)t.append(a,s(e));else t.set(a,s(n));return t}function o(e,...t){for(let a of t){for(let t of a.keys())e.delete(t);for(let[t,n]of a.entries())e.append(t,n)}return e}},195057,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n={formatUrl:function(){return i},formatWithValidation:function(){return c},urlObjectKeys:function(){return o}};for(var r in n)Object.defineProperty(a,r,{enumerable:!0,get:n[r]});let l=e.r(190809)._(e.r(998183)),s=/https?|ftp|gopher|file/;function i(e){let{auth:t,hostname:a}=e,n=e.protocol||"",r=e.pathname||"",i=e.hash||"",o=e.query||"",c=!1;t=t?encodeURIComponent(t).replace(/%3A/i,":")+"@":"",e.host?c=t+e.host:a&&(c=t+(~a.indexOf(":")?`[${a}]`:a),e.port&&(c+=":"+e.port)),o&&"object"==typeof o&&(o=String(l.urlQueryToSearchParams(o)));let d=e.search||o&&`?${o}`||"";return n&&!n.endsWith(":")&&(n+=":"),e.slashes||(!n||s.test(n))&&!1!==c?(c="//"+(c||""),r&&"/"!==r[0]&&(r="/"+r)):c||(c=""),i&&"#"!==i[0]&&(i="#"+i),d&&"?"!==d[0]&&(d="?"+d),r=r.replace(/[?#]/g,encodeURIComponent),d=d.replace("#","%23"),`${n}${c}${r}${d}${i}`}let o=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function c(e){return i(e)}},818581,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"useMergedRef",{enumerable:!0,get:function(){return r}});let n=e.r(271645);function r(e,t){let a=(0,n.useRef)(null),r=(0,n.useRef)(null);return(0,n.useCallback)(n=>{if(null===n){let e=a.current;e&&(a.current=null,e());let t=r.current;t&&(r.current=null,t())}else e&&(a.current=l(e,n)),t&&(r.current=l(t,n))},[e,t])}function l(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let a=e(t);return"function"==typeof a?a:()=>e(null)}}("function"==typeof a.default||"object"==typeof a.default&&null!==a.default)&&void 0===a.default.__esModule&&(Object.defineProperty(a.default,"__esModule",{value:!0}),Object.assign(a.default,a),t.exports=a.default)},718967,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n={DecodeError:function(){return m},MiddlewareNotFoundError:function(){return j},MissingStaticPage:function(){return v},NormalizeError:function(){return b},PageNotFoundError:function(){return y},SP:function(){return f},ST:function(){return g},WEB_VITALS:function(){return l},execOnce:function(){return s},getDisplayName:function(){return u},getLocationOrigin:function(){return c},getURL:function(){return d},isAbsoluteUrl:function(){return o},isResSent:function(){return h},loadGetInitialProps:function(){return p},normalizeRepeatedSlashes:function(){return x},stringifyError:function(){return N}};for(var r in n)Object.defineProperty(a,r,{enumerable:!0,get:n[r]});let l=["CLS","FCP","FID","INP","LCP","TTFB"];function s(e){let t,a=!1;return(...n)=>(a||(a=!0,t=e(...n)),t)}let i=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,o=e=>i.test(e);function c(){let{protocol:e,hostname:t,port:a}=window.location;return`${e}//${t}${a?":"+a:""}`}function d(){let{href:e}=window.location,t=c();return e.substring(t.length)}function u(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function h(e){return e.finished||e.headersSent}function x(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?`?${t.slice(1).join("?")}`:"")}async function p(e,t){let a=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await p(t.Component,t.ctx)}:{};let n=await e.getInitialProps(t);if(a&&h(a))return n;if(!n)throw Object.defineProperty(Error(`"${u(e)}.getInitialProps()" should resolve to an object. But found "${n}" instead.`),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return n}let f="undefined"!=typeof performance,g=f&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class m extends Error{}class b extends Error{}class y extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message=`Cannot find module for page: ${e}`}}class v extends Error{constructor(e,t){super(),this.message=`Failed to load static file for page: ${e} ${t}`}}class j extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function N(e){return JSON.stringify({message:e.message,stack:e.stack})}},573668,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"isLocalURL",{enumerable:!0,get:function(){return l}});let n=e.r(718967),r=e.r(652817);function l(e){if(!(0,n.isAbsoluteUrl)(e))return!0;try{let t=(0,n.getLocationOrigin)(),a=new URL(e,t);return a.origin===t&&(0,r.hasBasePath)(a.pathname)}catch(e){return!1}}},284508,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"errorOnce",{enumerable:!0,get:function(){return n}});let n=e=>{}},522016,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n={default:function(){return m},useLinkStatus:function(){return y}};for(var r in n)Object.defineProperty(a,r,{enumerable:!0,get:n[r]});let l=e.r(190809),s=e.r(843476),i=l._(e.r(271645)),o=e.r(195057),c=e.r(8372),d=e.r(818581),u=e.r(718967),h=e.r(405550);e.r(233525);let x=e.r(91949),p=e.r(573668),f=e.r(509396);function g(e){return"string"==typeof e?e:(0,o.formatUrl)(e)}function m(t){var a;let n,r,l,[o,m]=(0,i.useOptimistic)(x.IDLE_LINK_STATUS),y=(0,i.useRef)(null),{href:v,as:j,children:N,prefetch:w=null,passHref:C,replace:S,shallow:k,scroll:A,onClick:O,onMouseEnter:P,onTouchStart:E,legacyBehavior:T=!1,onNavigate:I,ref:L,unstable_dynamicOnHover:D,..._}=t;n=N,T&&("string"==typeof n||"number"==typeof n)&&(n=(0,s.jsx)("a",{children:n}));let $=i.default.useContext(c.AppRouterContext),F=!1!==w,U=!1!==w?null===(a=w)||"auto"===a?f.FetchStrategy.PPR:f.FetchStrategy.Full:f.FetchStrategy.PPR,{href:R,as:M}=i.default.useMemo(()=>{let e=g(v);return{href:e,as:j?g(j):e}},[v,j]);if(T){if(n?.$$typeof===Symbol.for("react.lazy"))throw Object.defineProperty(Error("`<Link legacyBehavior>` received a direct child that is either a Server Component, or JSX that was loaded with React.lazy(). This is not supported. Either remove legacyBehavior, or make the direct child a Client Component that renders the Link's `<a>` tag."),"__NEXT_ERROR_CODE",{value:"E863",enumerable:!1,configurable:!0});r=i.default.Children.only(n)}let B=T?r&&"object"==typeof r&&r.ref:L,K=i.default.useCallback(e=>(null!==$&&(y.current=(0,x.mountLinkInstance)(e,R,$,U,F,m)),()=>{y.current&&((0,x.unmountLinkForCurrentNavigation)(y.current),y.current=null),(0,x.unmountPrefetchableInstance)(e)}),[F,R,$,U,m]),z={ref:(0,d.useMergedRef)(K,B),onClick(t){T||"function"!=typeof O||O(t),T&&r.props&&"function"==typeof r.props.onClick&&r.props.onClick(t),!$||t.defaultPrevented||function(t,a,n,r,l,s,o){if("undefined"!=typeof window){let c,{nodeName:d}=t.currentTarget;if("A"===d.toUpperCase()&&((c=t.currentTarget.getAttribute("target"))&&"_self"!==c||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||t.nativeEvent&&2===t.nativeEvent.which)||t.currentTarget.hasAttribute("download"))return;if(!(0,p.isLocalURL)(a)){l&&(t.preventDefault(),location.replace(a));return}if(t.preventDefault(),o){let e=!1;if(o({preventDefault:()=>{e=!0}}),e)return}let{dispatchNavigateAction:u}=e.r(699781);i.default.startTransition(()=>{u(n||a,l?"replace":"push",s??!0,r.current)})}}(t,R,M,y,S,A,I)},onMouseEnter(e){T||"function"!=typeof P||P(e),T&&r.props&&"function"==typeof r.props.onMouseEnter&&r.props.onMouseEnter(e),$&&F&&(0,x.onNavigationIntent)(e.currentTarget,!0===D)},onTouchStart:function(e){T||"function"!=typeof E||E(e),T&&r.props&&"function"==typeof r.props.onTouchStart&&r.props.onTouchStart(e),$&&F&&(0,x.onNavigationIntent)(e.currentTarget,!0===D)}};return(0,u.isAbsoluteUrl)(M)?z.href=M:T&&!C&&("a"!==r.type||"href"in r.props)||(z.href=(0,h.addBasePath)(M)),l=T?i.default.cloneElement(r,z):(0,s.jsx)("a",{..._,...z,children:n}),(0,s.jsx)(b.Provider,{value:o,children:l})}e.r(284508);let b=(0,i.createContext)(x.IDLE_LINK_STATUS),y=()=>(0,i.useContext)(b);("function"==typeof a.default||"object"==typeof a.default&&null!==a.default)&&void 0===a.default.__esModule&&(Object.defineProperty(a.default,"__esModule",{value:!0}),Object.assign(a.default,a),t.exports=a.default)},313680,e=>{"use strict";var t=e.i(843476),a=e.i(271645),n=e.i(522016),r=e.i(718677),l=e.i(65168),s=e.i(475254);let i=(0,s.default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),o=(0,s.default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var c=e.i(37727);let d=({clients:e=[],onSelectClient:n,onAddNewClient:r,selectedClient:s=null,maxSuggestions:d=10})=>{let[u,h]=(0,a.useState)(""),[x,p]=(0,a.useState)(!1),[f,g]=(0,a.useState)([]),[m,b]=(0,a.useState)(-1),[y,v]=(0,a.useState)([]),j=(0,a.useRef)(null);(0,a.useEffect)(()=>{v(JSON.parse(localStorage.getItem("recentClients")||"[]"))},[]);let N=t=>{if(h(t),b(-1),t.trim().length<2){g([]),p(!1);return}let a=t.toLowerCase(),n=e.filter(e=>e.name.toLowerCase().includes(a)||e.email.toLowerCase().includes(a)||e.company&&e.company.toLowerCase().includes(a)).slice(0,d);g(n),p(n.length>0)};function w(e,a){if(!a)return e;let n=e.toLowerCase().indexOf(a.toLowerCase());if(-1===n)return e;let r=e.slice(0,n),l=e.slice(n,n+a.length),s=e.slice(n+a.length);return(0,t.jsxs)(t.Fragment,{children:[r,(0,t.jsx)("span",{className:"font-semibold text-blue-700",children:l}),(0,t.jsx)("span",{className:"font-bold text-gray-900",children:s})]})}let C=e=>{if(x||"ArrowDown"===e.key)switch(e.key){case"ArrowDown":e.preventDefault(),p(!0),b(e=>e<f.length-1?e+1:0);break;case"ArrowUp":e.preventDefault(),b(e=>e>0?e-1:f.length-1);break;case"Enter":e.preventDefault(),m>=0&&S(f[m]);break;case"Escape":e.preventDefault(),p(!1),h("")}},S=e=>{h(e.name),p(!1),n(e);let t=JSON.parse(localStorage.getItem("recentClients")||"[]"),a=[e.id,...t.filter(t=>t!==e.id)].slice(0,5);localStorage.setItem("recentClients",JSON.stringify(a))},k=y.map(t=>e.find(e=>e.id===t)).filter(Boolean).slice(0,3),A=u.length>=2&&0===f.length,O=window.innerWidth<640;return(0,t.jsxs)("div",{className:"relative w-full",children:[!O&&(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(i,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,t.jsx)("input",{ref:j,type:"text",placeholder:"Search or select client...",value:u,onChange:e=>N(e.target.value),onKeyDown:C,onFocus:()=>{u.length>=2&&p(!0)},"aria-label":"Select client","aria-autocomplete":"list","aria-expanded":x,"aria-controls":"client-dropdown",role:"combobox",className:"w-full pl-10 pr-10 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),u&&(0,t.jsx)("button",{onClick:()=>{h(""),g([]),p(!1),j.current?.focus()},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600","aria-label":"Clear search",children:(0,t.jsx)(c.X,{className:"w-4 h-4"})})]}),O&&(0,t.jsx)(l.AccessibleDialog,{isOpen:O&&x,onClose:()=>p(!1),title:"Select Client",description:"Choose a client for the invoice",children:(0,t.jsxs)("div",{className:"fixed inset-x-0 bottom-0 z-50 bg-white rounded-t-2xl shadow-lg p-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,t.jsx)("span",{id:"mobile-client-selector-title",className:"text-lg font-bold",children:"Select Client"}),(0,t.jsx)("button",{onClick:()=>p(!1),"aria-label":"Close selector",className:"text-gray-400 hover:text-gray-600 text-2xl",children:"×"})]}),(0,t.jsx)("input",{ref:j,type:"text",placeholder:"Search or select client...",value:u,onChange:e=>N(e.target.value),onKeyDown:C,"aria-label":"Select client","aria-autocomplete":"list","aria-expanded":x,"aria-controls":"client-dropdown",role:"combobox",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-lg mb-2",style:{fontSize:"16px",minHeight:"48px"}}),x&&(0,t.jsxs)("div",{id:"client-dropdown",role:"listbox",className:"max-h-80 overflow-y-auto",children:[!u&&k.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"px-2 py-1 text-xs font-semibold text-gray-500 uppercase bg-gray-50 border-b border-gray-100",children:"Recently Used"}),k.map(e=>(0,t.jsxs)("button",{onClick:()=>S(e),className:"w-full text-left px-4 py-3 mb-2 rounded-lg bg-gray-50 hover:bg-blue-50",style:{minHeight:"48px"},children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:e.name}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:e.email})]},e.id))]}),f.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"px-2 py-1 text-xs font-semibold text-gray-500 uppercase bg-gray-50 border-b border-gray-100",children:"All Clients"}),f.map((e,a)=>(0,t.jsxs)("button",{onClick:()=>S(e),role:"option","aria-selected":a===m,className:`w-full text-left px-4 py-3 mb-2 rounded-lg ${a===m?"bg-blue-100":"bg-gray-50 hover:bg-gray-100"}`,style:{minHeight:"48px"},children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:w(e.name,u)}),(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:w(e.email,u)}),e.company&&(0,t.jsx)("span",{className:"text-xs text-gray-500 ml-2",children:w(e.company,u)})]})]},e.id))]}),A&&(0,t.jsxs)("div",{className:"px-4 py-8 text-center",children:[(0,t.jsx)("p",{className:"text-gray-600 mb-3",children:"No clients found"}),(0,t.jsxs)("button",{onClick:()=>r(u),className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-semibold transition-colors",style:{minHeight:"48px"},children:[(0,t.jsx)(o,{className:"w-4 h-4"}),"Add new client"]})]}),f.length>0&&(0,t.jsxs)("button",{onClick:()=>r(u),className:"w-full text-left px-4 py-3 bg-blue-50 hover:bg-blue-100 border-t border-gray-200 text-blue-600 font-semibold transition-colors flex items-center gap-2",style:{minHeight:"48px"},children:[(0,t.jsx)(o,{className:"w-4 h-4"}),"Add new client"]})]})]})})]})},u=({clients:e,onSelect:n,onArchive:r,onUnarchive:l,selectedClientId:s})=>{let[i,o]=(0,a.useState)([]),[c,d]=(0,a.useState)({status:"",financial:"",activity:"",tags:[]}),[u,h]=(0,a.useState)(""),x=e.filter(e=>{let t=!0;if(c.status&&e.status!==c.status&&(t=!1),"overdue"===c.financial&&0>=(e.totalOwed||0)&&(t=!1),"high-value"===c.financial&&5e3>(e.totalOwed||0)&&(t=!1),"inactive"===c.activity&&(!e.lastInvoiceDate||new Date().getTime()-new Date(e.lastInvoiceDate).getTime()<2592e6)&&(t=!1),!(c.tags.length>0)||e.tags&&c.tags.every(t=>e.tags?.includes(t))||(t=!1),u&&u.length>=2){let a=u.toLowerCase();e.name?.toLowerCase().includes(a)||e.email?.toLowerCase().includes(a)||e.company?.toLowerCase().includes(a)||e.phone?.toLowerCase().includes(a)||e.poNumber?.toLowerCase().includes(a)||(t=!1)}return t}),[p,f]=(0,a.useState)("");return window.innerWidth<640?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"mb-2",children:[(0,t.jsx)("input",{type:"text",value:u,onChange:e=>h(e.target.value),placeholder:"Search clients...",className:"w-full px-3 py-2 border rounded-lg mb-2","aria-label":"Search clients"}),(0,t.jsxs)("select",{value:c.status,onChange:e=>d(t=>({...t,status:e.target.value})),className:"w-full px-3 py-2 border rounded-lg mb-2","aria-label":"Filter by status",children:[(0,t.jsx)("option",{value:"",children:"All Statuses"}),(0,t.jsx)("option",{value:"active",children:"Active"}),(0,t.jsx)("option",{value:"archived",children:"Archived"}),(0,t.jsx)("option",{value:"inactive",children:"Inactive"})]}),(0,t.jsxs)("select",{value:c.financial,onChange:e=>d(t=>({...t,financial:e.target.value})),className:"w-full px-3 py-2 border rounded-lg mb-2","aria-label":"Filter by financial status",children:[(0,t.jsx)("option",{value:"",children:"All Financials"}),(0,t.jsx)("option",{value:"overdue",children:"Overdue"}),(0,t.jsx)("option",{value:"high-value",children:"High Value"})]})]}),x.map(e=>(0,t.jsxs)("div",{className:`relative bg-white rounded-lg shadow p-4 flex flex-col gap-2 ${s===e.id?"ring-2 ring-blue-500":""}`,tabIndex:0,"aria-selected":s===e.id,style:{minHeight:"48px"},children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-semibold text-gray-900",children:e.name}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:e.email}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:e.company||"-"}),(0,t.jsxs)("div",{className:"text-lg font-bold text-blue-700",children:["\0a3",e.totalOwed?.toLocaleString()||"0"]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>n(e),className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200 focus:ring-2 focus:ring-blue-500","aria-label":`View client ${e.name}`,children:"View"}),e.archived?(0,t.jsx)("button",{onClick:()=>l(e.id),className:"px-2 py-1 text-xs bg-green-100 text-green-700 rounded hover:bg-green-200 focus:ring-2 focus:ring-green-500","aria-label":`Unarchive client ${e.name}`,children:"Unarchive"}):(0,t.jsx)("button",{onClick:()=>r(e.id),className:"px-2 py-1 text-xs bg-red-100 text-red-700 rounded hover:bg-red-200 focus:ring-2 focus:ring-red-500","aria-label":`Archive client ${e.name}`,children:"Archive"})]})]}),(0,t.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,t.jsx)("button",{onClick:()=>alert("Edit client feature coming soon"),className:"px-2 py-1 text-xs bg-yellow-100 text-yellow-700 rounded hover:bg-yellow-200 focus:ring-2 focus:ring-yellow-500","aria-label":`Edit client ${e.name}`,children:"Edit"}),(0,t.jsx)("button",{onClick:()=>alert("Delete client feature coming soon"),className:"px-2 py-1 text-xs bg-gray-100 text-gray-700 rounded hover:bg-gray-200 focus:ring-2 focus:ring-gray-500","aria-label":`Delete client ${e.name}`,children:"Delete"})]})]},e.id)),p&&(0,t.jsx)("div",{role:"alert","aria-live":"assertive",className:"sr-only",children:p})]}):(0,t.jsxs)("div",{className:"overflow-x-auto",children:[(0,t.jsxs)("div",{className:"flex gap-4 mb-2 items-center",children:[(0,t.jsx)("input",{type:"text",value:u,onChange:e=>h(e.target.value),placeholder:"Search clients...",className:"px-3 py-2 border rounded-lg","aria-label":"Search clients"}),(0,t.jsxs)("select",{value:c.status,onChange:e=>d(t=>({...t,status:e.target.value})),className:"px-3 py-2 border rounded-lg","aria-label":"Filter by status",children:[(0,t.jsx)("option",{value:"",children:"All Statuses"}),(0,t.jsx)("option",{value:"active",children:"Active"}),(0,t.jsx)("option",{value:"archived",children:"Archived"}),(0,t.jsx)("option",{value:"inactive",children:"Inactive"})]}),(0,t.jsxs)("select",{value:c.financial,onChange:e=>d(t=>({...t,financial:e.target.value})),className:"px-3 py-2 border rounded-lg","aria-label":"Filter by financial status",children:[(0,t.jsx)("option",{value:"",children:"All Financials"}),(0,t.jsx)("option",{value:"overdue",children:"Overdue"}),(0,t.jsx)("option",{value:"high-value",children:"High Value"})]})]}),(0,t.jsxs)("table",{role:"grid","aria-label":"Client list",className:"min-w-full bg-white border rounded-lg",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-4 py-2 text-left",children:(0,t.jsx)("input",{type:"checkbox",checked:i.length===x.length&&x.length>0,onChange:e=>o(e.target.checked?x.map(e=>e.id):[]),"aria-label":"Select all clients"})}),(0,t.jsx)("th",{className:"px-4 py-2 text-left",children:"Name"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left",children:"Email"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left",children:"Company"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left",children:"Total Owed"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left",children:"Last Invoice"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left",children:"Status"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left",children:"Actions"})]})}),(0,t.jsx)("tbody",{children:x.map(e=>(0,t.jsxs)("tr",{className:s===e.id?"bg-blue-50":"",tabIndex:0,"aria-selected":s===e.id,onClick:()=>n(e),onKeyDown:t=>{("Enter"===t.key||" "===t.key)&&n(e)},style:{outline:s===e.id?"2px solid #2563eb":"none"},children:[(0,t.jsx)("td",{className:"px-4 py-2",children:(0,t.jsx)("input",{type:"checkbox",checked:i.includes(e.id),onChange:t=>{var a;t.stopPropagation(),a=e.id,o(i.includes(a)?i.filter(e=>e!==a):[...i,a])},"aria-label":`Select client ${e.name}`})}),(0,t.jsx)("td",{className:"px-4 py-2 font-semibold text-gray-900",children:e.name}),(0,t.jsx)("td",{className:"px-4 py-2 text-gray-600",children:e.email}),(0,t.jsx)("td",{className:"px-4 py-2 text-gray-500",children:e.company||"-"}),(0,t.jsxs)("td",{className:"px-4 py-2 text-right text-gray-900",children:["\0a3",e.totalOwed?.toLocaleString()||"0"]}),(0,t.jsx)("td",{className:"px-4 py-2 text-gray-600",children:e.lastInvoiceDate?new Date(e.lastInvoiceDate).toLocaleDateString():"-"}),(0,t.jsx)("td",{className:"px-4 py-2",children:(0,t.jsx)("span",{className:`px-2 py-1 rounded text-xs font-semibold ${"archived"===e.status?"bg-gray-200 text-gray-700":"active"===e.status?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:e.status||(e.archived?"archived":"active")})}),(0,t.jsx)("td",{className:"px-4 py-2 flex gap-2",children:e.archived?(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),l(e.id)},className:"px-2 py-1 text-xs bg-green-100 text-green-700 rounded hover:bg-green-200 focus:ring-2 focus:ring-green-500","aria-label":`Unarchive client ${e.name}`,children:"Unarchive"}):(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),r(e.id)},className:"px-2 py-1 text-xs bg-red-100 text-red-700 rounded hover:bg-red-200 focus:ring-2 focus:ring-red-500","aria-label":`Archive client ${e.name}`,children:"Archive"})})]},e.id))})]}),i.length>0&&(0,t.jsx)("div",{className:"mt-4 flex gap-2",children:(0,t.jsx)("button",{onClick:()=>{i.forEach(e=>r(e)),o([])},className:"px-4 py-2 bg-red-600 text-white rounded-lg font-semibold hover:bg-red-700","aria-label":"Archive selected clients",children:"Archive Selected"})}),p&&(0,t.jsx)("div",{role:"alert","aria-live":"assertive",className:"sr-only",children:p})]})},h=[{key:"contact",label:"Contact Info"},{key:"invoices",label:"Invoices"},{key:"payment",label:"Payment Info"},{key:"activity",label:"Activity/Notes"}],x=({client:e,onClose:n,onArchive:r,onUnarchive:s})=>{let[i,o]=(0,a.useState)("contact");return e?(0,t.jsx)(l.AccessibleDialog,{isOpen:!!e,onClose:n,title:e?.name||"Client details",description:e?.company||"",children:(0,t.jsxs)("div",{className:"p-6 relative",children:[(0,t.jsx)("button",{onClick:n,className:"absolute top-3 right-3 text-gray-400 hover:text-gray-600","aria-label":"Close client details",children:"×"}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("h2",{id:"client-modal-title",className:"text-2xl font-bold mb-1",children:e.name}),(0,t.jsxs)("div",{className:"flex gap-2 items-center mb-2",children:[e.company&&(0,t.jsx)("span",{className:"text-gray-700 font-semibold",children:e.company}),(0,t.jsx)("span",{className:`px-2 py-1 rounded text-xs font-semibold ${"archived"===e.status?"bg-gray-200 text-gray-700":"active"===e.status?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:e.status||(e.archived?"archived":"active")})]}),(0,t.jsxs)("div",{className:"text-lg font-bold text-blue-700",children:["£",e.totalOwed?.toLocaleString()||"0"]})]}),(0,t.jsx)("div",{className:"mb-4 border-b",children:(0,t.jsx)("nav",{className:"flex gap-4",children:h.map(e=>(0,t.jsx)("button",{onClick:()=>o(e.key),className:`pb-2 font-semibold text-sm border-b-2 ${i===e.key?"border-blue-600 text-blue-700":"border-transparent text-gray-500"}`,"aria-selected":i===e.key,"aria-controls":`tab-panel-${e.key}`,children:e.label},e.key))})}),(0,t.jsxs)("div",{id:`tab-panel-${i}`,role:"tabpanel",className:"min-h-[180px]",children:["contact"===i&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"mb-1 text-gray-700",children:["Email: ",(0,t.jsx)("span",{className:"font-mono",children:e.email})]}),e.phone&&(0,t.jsxs)("p",{className:"mb-1 text-gray-700",children:["Phone: ",(0,t.jsx)("span",{className:"font-mono",children:e.phone})]}),e.billingAddress&&(0,t.jsxs)("div",{className:"mb-1 text-gray-700",children:[(0,t.jsx)("div",{children:"Billing Address:"}),(0,t.jsxs)("div",{className:"font-mono text-sm",children:[e.billingAddress.street,(0,t.jsx)("br",{}),e.billingAddress.street2&&(0,t.jsxs)(t.Fragment,{children:[e.billingAddress.street2,(0,t.jsx)("br",{})]}),e.billingAddress.city,", ",e.billingAddress.state," ",e.billingAddress.postalCode,(0,t.jsx)("br",{}),e.billingAddress.country]})]}),e.tags&&e.tags.length>0&&(0,t.jsxs)("div",{className:"mb-1 text-gray-700",children:["Tags: ",(0,t.jsx)("span",{className:"font-mono",children:e.tags.join(", ")})]}),e.notes&&(0,t.jsxs)("div",{className:"mb-1 text-gray-700",children:["Notes: ",(0,t.jsx)("span",{className:"font-mono",children:e.notes})]})]}),"invoices"===i&&(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"mb-2 font-semibold",children:"Invoices"}),(0,t.jsxs)("div",{className:"mb-1",children:["Total invoices: ",e.invoiceCount||0]}),(0,t.jsxs)("div",{className:"mb-1",children:["Total paid: £",e.totalPaid?.toLocaleString()||"0"]}),(0,t.jsxs)("div",{className:"mb-1",children:["Total owed: £",e.totalOwed?.toLocaleString()||"0"]}),(0,t.jsxs)("div",{className:"mb-1",children:["Last invoice: ",e.lastInvoiceDate?new Date(e.lastInvoiceDate).toLocaleDateString():"-"]})]}),"payment"===i&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"mb-1",children:["Payment Terms: ",e.paymentTerms?`Net ${e.paymentTerms}`:"-"]}),(0,t.jsxs)("div",{className:"mb-1",children:["Preferred Payment Method: ",e.preferredPaymentMethod||"-"]}),(0,t.jsxs)("div",{className:"mb-1",children:["Currency: ",e.currency||"-"]}),(0,t.jsxs)("div",{className:"mb-1",children:["Tax ID: ",e.taxId||"-"]})]}),"activity"===i&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"mb-1",children:["Created: ",e.createdAt?new Date(e.createdAt).toLocaleDateString():"-"]}),(0,t.jsxs)("div",{className:"mb-1",children:["Updated: ",e.updatedAt?new Date(e.updatedAt).toLocaleDateString():"-"]})]})]}),(0,t.jsx)("div",{className:"mt-6 flex gap-2",children:e.archived?(0,t.jsx)("button",{onClick:()=>s(e.id),className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Unarchive"}):(0,t.jsx)("button",{onClick:()=>r(e.id),className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Archive"})})]})}):null},p=({event:e,clientId:t,userId:n})=>((0,a.useEffect)(()=>{window?.relayAnalytics?.track?.("client_event",{event:e,clientId:t,userId:n,timestamp:Date.now()})},[e,t,n]),null);async function f(e,t){let a=await fetch("/api/clients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"add",...t,userId:e})});if(!a.ok)throw Error((await a.json()).error||"Failed to add client");return(await a.json()).clientId}async function g(e,t){let a=await fetch(`/api/clients/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok)throw Error((await a.json()).error||"Failed to update client")}async function m(e){let t=await fetch("/api/clients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"archive",clientId:e})});if(!t.ok)throw Error((await t.json()).error||"Failed to archive client")}async function b(e,t="",a=1,n=20,r={}){let l=new URLSearchParams({search:t,page:a.toString(),pageSize:n.toString(),...r.status&&{status:r.status}}),s=await fetch(`/api/clients?${l}`);if(!s.ok)throw Error("Failed to fetch clients");return await s.json()}async function y(e){let t=await fetch(`/api/clients/${e}`);if(!t.ok){if(404===t.status)return null;throw Error("Failed to fetch client details")}return await t.json()}let v="currentUserId",j=()=>{let[e,n]=(0,a.useState)([]),[r,l]=(0,a.useState)(null),[s,i]=(0,a.useState)(!1),[o,c]=(0,a.useState)(!1),[h,j]=(0,a.useState)(null),[N,w]=(0,a.useState)(),[C,S]=(0,a.useState)(""),[k,A]=(0,a.useState)({});(0,a.useEffect)(()=>{c(!0),b(v,C,1,50,k).then(e=>{n(e),c(!1)}).catch(e=>{j("Failed to load clients"),c(!1)})},[C,k]);let O=async e=>{try{c(!0);let t=await y(e.id);l(t),i(!0),w({event:"select",clientId:e.id})}catch(e){j("Failed to load client details")}finally{c(!1)}},P=async t=>{try{c(!0);let a=await f(v,{name:t}),r=await y(a);n([r,...e]),l(r),i(!0),w({event:"add",clientId:a})}catch(e){j("Failed to add client")}finally{c(!1)}},E=async e=>{try{c(!0),await m(e),n(t=>t.map(t=>t.id===e?{...t,archived:!0}:t)),w({event:"archive",clientId:e})}catch(e){j("Failed to archive client")}finally{c(!1)}},T=async e=>{try{c(!0),await g(e,{archived:!1}),n(t=>t.map(t=>t.id===e?{...t,archived:!1}:t)),w({event:"unarchive",clientId:e})}catch(e){j("Failed to unarchive client")}finally{c(!1)}};return(0,t.jsxs)("div",{className:"max-w-2xl mx-auto p-6",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Client Management"}),o&&(0,t.jsx)("div",{className:"mb-4 text-blue-600",children:"Loading..."}),h&&(0,t.jsx)("div",{className:"mb-4 text-red-600",children:h}),(0,t.jsxs)("div",{className:"mb-4 flex flex-col md:flex-row gap-4 items-center justify-between",children:[(0,t.jsx)("input",{type:"text",placeholder:"Search by name, email, company, phone, invoice, tags...",className:"px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 w-full md:w-1/2",value:C,onChange:e=>S(e.target.value),"aria-label":"Search clients"}),(0,t.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,t.jsxs)("select",{value:k.status||"",onChange:e=>A(t=>({...t,status:e.target.value||void 0})),className:"px-3 py-2 border rounded-lg","aria-label":"Filter by status",children:[(0,t.jsx)("option",{value:"",children:"All Status"}),(0,t.jsx)("option",{value:"active",children:"Active"}),(0,t.jsx)("option",{value:"archived",children:"Archived"}),(0,t.jsx)("option",{value:"inactive",children:"Inactive"})]}),(0,t.jsx)("input",{type:"text",placeholder:"Tags (comma separated)",className:"px-3 py-2 border rounded-lg",value:k.tags?k.tags.join(","):"",onChange:e=>A(t=>({...t,tags:e.target.value?e.target.value.split(",").map(e=>e.trim()):void 0})),"aria-label":"Filter by tags"}),(k.status||k.tags&&k.tags.length>0)&&(0,t.jsx)("button",{onClick:()=>A({}),className:"px-3 py-2 bg-gray-200 rounded-lg text-gray-700 font-semibold","aria-label":"Clear all filters",children:"Clear Filters"})]})]}),(0,t.jsxs)("div",{className:"mb-2 flex gap-2",children:[k.status&&(0,t.jsxs)("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs font-semibold",children:["Status: ",k.status]}),k.tags&&k.tags.length>0&&(0,t.jsxs)("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded text-xs font-semibold",children:["Tags: ",k.tags.join(", ")]})]}),(0,t.jsx)(d,{clients:e,onSelectClient:O,onAddNewClient:P,selectedClient:r}),(0,t.jsx)("div",{className:"mt-8",children:(0,t.jsx)(u,{clients:e,onSelect:O,onArchive:E,onUnarchive:T,selectedClientId:r?.id})}),s&&(0,t.jsx)(x,{client:r,onClose:()=>i(!1),onArchive:E,onUnarchive:T}),N&&(0,t.jsx)(p,{event:N.event,clientId:N.clientId})]})},N=({onClick:e})=>(0,t.jsx)("button",{onClick:e,className:"px-4 py-2 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors","aria-label":"Open client management",children:"Manage Clients"});function w(){let[e,l]=(0,a.useState)(!1);return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("div",{className:"bg-white border-b",children:(0,t.jsxs)("div",{className:"container mx-auto px-4 py-6 flex items-center justify-between",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Clients"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(n.default,{href:"/dashboard/clients/new",children:(0,t.jsx)(r.Button,{children:"+ Add Client"})}),(0,t.jsx)(N,{onClick:()=>l(!0)})]})]})}),(0,t.jsx)("div",{className:"container mx-auto px-4 py-8",children:e&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-2xl p-6 relative",children:[(0,t.jsx)("button",{onClick:()=>l(!1),className:"absolute top-3 right-3 text-gray-400 hover:text-gray-600","aria-label":"Close client management",children:"×"}),(0,t.jsx)(j,{})]})})})]})}e.s(["default",()=>w],313680)}]);

//# sourceMappingURL=a831471e983836d0.js.map