module.exports=[579926,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(50944),e=a.i(256711);function f(){let a=(0,d.useParams)().id,[f,g]=(0,c.useState)(!0),[h,i]=(0,c.useState)(!1),[j,k]=(0,c.useState)(null),[l,m]=(0,c.useState)(null),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)("bank_transfer"),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)((0,e.format)(new Date,"yyyy-MM-dd")),[x,y]=(0,c.useState)("");async function z(b){b.preventDefault(),i(!0),m(null);try{let b=await fetch(`/api/invoices/${a}/claim-payment`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paymentMethod:r,paymentReference:t||void 0,paymentDate:new Date(v),clientNotes:x||void 0})}),c=await b.json();if(!b.ok)throw Error(c.error||"Failed to submit payment claim");o(!0)}catch(a){m(a instanceof Error?a.message:"Failed to submit payment claim")}finally{i(!1)}}return((0,c.useEffect)(()=>{async function b(){try{let b=await fetch(`/api/invoices/${a}`),c=await b.json();if(!b.ok)throw Error(c.error||"Failed to load invoice");k(c)}catch(a){m(a instanceof Error?a.message:"Failed to load invoice")}finally{g(!1)}}a&&b()},[a]),f)?(0,b.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-50",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"h-12 w-12 animate-spin rounded-full border-b-2 border-blue-600 mx-auto"}),(0,b.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading invoice..."})]})}):l&&!j?(0,b.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-50",children:(0,b.jsx)("div",{className:"max-w-md w-full bg-white shadow-lg rounded-lg p-8",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("svg",{className:"mx-auto h-12 w-12 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,b.jsx)("h2",{className:"mt-4 text-xl font-semibold text-gray-900",children:"Error"}),(0,b.jsx)("p",{className:"mt-2 text-gray-600",children:l})]})})}):n?(0,b.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-50",children:(0,b.jsx)("div",{className:"max-w-md w-full bg-white shadow-lg rounded-lg p-8",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("svg",{className:"mx-auto h-12 w-12 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,b.jsx)("h2",{className:"mt-4 text-xl font-semibold text-gray-900",children:"Payment Claim Submitted!"}),(0,b.jsxs)("p",{className:"mt-2 text-gray-600",children:["Thank you! ",j?.freelancerName||"The freelancer"," has been notified and will verify receipt of your payment."]}),(0,b.jsx)("p",{className:"mt-4 text-sm text-gray-500",children:"You will receive a confirmation email once the payment is verified."})]})})}):j?.status==="paid"?(0,b.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-50",children:(0,b.jsx)("div",{className:"max-w-md w-full bg-white shadow-lg rounded-lg p-8",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("svg",{className:"mx-auto h-12 w-12 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,b.jsx)("h2",{className:"mt-4 text-xl font-semibold text-gray-900",children:"Already Paid"}),(0,b.jsx)("p",{className:"mt-2 text-gray-600",children:"This invoice has already been marked as paid. Thank you!"})]})})}):(0,b.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,b.jsxs)("div",{className:"max-w-2xl w-full",children:[(0,b.jsxs)("div",{className:"bg-white shadow-lg rounded-lg p-8 mb-6",children:[(0,b.jsxs)("div",{className:"border-b pb-6 mb-6",children:[(0,b.jsxs)("h1",{className:"text-2xl font-bold text-gray-900",children:["Invoice #",j?.reference]}),(0,b.jsxs)("p",{className:"mt-2 text-sm text-gray-600",children:["From: ",j?.freelancerName||j?.freelancerEmail]}),(0,b.jsxs)("p",{className:"text-sm text-gray-600",children:["To: ",j?.clientName]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Invoice Date:"}),(0,b.jsx)("span",{className:"font-medium",children:j?.invoiceDate&&(0,e.format)(new Date(1e3*j.invoiceDate.seconds),"PPP")})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Due Date:"}),(0,b.jsx)("span",{className:"font-medium",children:j?.dueDate&&(0,e.format)(new Date(1e3*j.dueDate.seconds),"PPP")})]}),j?.description&&(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Description:"}),(0,b.jsx)("span",{className:"font-medium",children:j.description})]}),(0,b.jsxs)("div",{className:"flex justify-between text-lg font-bold border-t pt-4 mt-4",children:[(0,b.jsx)("span",{children:"Amount Due:"}),(0,b.jsxs)("span",{className:"text-blue-600",children:[j?.currency==="GBP"?"Â£":"",j?.amount.toFixed(2)]})]})]})]}),(0,b.jsxs)("div",{className:"bg-white shadow-lg rounded-lg p-8",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Payment Options"}),l&&(0,b.jsx)("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:l}),(0,b.jsxs)("button",{disabled:!0,className:"w-full flex justify-center items-center py-4 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:bg-gray-300 disabled:cursor-not-allowed mb-4",children:[(0,b.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{d:"M13.976 9.15c-2.172-.806-3.356-1.426-3.356-2.409 0-.831.683-1.305 1.901-1.305 2.227 0 4.515.858 6.09 1.631l.89-5.494C18.252.975 15.697 0 12.165 0 9.667 0 7.589.654 6.104 1.872 4.56 3.147 3.757 4.992 3.757 7.218c0 4.039 2.467 5.76 6.476 7.219 2.585.92 3.445 1.574 3.445 2.583 0 .98-.84 1.545-2.354 1.545-1.875 0-4.965-.921-6.99-2.109l-.9 5.555C5.175 22.99 8.385 24 11.714 24c2.641 0 4.843-.624 6.328-1.813 1.664-1.305 2.525-3.236 2.525-5.732 0-4.128-2.524-5.851-6.594-7.305h.003z"})}),"Pay with Card (Coming Soon)"]}),(0,b.jsxs)("div",{className:"relative my-6",children:[(0,b.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,b.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,b.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,b.jsx)("span",{className:"px-2 bg-white text-gray-500",children:"OR"})})]}),p?(0,b.jsxs)("form",{onSubmit:z,className:"space-y-6 border-2 border-blue-200 rounded-lg p-6 bg-blue-50",children:[(0,b.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Confirm Your Payment"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"paymentMethod",className:"block text-sm font-medium text-gray-700",children:"Payment Method"}),(0,b.jsxs)("select",{id:"paymentMethod",required:!0,value:r,onChange:a=>s(a.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[(0,b.jsx)("option",{value:"bank_transfer",children:"Bank Transfer (BACS)"}),(0,b.jsx)("option",{value:"cash",children:"Cash"}),(0,b.jsx)("option",{value:"cheque",children:"Cheque"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"paymentReference",className:"block text-sm font-medium text-gray-700",children:"Payment Reference (Optional)"}),(0,b.jsx)("input",{type:"text",id:"paymentReference",value:t,onChange:a=>u(a.target.value),placeholder:"e.g., Transaction ID, reference number",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),(0,b.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"This helps the freelancer identify your payment"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"paymentDate",className:"block text-sm font-medium text-gray-700",children:"Date Paid"}),(0,b.jsx)("input",{type:"date",id:"paymentDate",required:!0,value:v,onChange:a=>w(a.target.value),max:(0,e.format)(new Date,"yyyy-MM-dd"),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"clientNotes",className:"block text-sm font-medium text-gray-700",children:"Notes (Optional)"}),(0,b.jsx)("textarea",{id:"clientNotes",rows:3,value:x,onChange:a=>y(a.target.value),placeholder:"Any additional information about your payment...",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),(0,b.jsxs)("div",{className:"flex space-x-3",children:[(0,b.jsx)("button",{type:"button",onClick:()=>q(!1),className:"flex-1 py-3 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),(0,b.jsx)("button",{type:"submit",disabled:h,className:"flex-1 py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-gray-400 disabled:cursor-not-allowed",children:h?"Submitting...":"Submit Payment Claim"})]})]}):(0,b.jsxs)("button",{onClick:()=>q(!0),className:"w-full flex justify-center items-center py-4 px-4 border-2 border-blue-600 rounded-md shadow-sm text-sm font-medium text-blue-600 bg-white hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,b.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),"I Paid via Bank Transfer"]})]})]})})}a.s(["default",()=>f])}];

//# sourceMappingURL=app_invoice_%5Bid%5D_page_tsx_46d29102._.js.map