module.exports=[193695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},155742,a=>a.a(async(b,c)=>{try{let b=await a.y("firebase-admin/firestore");a.n(b),c()}catch(a){c(a)}},!0),456300,a=>a.a(async(b,c)=>{try{let b=await a.y("firebase-admin/app");a.n(b),c()}catch(a){c(a)}},!0),894222,a=>a.a(async(b,c)=>{try{let b=await a.y("firebase-admin/storage");a.n(b),c()}catch(a){c(a)}},!0),70864,a=>{a.n(a.i(233290))},43619,a=>{a.n(a.i(379962))},13718,a=>{a.n(a.i(685523))},118198,a=>{a.n(a.i(545518))},262212,a=>{a.n(a.i(866114))},265167,a=>a.a(async(b,c)=>{try{var d=a.i(456300),e=a.i(155742),f=a.i(894222),g=b([d,e,f]);if([d,e,f]=g.then?(await g)():g,!(0,d.getApps)().length)try{let a=process.env.FIREBASE_PROJECT_ID,b=process.env.FIREBASE_CLIENT_EMAIL,c=process.env.FIREBASE_PRIVATE_KEY?.replace(/\\n/g,"\n");a&&b&&c?((0,d.initializeApp)({credential:(0,d.cert)({projectId:a,clientEmail:b,privateKey:c})}),console.log("âœ… Firebase Admin initialized successfully")):console.warn("âš ï¸  Firebase credentials not configured - app will not function at runtime")}catch(a){console.error("âŒ Firebase Admin initialization error:",a)}let h=null,i=new Proxy({},{get:(a,b)=>(function(){if(!h){if(!(0,d.getApps)().length)throw Error("Firebase is not initialized. Make sure environment variables are configured.");h=(0,e.getFirestore)()}return h})()[b]});(0,f.getStorage)(),a.s(["COLLECTIONS",0,{USERS:"users",INVOICES:"invoices",PAYMENT_CONFIRMATIONS:"payment_confirmations",PAYMENT_CLAIMS:"payment_claims",COLLECTION_ATTEMPTS:"collection_attempts",CLIENTS:"clients",NOTIFICATIONS:"notifications",TRANSACTIONS:"transactions",REFERRALS:"referrals",REFERRAL_CREDITS:"referral_credits",REFERRAL_PAYOUTS:"referral_payouts",USER_BEHAVIOR_PROFILE:"user_behavior_profile",USER_STATS:"user_stats",USER_EVENTS:"user_events",DAILY_SUMMARIES:"daily_summaries",EMAILS_SENT:"emails_sent",ONBOARDING_PROGRESS:"onboarding_progress",AGENCY_HANDOFFS:"agency_handoffs"},"db",0,i]),c()}catch(a){c(a)}},!1),765900,a=>a.a(async(b,c)=>{try{var d=a.i(907997),e=a.i(105072);a.i(570396);var f=a.i(673727),g=a.i(395936),h=a.i(636655),i=a.i(681525),j=a.i(491526),k=a.i(265167),l=b([k]);async function m({params:a}){let{userId:b}=await (0,e.auth)(),{id:c}=await a;b||(0,f.redirect)("/sign-in");let l=await k.db.collection(k.COLLECTIONS.INVOICES).doc(c).get();if(!l.exists)return(0,d.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,d.jsxs)(h.Card,{className:"p-8 text-center",children:[(0,d.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Invoice Not Found"}),(0,d.jsx)("p",{className:"text-gray-600 mb-4",children:"The invoice you're looking for doesn't exist"}),(0,d.jsx)(g.default,{href:"/dashboard/invoices",children:(0,d.jsx)(j.Button,{children:"Back to Invoices"})})]})});let m=l.data();m.freelancerId!==b&&(0,f.redirect)("/dashboard/invoices");let n=[];m.collectionsEnabled&&(n=(await k.db.collection(k.COLLECTIONS.COLLECTION_ATTEMPTS).where("invoiceId","==",c).orderBy("createdAt","desc").limit(10).get()).docs.map(a=>a.data()));let o=a=>(0,d.jsx)(i.Badge,{variant:{paid:"success",sent:"default",overdue:"destructive",draft:"secondary",cancelled:"secondary"}[a]||"default",children:a}),p=a=>{if(!a)return"N/A";let b=a._seconds||a.seconds||a;return new Date(1e3*b).toLocaleDateString("en-GB")};return(0,d.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,d.jsx)("div",{className:"bg-white border-b",children:(0,d.jsx)("div",{className:"container mx-auto px-4 py-6",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,d.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:m.reference}),o(m.status)]}),(0,d.jsx)("p",{className:"text-gray-600",children:"Invoice Details"})]}),(0,d.jsxs)("div",{className:"flex gap-3",children:[(0,d.jsx)(g.default,{href:"/dashboard/invoices",children:(0,d.jsx)(j.Button,{variant:"outline",children:"â† Back"})}),"draft"===m.status&&(0,d.jsx)(j.Button,{children:"Send Invoice"})]})]})})}),(0,d.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,d.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,d.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,d.jsxs)(h.Card,{className:"p-6",children:[(0,d.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Invoice Information"}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Client Name"}),(0,d.jsx)("p",{className:"font-semibold text-gray-900",children:m.clientName})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Client Email"}),(0,d.jsx)("p",{className:"font-semibold text-gray-900",children:m.clientEmail})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Invoice Date"}),(0,d.jsx)("p",{className:"font-semibold text-gray-900",children:p(m.invoiceDate)})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Due Date"}),(0,d.jsx)("p",{className:"font-semibold text-gray-900",children:p(m.dueDate)})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Amount"}),(0,d.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["Â£",m.amount.toLocaleString()]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Status"}),(0,d.jsx)("div",{className:"mt-1",children:o(m.status)})]})]}),m.description&&(0,d.jsxs)("div",{className:"mt-6 pt-6 border-t",children:[(0,d.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Description"}),(0,d.jsx)("p",{className:"text-gray-900",children:m.description})]}),m.lineItems&&m.lineItems.length>0&&(0,d.jsxs)("div",{className:"mt-6 pt-6 border-t",children:[(0,d.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Line Items"}),(0,d.jsx)("div",{className:"space-y-2",children:m.lineItems.map((a,b)=>(0,d.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"font-medium text-gray-900",children:a.description}),(0,d.jsxs)("p",{className:"text-sm text-gray-600",children:["Qty: ",a.quantity," Ã— Â£",a.unitPrice]})]}),(0,d.jsxs)("p",{className:"font-semibold text-gray-900",children:["Â£",(a.quantity*a.unitPrice).toFixed(2)]})]},b))})]})]}),m.collectionsEnabled&&(0,d.jsxs)(h.Card,{className:"p-6",children:[(0,d.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:["Collections History (",m.collectionsAttempts," attempts)"]}),n.length>0?(0,d.jsx)("div",{className:"space-y-4",children:n.map((a,b)=>(0,d.jsxs)("div",{className:"flex items-start gap-4 p-4 bg-gray-50 rounded-lg",children:[(0,d.jsxs)("div",{className:"text-2xl",children:["email_reminder"===a.attemptType&&"ðŸ“§","sms_reminder"===a.attemptType&&"ðŸ“±","ai_call"===a.attemptType&&"ðŸ“ž","physical_letter"===a.attemptType&&"ðŸ“¬",!["email_reminder","sms_reminder","ai_call","physical_letter"].includes(a.attemptType)&&"ðŸ””"]}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,d.jsx)("p",{className:"font-semibold text-gray-900",children:a.attemptType.replace(/_/g," ").toUpperCase()}),(0,d.jsx)(i.Badge,{variant:"success"===a.result?"secondary":"default",children:a.result})]}),(0,d.jsx)("p",{className:"text-sm text-gray-600",children:a.resultDetails}),(0,d.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:p(a.attemptDate)})]})]},b))}):(0,d.jsx)("p",{className:"text-gray-500 text-center py-8",children:"No collection attempts yet"})]})]}),(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)(h.Card,{className:"p-6",children:[(0,d.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"Quick Actions"}),(0,d.jsxs)("div",{className:"space-y-2",children:["draft"===m.status&&(0,d.jsx)(j.Button,{className:"w-full",children:"ðŸ“¤ Send Invoice"}),"sent"===m.status&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(j.Button,{className:"w-full",variant:"outline",children:"ðŸ“§ Resend Invoice"}),(0,d.jsx)(j.Button,{className:"w-full",variant:"outline",children:"ðŸ’³ Mark as Paid"})]}),"overdue"===m.status&&!m.collectionsEnabled&&(0,d.jsx)(j.Button,{className:"w-full",children:"ðŸ¤– Enable Collections"}),"paid"===m.status&&(0,d.jsx)(j.Button,{className:"w-full",variant:"outline",children:"ðŸ“¥ Download Receipt"}),(0,d.jsx)(g.default,{href:`/dashboard/invoices/${c}/edit`,children:(0,d.jsx)(j.Button,{className:"w-full",variant:"outline",children:"âœï¸ Edit Invoice"})})]})]}),"paid"===m.status&&m.paidAt&&(0,d.jsxs)(h.Card,{className:"p-6",children:[(0,d.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"Payment Details"}),(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm text-gray-600",children:"Paid On"}),(0,d.jsx)("p",{className:"font-semibold text-gray-900",children:p(m.paidAt)})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm text-gray-600",children:"Payment Method"}),(0,d.jsx)("p",{className:"font-semibold text-gray-900",children:m.paymentMethod||"N/A"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm text-gray-600",children:"Amount Received"}),(0,d.jsxs)("p",{className:"text-xl font-bold text-green-600",children:["Â£",m.amount.toLocaleString()]})]})]})]}),m.collectionsEnabled&&(0,d.jsxs)(h.Card,{className:"p-6",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,d.jsx)("span",{className:"text-xl",children:"ðŸ¤–"}),(0,d.jsx)("h3",{className:"font-semibold text-gray-900",children:"Collections Active"})]}),(0,d.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Automated collection reminders are enabled for this invoice"}),(0,d.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsx)("span",{className:"text-gray-600",children:"Attempts"}),(0,d.jsx)("span",{className:"font-semibold",children:m.collectionsAttempts})]}),(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsx)("span",{className:"text-gray-600",children:"Last Attempt"}),(0,d.jsx)("span",{className:"font-semibold",children:m.lastCollectionAttemptAt?p(m.lastCollectionAttemptAt):"Never"})]})]}),(0,d.jsx)(j.Button,{className:"w-full mt-4",variant:"outline",size:"sm",children:"Disable Collections"})]}),m.stripePaymentLinkUrl&&(0,d.jsxs)(h.Card,{className:"p-6",children:[(0,d.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"Payment Link"}),(0,d.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"Share this link with your client for online payment"}),(0,d.jsx)("input",{type:"text",readOnly:!0,value:m.stripePaymentLinkUrl,className:"w-full px-3 py-2 text-sm border rounded bg-gray-50 mb-2",onClick:a=>a.target.select()}),(0,d.jsx)(j.Button,{variant:"outline",size:"sm",className:"w-full",onClick:()=>{navigator.clipboard.writeText(m.stripePaymentLinkUrl),alert("Link copied!")},children:"ðŸ“‹ Copy Link"})]})]})]})})]})}[k]=l.then?(await l)():l,a.s(["default",()=>m]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=%5Broot-of-the-server%5D__b6bc52fd._.js.map