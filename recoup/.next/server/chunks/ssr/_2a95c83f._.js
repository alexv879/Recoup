module.exports=[298621,a=>{"use strict";function b(){for(var a,b,c=0,d="",e=arguments.length;c<e;c++)(a=arguments[c])&&(b=function a(b){var c,d,e="";if("string"==typeof b||"number"==typeof b)e+=b;else if("object"==typeof b)if(Array.isArray(b)){var f=b.length;for(c=0;c<f;c++)b[c]&&(d=a(b[c]))&&(e&&(e+=" "),e+=d)}else for(d in b)b[d]&&(e&&(e+=" "),e+=d);return e}(a))&&(d&&(d+=" "),d+=b);return d}a.s(["clsx",()=>b])},720505,a=>{"use strict";var b=a.i(187924),c=a.i(497895);function d({className:a,variant:d="default",size:e="default",asChild:f=!1,...g}){return(0,b.jsx)("button",{className:(0,c.cn)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"underline-offset-4 hover:underline text-primary"}[d],{default:"h-10 py-2 px-4",sm:"h-9 px-3 rounded-md",lg:"h-11 px-8 rounded-md",icon:"h-10 w-10"}[e],a),...g})}a.s(["Button",()=>d])},408458,a=>{"use strict";var b=a.i(187924),c=a.i(497895);function d({className:a,children:d,...e}){return(0,b.jsx)("div",{className:(0,c.cn)("rounded-lg border bg-white shadow-sm",a),...e,children:d})}a.s(["Card",()=>d])},179813,a=>{"use strict";var b=a.i(187924),c=a.i(497895);function d({className:a,variant:d="default",...e}){return(0,b.jsx)("div",{className:(0,c.cn)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}[d],a),...e})}a.s(["Badge",()=>d])},767506,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(408458),e=a.i(179813),f=a.i(720505);function g(){let[a,g]=(0,c.useState)([]),[h,i]=(0,c.useState)(!0),[j,k]=(0,c.useState)("all");(0,c.useEffect)(()=>{l()},[]);let l=async()=>{i(!0);try{let a=await fetch("/api/notifications");if(a.ok){let b=await a.json();g(b.notifications||[])}}catch(a){console.error("Failed to fetch notifications:",a)}finally{i(!1)}},m=async a=>{try{(await fetch(`/api/notifications/${a}/read`,{method:"POST"})).ok&&g(b=>b.map(b=>b.notificationId===a?{...b,isRead:!0}:b))}catch(a){console.error("Failed to mark notification as read:",a)}},n=async()=>{try{(await fetch("/api/notifications",{method:"PUT"})).ok&&g(a=>a.map(a=>({...a,isRead:!0})))}catch(a){console.error("Failed to mark all as read:",a)}},o=a.filter(a=>"all"===j||!a.isRead),p=a.filter(a=>!a.isRead).length;return(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)("div",{className:"bg-white border-b",children:(0,b.jsx)("div",{className:"container mx-auto px-4 py-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Notifications"}),p>0&&(0,b.jsxs)(e.Badge,{variant:"destructive",children:[p," unread"]})]}),(0,b.jsx)("p",{className:"text-gray-600 mt-1",children:"Stay updated with your business activities"})]}),p>0&&(0,b.jsx)(f.Button,{variant:"outline",onClick:n,children:"Mark All as Read"})]})})}),(0,b.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,b.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,b.jsx)(d.Card,{className:"p-4 mb-6",children:(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(f.Button,{variant:"all"===j?"default":"outline",size:"sm",onClick:()=>k("all"),children:"All"}),(0,b.jsxs)(f.Button,{variant:"unread"===j?"default":"outline",size:"sm",onClick:()=>k("unread"),children:["Unread (",p,")"]})]})}),h?(0,b.jsx)("div",{className:"text-center py-12",children:(0,b.jsx)("p",{className:"text-gray-500",children:"Loading notifications..."})}):0===o.length?(0,b.jsxs)(d.Card,{className:"p-12 text-center",children:[(0,b.jsx)("div",{className:"text-6xl mb-4",children:"ğŸ””"}),(0,b.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No notifications"}),(0,b.jsx)("p",{className:"text-gray-600",children:"unread"===j?"All caught up! No unread notifications":"You don't have any notifications yet"})]}):(0,b.jsx)("div",{className:"space-y-4",children:o.map(a=>{let c,g,h,i,j;return(0,b.jsx)(d.Card,{className:`p-6 cursor-pointer transition-all ${!a.isRead?"border-l-4 border-l-blue-500":""} ${{invoice_drought:"bg-blue-50",payment_delay:"bg-orange-50",opportunity:"bg-green-50",system:"bg-gray-50"}[a.type]||"bg-gray-50"}`,onClick:()=>!a.isRead&&m(a.notificationId),children:(0,b.jsxs)("div",{className:"flex items-start gap-4",children:[(0,b.jsx)("div",{className:"text-3xl",children:{invoice_drought:"ğŸ“„",payment_delay:"â°",opportunity:"ğŸ’¡",system:"ğŸ””"}[a.type]||"ğŸ””"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-900 mb-1",children:a.title}),(0,b.jsx)("p",{className:"text-gray-700",children:a.message})]}),!a.isRead&&(0,b.jsx)(e.Badge,{variant:"default",className:"ml-2",children:"New"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:(c=new Date(1e3*a.createdAt._seconds),h=Math.floor((g=new Date().getTime()-c.getTime())/6e4),i=Math.floor(g/36e5),j=Math.floor(g/864e5),h<1?"Just now":h<60?`${h}m ago`:i<24?`${i}h ago`:j<7?`${j}d ago`:c.toLocaleDateString("en-GB"))}),a.actionUrl&&a.actionText&&(0,b.jsx)(f.Button,{variant:"outline",size:"sm",onClick:b=>{b.stopPropagation(),window.location.href=a.actionUrl},children:a.actionText})]})]})]})},a.notificationId)})})]})})]})}a.s(["default",()=>g])}];

//# sourceMappingURL=_2a95c83f._.js.map