module.exports=[108383,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(50944),e=a.i(256711),f=a.i(811462);function g(){let a=(0,d.useParams)();(0,d.useRouter)();let g=a.token,[h,i]=(0,c.useState)(!0),[j,k]=(0,c.useState)(!1),[l,m]=(0,c.useState)(null),[n,o]=(0,c.useState)(null),[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)(""),[t,u]=(0,c.useState)("bank_transfer"),[v,w]=(0,c.useState)((0,e.format)(new Date,"yyyy-MM-dd")),[x,y]=(0,c.useState)("");async function z(a){a.preventDefault(),k(!0),o(null);try{let a=await fetch("/api/payment-confirmation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({confirmationToken:g,amount:parseFloat(r),paymentMethod:t,datePaid:v,clientNotes:x})}),b=await a.json();if(!a.ok)throw Error(b.message||"Failed to confirm payment");q(!0)}catch(a){o(a instanceof Error?a.message:"Failed to confirm payment")}finally{k(!1)}}return((0,c.useEffect)(()=>{async function a(){try{let a=await fetch(`/api/payment-confirmation?token=${g}`),b=await a.json();if(!a.ok)throw Error(b.message||"Failed to load confirmation");m(b.confirmation),s(b.confirmation.expectedAmount.toString())}catch(a){o(a instanceof Error?a.message:"Failed to load confirmation")}finally{i(!1)}}g&&a()},[g]),h)?(0,b.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-50",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"h-12 w-12 animate-spin rounded-full border-b-2 border-blue-600 mx-auto"}),(0,b.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading confirmation..."})]})}):n&&!l?(0,b.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-50",children:(0,b.jsx)("div",{className:"max-w-md w-full bg-white shadow-lg rounded-lg p-8",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("svg",{className:"mx-auto h-12 w-12 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,b.jsx)("h2",{className:"mt-4 text-xl font-semibold text-gray-900",children:"Error"}),(0,b.jsx)("p",{className:"mt-2 text-gray-600",children:n})]})})}):p?(0,b.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-50",children:(0,b.jsx)("div",{className:"max-w-md w-full bg-white shadow-lg rounded-lg p-8",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("svg",{className:"mx-auto h-12 w-12 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,b.jsx)("h2",{className:"mt-4 text-xl font-semibold text-gray-900",children:"Payment Confirmed!"}),(0,b.jsx)("p",{className:"mt-2 text-gray-600",children:"Thank you for confirming your payment. The freelancer has been notified and will verify receipt."}),(0,b.jsx)("p",{className:"mt-4 text-sm text-gray-500",children:"You may close this page."})]})})}):l?.status!=="pending_client"?(0,b.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-50",children:(0,b.jsx)("div",{className:"max-w-md w-full bg-white shadow-lg rounded-lg p-8",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("svg",{className:"mx-auto h-12 w-12 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,b.jsx)("h2",{className:"mt-4 text-xl font-semibold text-gray-900",children:"Already Confirmed"}),(0,b.jsx)("p",{className:"mt-2 text-gray-600",children:"This payment has already been confirmed. No further action is needed."})]})})}):(0,b.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,b.jsxs)("div",{className:"max-w-md w-full bg-white shadow-lg rounded-lg p-8",children:[(0,b.jsxs)("div",{className:"text-center mb-8",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Confirm Payment"}),(0,b.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Please confirm that you have sent the payment for this invoice."})]}),n&&(0,b.jsx)("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:n}),(0,b.jsxs)("form",{onSubmit:z,className:"space-y-6",children:[(0,b.jsx)(f.AccessibleFormField,{id:"amount",label:"Amount Paid (Â£)",type:"number",step:"0.01",min:"0",required:!0,value:r,onChange:a=>s(a.target.value),helpText:`Expected: \xa3${l?.expectedAmount.toFixed(2)}`,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),(0,b.jsx)(f.AccessibleFormField,{id:"paymentMethod",label:"Payment Method",type:"select",required:!0,value:t,onChange:a=>u(a.target.value),options:[{value:"bank_transfer",label:"Bank Transfer"},{value:"card",label:"Card Payment"}],className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),(0,b.jsx)(f.AccessibleFormField,{id:"datePaid",label:"Date Paid",type:"date",required:!0,value:v,onChange:a=>w(a.target.value),max:(0,e.format)(new Date,"yyyy-MM-dd"),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),(0,b.jsx)(f.AccessibleFormField,{id:"clientNotes",label:"Notes",type:"textarea",rows:3,value:x,onChange:a=>y(a.target.value),placeholder:"Any additional notes about the payment...",helpText:"Optional",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),(0,b.jsx)("button",{type:"submit",disabled:j,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-gray-400 disabled:cursor-not-allowed",children:j?"Confirming...":"Confirm Payment"})]}),(0,b.jsxs)("p",{className:"mt-6 text-xs text-center text-gray-500",children:["This confirmation link expires on"," ",l&&(0,e.format)(new Date(l.expiresAt),"PPP")]})]})})}a.s(["default",()=>g])}];

//# sourceMappingURL=app_confirmation_%5Btoken%5D_page_tsx_f3712e55._.js.map