module.exports=[257417,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(898003),e=a.i(170106);let f=(0,e.default)("building-2",[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]]),g=(0,e.default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),h=(0,e.default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),i=(0,e.default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),j=(0,e.default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);function k(){let{user:a}=(0,d.useUser)(),[e,k]=(0,c.useState)(!0),[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(null),[r,s]=(0,c.useState)(""),[t,u]=(0,c.useState)("freelancer"),[v,w]=(0,c.useState)({companyName:"",addressLine1:"",addressLine2:"",city:"",postcode:"",country:"United Kingdom"}),[x,y]=(0,c.useState)(!0);(0,c.useEffect)(()=>{!async function(){try{let a=await fetch("/api/users/me");if(!a.ok)throw Error("Failed to load settings");let b=await a.json();s(b.businessName||""),u(b.businessType||"freelancer"),b.businessAddress&&w({companyName:b.businessAddress.companyName||"",addressLine1:b.businessAddress.addressLine1||"",addressLine2:b.businessAddress.addressLine2||"",city:b.businessAddress.city||"",postcode:b.businessAddress.postcode||"",country:b.businessAddress.country||"United Kingdom"}),k(!1)}catch(a){console.error("Error loading settings:",a),q("Failed to load settings"),k(!1)}}()},[]);let z=a=>/^[A-Z]{1,2}\d{1,2}[A-Z]?\s?\d[A-Z]{2}$/i.test(a.trim()),A=async()=>{try{m(!0),q(null),o(!1);let a=v.addressLine1||v.city||v.postcode;if(a){if(!v.addressLine1||!v.city||!v.postcode){q("Please complete all required address fields (Address, City, Postcode)"),m(!1);return}if(!z(v.postcode)){q("Please enter a valid UK postcode (e.g., SW1A 1AA)"),m(!1);return}}let b=await fetch("/api/users/me",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({businessName:r,businessType:t,businessAddress:a?v:null})});if(!b.ok){let a=await b.json();throw Error(a.error||"Failed to save settings")}o(!0),setTimeout(()=>o(!1),3e3)}catch(a){console.error("Error saving settings:",a),q(a.message||"Failed to save settings")}finally{m(!1)}};return e?(0,b.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):(0,b.jsxs)("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[(0,b.jsxs)("div",{className:"border-b pb-4",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Settings"}),(0,b.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage your account and business settings"})]}),n&&(0,b.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 flex items-center gap-3",children:[(0,b.jsx)(j,{className:"w-5 h-5 text-green-600"}),(0,b.jsx)("span",{className:"text-green-800 font-medium",children:"Settings saved successfully!"})]}),p&&(0,b.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-center gap-3",children:[(0,b.jsx)(i,{className:"w-5 h-5 text-red-600"}),(0,b.jsx)("span",{className:"text-red-800",children:p})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,b.jsx)(f,{className:"w-6 h-6 text-indigo-600"}),(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Business Details"})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Name"}),(0,b.jsx)("input",{type:"text",value:r,onChange:a=>s(a.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-indigo-600 focus:border-transparent",placeholder:"Your business or freelance name"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Type"}),(0,b.jsxs)("select",{value:t,onChange:a=>u(a.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-indigo-600 focus:border-transparent",children:[(0,b.jsx)("option",{value:"freelancer",children:"Freelancer"}),(0,b.jsx)("option",{value:"consultant",children:"Consultant"}),(0,b.jsx)("option",{value:"agency",children:"Agency"})]})]})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,b.jsx)(g,{className:"w-6 h-6 text-indigo-600"}),(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Business Address"})]}),(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-6",children:"Required for sending physical collection letters. Your address will appear on letter headers."}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Company Name ",(0,b.jsx)("span",{className:"text-gray-400",children:"(Optional)"})]}),(0,b.jsx)("input",{type:"text",value:v.companyName,onChange:a=>w({...v,companyName:a.target.value}),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-indigo-600 focus:border-transparent",placeholder:"Company Ltd"})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Address Line 1 ",(0,b.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,b.jsx)("input",{type:"text",value:v.addressLine1,onChange:a=>w({...v,addressLine1:a.target.value}),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-indigo-600 focus:border-transparent",placeholder:"123 High Street"})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Address Line 2 ",(0,b.jsx)("span",{className:"text-gray-400",children:"(Optional)"})]}),(0,b.jsx)("input",{type:"text",value:v.addressLine2,onChange:a=>w({...v,addressLine2:a.target.value}),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-indigo-600 focus:border-transparent",placeholder:"Suite 4B"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["City ",(0,b.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,b.jsx)("input",{type:"text",value:v.city,onChange:a=>w({...v,city:a.target.value}),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-indigo-600 focus:border-transparent",placeholder:"London"})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Postcode ",(0,b.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,b.jsx)("input",{type:"text",value:v.postcode,onChange:a=>{var b;return b=a.target.value,void(w({...v,postcode:b}),b.trim()?y(z(b)):y(!0))},className:`w-full border rounded-lg px-4 py-2 focus:ring-2 focus:ring-indigo-600 focus:border-transparent ${!x?"border-red-300 bg-red-50":"border-gray-300"}`,placeholder:"SW1A 1AA"}),!x&&(0,b.jsx)("p",{className:"text-xs text-red-600 mt-1",children:"Please enter a valid UK postcode"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Country"}),(0,b.jsx)("input",{type:"text",value:v.country,readOnly:!0,className:"w-full border border-gray-300 rounded-lg px-4 py-2 bg-gray-50 text-gray-500"})]})]})]}),(0,b.jsx)("div",{className:"flex justify-end",children:(0,b.jsx)("button",{onClick:A,disabled:l||!x,className:"bg-indigo-600 hover:bg-indigo-700 text-white font-medium px-6 py-3 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed inline-flex items-center gap-2 transition-colors",children:l?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h,{className:"w-5 h-5"}),"Save Settings"]})})})]})}a.s(["default",()=>k],257417)}];

//# sourceMappingURL=app_dashboard_settings_page_tsx_831e41af._.js.map