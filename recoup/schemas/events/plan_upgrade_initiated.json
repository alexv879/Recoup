{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "plan_upgrade_initiated",
    "description": "User initiated upgrade to a higher tier (clicked CTA button on Pricing V3)",
    "type": "object",
    "required": [
        "plan_id",
        "plan_name",
        "billing_cycle",
        "price",
        "timestamp"
    ],
    "properties": {
        "plan_id": {
            "type": "string",
            "description": "Target plan identifier",
            "enum": [
                "starter",
                "growth",
                "pro"
            ]
        },
        "plan_name": {
            "type": "string",
            "description": "Human-readable plan name",
            "enum": [
                "Starter",
                "Growth",
                "Pro"
            ]
        },
        "billing_cycle": {
            "type": "string",
            "description": "Selected billing cycle",
            "enum": [
                "monthly",
                "annual"
            ]
        },
        "price": {
            "type": "number",
            "description": "Price in GBP (annual total or monthly Ã— 12)",
            "minimum": 0
        },
        "user_id": {
            "type": "string",
            "description": "Clerk user ID (if authenticated)"
        },
        "current_tier": {
            "type": "string",
            "description": "User's current subscription tier",
            "enum": [
                "free",
                "starter",
                "growth",
                "pro",
                "business",
                "paid"
            ]
        },
        "is_trial": {
            "type": "boolean",
            "description": "Whether this is a trial signup",
            "default": true
        },
        "source": {
            "type": "string",
            "description": "Source page or component",
            "enum": [
                "pricing_page",
                "dashboard_upgrade_prompt",
                "limit_reached_modal",
                "email_cta"
            ]
        },
        "timestamp": {
            "type": "string",
            "format": "date-time",
            "description": "ISO 8601 timestamp of upgrade initiation"
        }
    }
}