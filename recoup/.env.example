# ==============================================================================
# Recoup Environment Variables
# Copy this file to .env.local and fill in your values
# ==============================================================================

# ------------------------------------------------------------------------------
# App Configuration
# ------------------------------------------------------------------------------
NODE_ENV=development
NEXT_PUBLIC_APP_URL=http://localhost:3000

# ------------------------------------------------------------------------------
# Clerk Authentication (https://clerk.com)
# Get your keys from: https://dashboard.clerk.com
# ------------------------------------------------------------------------------
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=pk_test_...
CLERK_SECRET_KEY=sk_test_...
NEXT_PUBLIC_CLERK_SIGN_IN_URL=/sign-in
NEXT_PUBLIC_CLERK_SIGN_UP_URL=/sign-up
NEXT_PUBLIC_CLERK_AFTER_SIGN_IN_URL=/dashboard
NEXT_PUBLIC_CLERK_AFTER_SIGN_UP_URL=/dashboard

# ------------------------------------------------------------------------------
# AI Services (Multi-Model Strategy)
# Per IMPROVEMENTS_SUMMARY.md: Gemini 80%, Claude 15%, OpenAI 5%
# ------------------------------------------------------------------------------

# Google Gemini 2.5 Pro (PRIMARY - 80% of operations)
# Get your key from: https://makersuite.google.com/app/apikey
# Cost: ~£9/month for routine operations (chat, email drafts, summaries)
GEMINI_API_KEY=

# Anthropic Claude 3.7 Sonnet (SECONDARY - 15% of operations)
# Get your key from: https://console.anthropic.com
# Cost: ~£6/month for complex/sensitive cases (legal, compliance, disputes)
ANTHROPIC_API_KEY=

# OpenAI (VOICE ONLY - 5% of operations)
# Get your key from: https://platform.openai.com/api-keys
# Cost: ~£30/month for voice calls (OpenAI Realtime API)
OPENAI_API_KEY=

# ------------------------------------------------------------------------------
# Email Services (Resend PRIMARY, SendGrid BACKUP)
# Per IMPROVEMENTS_SUMMARY.md line 20
# ------------------------------------------------------------------------------

# Resend (PRIMARY - 96%+ deliverability)
# Get your key from: https://resend.com/api-keys
RESEND_API_KEY=
RESEND_FROM_EMAIL=noreply@yourdomain.com

# SendGrid (BACKUP - failover)
# Get your key from: https://app.sendgrid.com/settings/api_keys
SENDGRID_API_KEY=
SENDGRID_FROM_EMAIL=noreply@yourdomain.com
SENDGRID_FROM_NAME=Recoup

# SendGrid Template IDs (Optional - for dynamic templates)
SENDGRID_INVOICE_TEMPLATE_ID=
SENDGRID_REMINDER_DAY7_TEMPLATE_ID=
SENDGRID_REMINDER_DAY21_TEMPLATE_ID=
SENDGRID_PAYMENT_CONFIRMED_TEMPLATE_ID=
SENDGRID_PAYMENT_VERIFICATION_TEMPLATE_ID=
SENDGRID_PAYMENT_VERIFIED_TEMPLATE_ID=
SENDGRID_PAYMENT_REJECTED_TEMPLATE_ID=
SENDGRID_NOTIFICATION_TEMPLATE_ID=

# ------------------------------------------------------------------------------
# Twilio (SMS + Voice)
# Get your credentials from: https://console.twilio.com
# ------------------------------------------------------------------------------
TWILIO_ACCOUNT_SID=ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
TWILIO_AUTH_TOKEN=
TWILIO_PHONE_NUMBER=+447xxxxxxxxx

# ------------------------------------------------------------------------------
# Python Microservices
# These should point to your Python services (Docker or deployed)
# ------------------------------------------------------------------------------

# Voice Service (Port 8001)
PYTHON_VOICE_SERVICE_URL=http://localhost:8001

# Analytics Service (Port 8002)
PYTHON_ANALYTICS_SERVICE_URL=http://localhost:8002

# AI Voice Agent (Port 8003)
PYTHON_AI_VOICE_AGENT_URL=http://localhost:8003

# Decision Engine (Port 8004)
PYTHON_DECISION_ENGINE_URL=http://localhost:8004

# ------------------------------------------------------------------------------
# Firebase (Database & Storage)
# Get your config from: https://console.firebase.google.com
# ------------------------------------------------------------------------------
NEXT_PUBLIC_FIREBASE_API_KEY=
NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=
NEXT_PUBLIC_FIREBASE_PROJECT_ID=
NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET=
NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID=
NEXT_PUBLIC_FIREBASE_APP_ID=

# Firebase Admin SDK (Server-side)
# Download service account JSON from Firebase Console > Project Settings > Service Accounts
FIREBASE_SERVICE_ACCOUNT_KEY='{
  "type": "service_account",
  "project_id": "your-project-id",
  "private_key_id": "...",
  "private_key": "...",
  "client_email": "...",
  "client_id": "...",
  "auth_uri": "https://accounts.google.com/o/oauth2/auth",
  "token_uri": "https://oauth2.googleapis.com/token"
}'

# ------------------------------------------------------------------------------
# Stripe (Payments)
# Get your keys from: https://dashboard.stripe.com/apikeys
# ------------------------------------------------------------------------------
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_...
STRIPE_SECRET_KEY=sk_test_...
STRIPE_WEBHOOK_SECRET=whsec_...

# ------------------------------------------------------------------------------
# Upstash Redis (Rate Limiting & Caching)
# Get your credentials from: https://console.upstash.com
# ------------------------------------------------------------------------------
UPSTASH_REDIS_REST_URL=
UPSTASH_REDIS_REST_TOKEN=

# ------------------------------------------------------------------------------
# Lob (Letter Sending - Optional)
# Get your key from: https://dashboard.lob.com
# ------------------------------------------------------------------------------
LOB_API_KEY=

# ------------------------------------------------------------------------------
# Sentry (Error Tracking - Optional)
# Get your DSN from: https://sentry.io/settings/projects
# ------------------------------------------------------------------------------
NEXT_PUBLIC_SENTRY_DSN=
SENTRY_AUTH_TOKEN=
SENTRY_ORG=
SENTRY_PROJECT=

# ------------------------------------------------------------------------------
# Mixpanel (Analytics - Optional)
# Get your token from: https://mixpanel.com/settings/project
# ------------------------------------------------------------------------------
NEXT_PUBLIC_MIXPANEL_TOKEN=

# ------------------------------------------------------------------------------
# Feature Flags
# ------------------------------------------------------------------------------
ENABLE_AI_FEATURES=true
ENABLE_VOICE_CALLS=true
ENABLE_SMS_REMINDERS=true
ENABLE_EMAIL_AUTOMATION=true
ENABLE_FCA_COMPLIANCE_CHECKS=true
ENABLE_ANALYTICS=true

# ------------------------------------------------------------------------------
# FCA Compliance Settings (UK Debt Collection)
# ------------------------------------------------------------------------------
MIN_INVOICE_AMOUNT=50.0
CALL_COOLDOWN_HOURS=24
MAX_CALL_DURATION_MINUTES=10
ALLOWED_CALL_HOURS_START=8
ALLOWED_CALL_HOURS_END=21
# Days of week (1=Monday, 7=Sunday): 1,2,3,4,5,6 = Mon-Sat
ALLOWED_CALL_DAYS=1,2,3,4,5,6
RECORD_CALLS=true

# ------------------------------------------------------------------------------
# Rate Limiting
# ------------------------------------------------------------------------------
RATE_LIMIT_ENABLED=true
API_RATE_LIMIT_REQUESTS=100
API_RATE_LIMIT_WINDOW=60000

# ------------------------------------------------------------------------------
# Email Sequence Settings
# ------------------------------------------------------------------------------
EMAIL_SEQUENCE_ENABLED=true
# Days after due date to send reminders
EMAIL_DAY_5_ENABLED=true
EMAIL_DAY_15_ENABLED=true
EMAIL_DAY_30_ENABLED=true

# ------------------------------------------------------------------------------
# Collections Settings
# ------------------------------------------------------------------------------
# Minimum amount to enable collections
MIN_COLLECTIONS_AMOUNT=100.0
# Threshold for court action
COURT_THRESHOLD=500.0
# Threshold for agency handoff
AGENCY_MIN_AMOUNT=200.0
# Threshold for write-off
WRITEOFF_THRESHOLD=50.0

# ------------------------------------------------------------------------------
# Development/Debug
# ------------------------------------------------------------------------------
DEBUG=false
LOG_LEVEL=info
VERBOSE_LOGGING=false
