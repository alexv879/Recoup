{"version":3,"sources":["turbopack:///[project]/node_modules/@sendgrid/client/package.json","../../../node_modules/%40sendgrid/helpers/helpers/convert-keys.js","../../../node_modules/%40sendgrid/helpers/helpers/str-to-camel-case.js","../../../node_modules/%40sendgrid/helpers/helpers/to-camel-case.js","../../../node_modules/%40sendgrid/helpers/helpers/str-to-snake-case.js","../../../node_modules/%40sendgrid/helpers/helpers/to-snake-case.js","../../../node_modules/%40sendgrid/helpers/helpers/deep-clone.js","../../../node_modules/%40sendgrid/helpers/classes/attachment.js","../../../node_modules/%40sendgrid/helpers/helpers/split-name-email.js","../../../node_modules/%40sendgrid/helpers/classes/email-address.js","../../../node_modules/deepmerge/dist/cjs.js","../../../node_modules/%40sendgrid/helpers/helpers/wrap-substitutions.js","../../../node_modules/%40sendgrid/helpers/classes/personalization.js","../../../node_modules/%40sendgrid/helpers/helpers/array-to-json.js","../../../node_modules/%40sendgrid/helpers/constants/index.js","../../../node_modules/%40sendgrid/helpers/helpers/validate-settings.js","../../../node_modules/%40sendgrid/helpers/classes/mail.js","../../../node_modules/%40sendgrid/helpers/classes/response.js","../../../node_modules/%40sendgrid/helpers/classes/response-error.js","../../../node_modules/%40sendgrid/helpers/classes/statistics.js","../../../node_modules/%40sendgrid/helpers/classes/index.js","../../../node_modules/%40sendgrid/helpers/helpers/merge-data.js","../../../node_modules/%40sendgrid/helpers/helpers/index.js","../../../node_modules/%40sendgrid/helpers/index.js","../../../node_modules/%40sendgrid/client/src/classes/client.js","../../../node_modules/%40sendgrid/client/src/client.js","../../../node_modules/%40sendgrid/client/index.js","../../../node_modules/%40sendgrid/mail/src/classes/mail-service.js","../../../node_modules/%40sendgrid/mail/src/mail.js","../../../node_modules/%40sendgrid/mail/index.js","../../../lib/sendgrid.ts"],"sourcesContent":["{\"name\":\"@sendgrid/client\",\"description\":\"Twilio SendGrid NodeJS API client\",\"version\":\"8.1.6\",\"author\":\"Twilio SendGrid <help@twilio.com> (sendgrid.com)\",\"contributors\":[\"Kyle Partridge <kyle.partridge@sendgrid.com>\",\"David Tomberlin <david.tomberlin@sendgrid.com>\",\"Swift <swift@sendgrid.com>\",\"Brandon West <brandon.west@sendgrid.com>\",\"Scott Motte <scott.motte@sendgrid.com>\",\"Robert Acosta <robert.acosta@sendgrid.com>\",\"Elmer Thomas <ethomas@twilio.com>\",\"Adam Reis <adam@reis.nz>\"],\"license\":\"MIT\",\"homepage\":\"https://sendgrid.com\",\"repository\":{\"type\":\"git\",\"url\":\"git://github.com/sendgrid/sendgrid-nodejs.git\"},\"publishConfig\":{\"access\":\"public\"},\"main\":\"index.js\",\"engines\":{\"node\":\">=12.*\"},\"dependencies\":{\"@sendgrid/helpers\":\"^8.0.0\",\"axios\":\"^1.12.0\"},\"devDependencies\":{\"chai\":\"4.2.0\",\"nock\":\"^10.0.6\"},\"resolutions\":{\"chai\":\"4.2.0\"},\"tags\":[\"http\",\"rest\",\"api\",\"mail\",\"sendgrid\"],\"gitHead\":\"498e2329e87d804d83f4a7b519d33fa09198d0ca\"}","'use strict';\n\n/**\n * Helper to convert an object's keys\n */\nmodule.exports = function convertKeys(obj, converter, ignored) {\n\n  //Validate\n  if (typeof obj !== 'object' || obj === null) {\n    throw new Error('Non object passed to convertKeys: ' + obj);\n  }\n\n  //Ignore arrays\n  if (Array.isArray(obj)) {\n    return obj;\n  }\n\n  //Ensure array for ignored values\n  if (!Array.isArray(ignored)) {\n    ignored = [];\n  }\n\n  //Process all properties\n  for (const key in obj) {\n    //istanbul ignore else\n    if (obj.hasOwnProperty(key)) {\n\n      //Convert key to snake case\n      const converted = converter(key);\n\n      //Recursive for child objects, unless ignored\n      //The ignored check checks both variants of the key\n      if (typeof obj[key] === 'object' && obj[key] !== null) {\n        if (!ignored.includes(key) && !ignored.includes(converted)) {\n          obj[key] = convertKeys(obj[key], converter, ignored);\n        }\n      }\n\n      //Convert key to snake case and set if needed\n      if (converted !== key) {\n        obj[converted] = obj[key];\n        delete obj[key];\n      }\n    }\n  }\n\n  //Return object\n  return obj;\n};\n","'use strict';\n\n/**\n * Internal conversion helper\n */\nmodule.exports = function strToCamelCase(str) {\n  if (typeof str !== 'string') {\n    throw new Error('String expected for conversion to snake case');\n  }\n  return str\n    .trim()\n    .replace(/_+|\\-+/g, ' ')\n    .replace(/(?:^\\w|[A-Z]|\\b\\w|\\s+)/g, function(match, index) {\n      if (Number(match) === 0) {\n        return '';\n      }\n      return (index === 0) ? match.toLowerCase() : match.toUpperCase();\n    });\n};\n","'use strict';\n\n/**\n * Dependencies\n */\nconst convertKeys = require('./convert-keys');\nconst strToCamelCase = require('./str-to-camel-case');\n\n/**\n * Convert object keys to camel case\n */\nmodule.exports = function toCamelCase(obj, ignored) {\n  return convertKeys(obj, strToCamelCase, ignored);\n};\n","'use strict';\n\n/**\n * Internal conversion helper\n */\nmodule.exports = function strToSnakeCase(str) {\n  if (typeof str !== 'string') {\n    throw new Error('String expected for conversion to snake case');\n  }\n  return str.trim().replace(/(\\s*\\-*\\b\\w|[A-Z])/g, function($1) {\n    $1 = $1.trim().toLowerCase().replace('-', '');\n    return ($1[0] === '_' ? '' : '_') + $1;\n  }).slice(1);\n};\n","'use strict';\n\n/**\n * Dependencies\n */\nconst convertKeys = require('./convert-keys');\nconst strToSnakeCase = require('./str-to-snake-case');\n\n/**\n * Convert object keys to snake case\n */\nmodule.exports = function toSnakeCase(obj, ignored) {\n  return convertKeys(obj, strToSnakeCase, ignored);\n};\n","'use strict';\n\n/**\n * Deep cloning helper for objects\n */\nmodule.exports = function deepClone(obj) {\n  return JSON.parse(JSON.stringify(obj));\n};\n","'use strict';\n\n/**\n * Dependencies\n */\nconst toCamelCase = require('../helpers/to-camel-case');\nconst toSnakeCase = require('../helpers/to-snake-case');\nconst deepClone = require('../helpers/deep-clone');\nconst fs = require('fs');\nconst path = require('path');\n\n/**\n * Attachment class\n */\nclass Attachment {\n\n  /**\n   * Constructor\n   */\n  constructor(data) {\n\n    //Create from data\n    if (data) {\n      this.fromData(data);\n    }\n  }\n\n  /**\n   * From data\n   */\n  fromData(data) {\n\n    //Expecting object\n    if (typeof data !== 'object') {\n      throw new Error('Expecting object for Mail data');\n    }\n\n    //Convert to camel case to make it workable, making a copy to prevent\n    //changes to the original objects\n    data = deepClone(data);\n    data = toCamelCase(data);\n\n    //Extract properties from data\n    const {\n      content,\n      filename,\n      type,\n      disposition,\n      contentId,\n      filePath,\n    } = data;\n\n    if ((typeof content !== 'undefined') && (typeof filePath !== 'undefined')) {\n      throw new Error(\n        \"The props 'content' and 'filePath' cannot be used together.\"\n      );\n    }\n\n    //Set data\n    this.setFilename(filename);\n    this.setType(type);\n    this.setDisposition(disposition);\n    this.setContentId(contentId);\n    this.setContent(filePath ? this.readFile(filePath) : content);\n  }\n\n  /**\n   * Read a file and return its content as base64\n   */\n  readFile(filePath) {\n    return fs.readFileSync(path.resolve(filePath));\n  }\n\n  /**\n   * Set content\n   */\n  setContent(content) {\n    //Duck type check toString on content if it's a Buffer as that's the method that will be called.\n    if (typeof content === 'string') {\n      this.content = content;\n      return;\n    } else if (content instanceof Buffer && content.toString !== undefined) {\n      this.content = content.toString();\n\n      if (this.disposition === 'attachment') {\n        this.content = content.toString('base64');\n      }\n\n      return;\n    }\n\n    throw new Error('`content` expected to be either Buffer or string');\n  }\n\n  /**\n   * Set content\n   */\n  setFileContent(content) {\n    if (content instanceof Buffer && content.toString !== undefined) {\n      this.content = content.toString('base64');\n      return;\n    }\n\n    throw new Error('`content` expected to be Buffer');\n  }\n\n  /**\n   * Set filename\n   */\n  setFilename(filename) {\n    if (typeof filename === 'undefined') {\n      return;\n    }\n    if (filename && typeof filename !== 'string') {\n      throw new Error('String expected for `filename`');\n    }\n    this.filename = filename;\n  }\n\n  /**\n   * Set type\n   */\n  setType(type) {\n    if (typeof type === 'undefined') {\n      return;\n    }\n    if (typeof type !== 'string') {\n      throw new Error('String expected for `type`');\n    }\n    this.type = type;\n  }\n\n  /**\n   * Set disposition\n   */\n  setDisposition(disposition) {\n    if (typeof disposition === 'undefined') {\n      return;\n    }\n    if (typeof disposition !== 'string') {\n      throw new Error('String expected for `disposition`');\n    }\n    this.disposition = disposition;\n  }\n\n  /**\n   * Set content ID\n   */\n  setContentId(contentId) {\n    if (typeof contentId === 'undefined') {\n      return;\n    }\n    if (typeof contentId !== 'string') {\n      throw new Error('String expected for `contentId`');\n    }\n    this.contentId = contentId;\n  }\n\n  /**\n   * To JSON\n   */\n  toJSON() {\n\n    //Extract properties from self\n    const {content, filename, type, disposition, contentId} = this;\n\n    //Initialize with mandatory properties\n    const json = {content, filename};\n\n    //Add whatever else we have\n    if (typeof type !== 'undefined') {\n      json.type = type;\n    }\n    if (typeof disposition !== 'undefined') {\n      json.disposition = disposition;\n    }\n    if (typeof contentId !== 'undefined') {\n      json.contentId = contentId;\n    }\n\n    //Return\n    return toSnakeCase(json);\n  }\n}\n\n//Export class\nmodule.exports = Attachment;\n","'use strict';\n\n/**\n * Split name and email address from string\n */\nmodule.exports = function splitNameEmail(str) {\n\n  //If no email bracket present, return as is\n  if (str.indexOf('<') === -1) {\n    return ['', str];\n  }\n\n  //Split into name and email\n  let [name, email] = str.split('<');\n\n  //Trim and fix up\n  name = name.trim();\n  email = email.replace('>', '').trim();\n\n  //Return as array\n  return [name, email];\n};\n","'use strict';\n\n/**\n * Dependencies\n */\nconst splitNameEmail = require('../helpers/split-name-email');\n\n/**\n * Email address class\n */\nclass EmailAddress {\n\n  /**\n\t * Constructor\n\t */\n  constructor(data) {\n\n    //Construct from data\n    if (data) {\n      this.fromData(data);\n    }\n  }\n\n  /**\n   * From data\n   */\n  fromData(data) {\n\n    //String given\n    if (typeof data === 'string') {\n      const [name, email] = splitNameEmail(data);\n      data = {name, email};\n    }\n\n    //Expecting object\n    if (typeof data !== 'object') {\n      throw new Error('Expecting object or string for EmailAddress data');\n    }\n\n    //Extract name and email\n    const {name, email} = data;\n\n    //Set\n    this.setEmail(email);\n    this.setName(name);\n  }\n\n  /**\n   * Set name\n   */\n  setName(name) {\n    if (typeof name === 'undefined') {\n      return;\n    }\n    if (typeof name !== 'string') {\n      throw new Error('String expected for `name`');\n    }\n    this.name = name;\n  }\n\n  /**\n   * Set email (mandatory)\n   */\n  setEmail(email) {\n    if (typeof email === 'undefined') {\n      throw new Error('Must provide `email`');\n    }\n    if (typeof email !== 'string') {\n      throw new Error('String expected for `email`');\n    }\n    this.email = email;\n  }\n\n  /**\n\t * To JSON\n\t */\n  toJSON() {\n\n    //Get properties\n    const {email, name} = this;\n\n    //Initialize with mandatory properties\n    const json = {email};\n\n    //Add name if present\n    if (name !== '') {\n      json.name = name;\n    }\n\n    //Return\n    return json;\n  }\n\n  /**************************************************************************\n   * Static helpers\n   ***/\n\n  /**\n   * Create an EmailAddress instance from given data\n   */\n  static create(data) {\n\n    //Array?\n    if (Array.isArray(data)) {\n      return data\n        .filter(item => !!item)\n        .map(item => this.create(item));\n    }\n\n    //Already instance of EmailAddress class?\n    if (data instanceof EmailAddress) {\n      return data;\n    }\n\n    //Create instance\n    return new EmailAddress(data);\n  }\n}\n\n//Export class\nmodule.exports = EmailAddress;\n","'use strict';\n\nvar isMergeableObject = function isMergeableObject(value) {\n\treturn isNonNullObject(value)\n\t\t&& !isSpecial(value)\n};\n\nfunction isNonNullObject(value) {\n\treturn !!value && typeof value === 'object'\n}\n\nfunction isSpecial(value) {\n\tvar stringValue = Object.prototype.toString.call(value);\n\n\treturn stringValue === '[object RegExp]'\n\t\t|| stringValue === '[object Date]'\n\t\t|| isReactElement(value)\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\nfunction isReactElement(value) {\n\treturn value.$$typeof === REACT_ELEMENT_TYPE\n}\n\nfunction emptyTarget(val) {\n\treturn Array.isArray(val) ? [] : {}\n}\n\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n\treturn (options.clone !== false && options.isMergeableObject(value))\n\t\t? deepmerge(emptyTarget(value), value, options)\n\t\t: value\n}\n\nfunction defaultArrayMerge(target, source, options) {\n\treturn target.concat(source).map(function(element) {\n\t\treturn cloneUnlessOtherwiseSpecified(element, options)\n\t})\n}\n\nfunction getMergeFunction(key, options) {\n\tif (!options.customMerge) {\n\t\treturn deepmerge\n\t}\n\tvar customMerge = options.customMerge(key);\n\treturn typeof customMerge === 'function' ? customMerge : deepmerge\n}\n\nfunction getEnumerableOwnPropertySymbols(target) {\n\treturn Object.getOwnPropertySymbols\n\t\t? Object.getOwnPropertySymbols(target).filter(function(symbol) {\n\t\t\treturn Object.propertyIsEnumerable.call(target, symbol)\n\t\t})\n\t\t: []\n}\n\nfunction getKeys(target) {\n\treturn Object.keys(target).concat(getEnumerableOwnPropertySymbols(target))\n}\n\nfunction propertyIsOnObject(object, property) {\n\ttry {\n\t\treturn property in object\n\t} catch(_) {\n\t\treturn false\n\t}\n}\n\n// Protects from prototype poisoning and unexpected merging up the prototype chain.\nfunction propertyIsUnsafe(target, key) {\n\treturn propertyIsOnObject(target, key) // Properties are safe to merge if they don't exist in the target yet,\n\t\t&& !(Object.hasOwnProperty.call(target, key) // unsafe if they exist up the prototype chain,\n\t\t\t&& Object.propertyIsEnumerable.call(target, key)) // and also unsafe if they're nonenumerable.\n}\n\nfunction mergeObject(target, source, options) {\n\tvar destination = {};\n\tif (options.isMergeableObject(target)) {\n\t\tgetKeys(target).forEach(function(key) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n\t\t});\n\t}\n\tgetKeys(source).forEach(function(key) {\n\t\tif (propertyIsUnsafe(target, key)) {\n\t\t\treturn\n\t\t}\n\n\t\tif (propertyIsOnObject(target, key) && options.isMergeableObject(source[key])) {\n\t\t\tdestination[key] = getMergeFunction(key, options)(target[key], source[key], options);\n\t\t} else {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n\t\t}\n\t});\n\treturn destination\n}\n\nfunction deepmerge(target, source, options) {\n\toptions = options || {};\n\toptions.arrayMerge = options.arrayMerge || defaultArrayMerge;\n\toptions.isMergeableObject = options.isMergeableObject || isMergeableObject;\n\t// cloneUnlessOtherwiseSpecified is added to `options` so that custom arrayMerge()\n\t// implementations can use it. The caller may not replace it.\n\toptions.cloneUnlessOtherwiseSpecified = cloneUnlessOtherwiseSpecified;\n\n\tvar sourceIsArray = Array.isArray(source);\n\tvar targetIsArray = Array.isArray(target);\n\tvar sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n\tif (!sourceAndTargetTypesMatch) {\n\t\treturn cloneUnlessOtherwiseSpecified(source, options)\n\t} else if (sourceIsArray) {\n\t\treturn options.arrayMerge(target, source, options)\n\t} else {\n\t\treturn mergeObject(target, source, options)\n\t}\n}\n\ndeepmerge.all = function deepmergeAll(array, options) {\n\tif (!Array.isArray(array)) {\n\t\tthrow new Error('first argument should be an array')\n\t}\n\n\treturn array.reduce(function(prev, next) {\n\t\treturn deepmerge(prev, next, options)\n\t}, {})\n};\n\nvar deepmerge_1 = deepmerge;\n\nmodule.exports = deepmerge_1;\n","'use strict';\n\n/**\n * Wrap substitutions\n */\nmodule.exports = function wrap(substitutions, left = '{{', right = '}}') {\n\n  //Process arrays\n  if (Array.isArray(substitutions)) {\n    return substitutions.map(subs => wrap(subs, left, right));\n  }\n\n  //Initialize new wrapped object\n  const wrapped = {};\n\n  //Map substitutions and ensure string for value\n  for (const key in substitutions) {\n    //istanbul ignore else\n    if (substitutions.hasOwnProperty(key)) {\n      wrapped[left + key + right] = String(substitutions[key]);\n    }\n  }\n\n  //Return wrapped substitutions\n  return wrapped;\n};\n","'use strict';\n\n/**\n * Dependencies\n */\nconst EmailAddress = require('./email-address');\nconst toCamelCase = require('../helpers/to-camel-case');\nconst toSnakeCase = require('../helpers/to-snake-case');\nconst deepClone = require('../helpers/deep-clone');\nconst deepMerge = require('deepmerge');\nconst wrapSubstitutions = require('../helpers/wrap-substitutions');\n\n/**\n * Personalization class\n */\nclass Personalization {\n\n  /**\n   * Constructor\n   */\n  constructor(data) {\n\n    //Init array and object placeholders\n    this.to = [];\n    this.cc = [];\n    this.bcc = [];\n    this.headers = {};\n    this.customArgs = {};\n    this.substitutions = {};\n    this.substitutionWrappers = ['{{', '}}'];\n    this.dynamicTemplateData = {};\n\n    //Build from data if given\n    if (data) {\n      this.fromData(data);\n    }\n  }\n\n  /**\n   * From data\n   */\n  fromData(data) {\n\n    //Expecting object\n    if (typeof data !== 'object') {\n      throw new Error('Expecting object for Mail data');\n    }\n\n    //Convert to camel case to make it workable, making a copy to prevent\n    //changes to the original objects\n    data = deepClone(data);\n    data = toCamelCase(data, ['substitutions', 'dynamicTemplateData', 'customArgs', 'headers']);\n\n    //Extract properties from data\n    const {\n      to, from, cc, bcc, subject, headers, customArgs, sendAt,\n      substitutions, substitutionWrappers, dynamicTemplateData,\n    } = data;\n\n    //Set data\n    this.setTo(to);\n    this.setFrom(from);\n    this.setCc(cc);\n    this.setBcc(bcc);\n    this.setSubject(subject);\n    this.setHeaders(headers);\n    this.setSubstitutions(substitutions);\n    this.setSubstitutionWrappers(substitutionWrappers);\n    this.setCustomArgs(customArgs);\n    this.setDynamicTemplateData(dynamicTemplateData);\n    this.setSendAt(sendAt);\n  }\n\n  /**\n   * Set subject\n   */\n  setSubject(subject) {\n    if (typeof subject === 'undefined') {\n      return;\n    }\n    if (typeof subject !== 'string') {\n      throw new Error('String expected for `subject`');\n    }\n    this.subject = subject;\n  }\n\n  /**\n   * Set send at\n   */\n  setSendAt(sendAt) {\n    if (typeof sendAt === 'undefined') {\n      return;\n    }\n    if (!Number.isInteger(sendAt)) {\n      throw new Error('Integer expected for `sendAt`');\n    }\n    this.sendAt = sendAt;\n  }\n\n  /**\n   * Set to\n   */\n  setTo(to) {\n    if (typeof to === 'undefined') {\n      return;\n    }\n    if (!Array.isArray(to)) {\n      to = [to];\n    }\n    this.to = EmailAddress.create(to);\n  }\n\n  /**\n   * Set from\n   * */\n  setFrom(from) {\n    if (typeof from === 'undefined') {\n      return;\n    }\n    this.from = EmailAddress.create(from);\n  }\n\n  /**\n   * Add a single to\n   */\n  addTo(to) {\n    if (typeof to === 'undefined') {\n      return;\n    }\n    this.to.push(EmailAddress.create(to));\n  }\n\n  /**\n   * Set cc\n   */\n  setCc(cc) {\n    if (typeof cc === 'undefined') {\n      return;\n    }\n    if (!Array.isArray(cc)) {\n      cc = [cc];\n    }\n    this.cc = EmailAddress.create(cc);\n  }\n\n  /**\n   * Add a single cc\n   */\n  addCc(cc) {\n    if (typeof cc === 'undefined') {\n      return;\n    }\n    this.cc.push(EmailAddress.create(cc));\n  }\n\n  /**\n   * Set bcc\n   */\n  setBcc(bcc) {\n    if (typeof bcc === 'undefined') {\n      return;\n    }\n    if (!Array.isArray(bcc)) {\n      bcc = [bcc];\n    }\n    this.bcc = EmailAddress.create(bcc);\n  }\n\n  /**\n   * Add a single bcc\n   */\n  addBcc(bcc) {\n    if (typeof bcc === 'undefined') {\n      return;\n    }\n    this.bcc.push(EmailAddress.create(bcc));\n  }\n\n  /**\n   * Set headers\n   */\n  setHeaders(headers) {\n    if (typeof headers === 'undefined') {\n      return;\n    }\n    if (typeof headers !== 'object' || headers === null) {\n      throw new Error('Object expected for `headers`');\n    }\n    this.headers = headers;\n  }\n\n  /**\n   * Add a header\n   */\n  addHeader(key, value) {\n    if (typeof key !== 'string') {\n      throw new Error('String expected for header key');\n    }\n    if (typeof value !== 'string') {\n      throw new Error('String expected for header value');\n    }\n    this.headers[key] = value;\n  }\n\n  /**\n   * Set custom args\n   */\n  setCustomArgs(customArgs) {\n    if (typeof customArgs === 'undefined') {\n      return;\n    }\n    if (typeof customArgs !== 'object' || customArgs === null) {\n      throw new Error('Object expected for `customArgs`');\n    }\n    this.customArgs = customArgs;\n  }\n\n  /**\n   * Add a custom arg\n   */\n  addCustomArg(key, value) {\n    if (typeof key !== 'string') {\n      throw new Error('String expected for custom arg key');\n    }\n    if (typeof value !== 'string') {\n      throw new Error('String expected for custom arg value');\n    }\n    this.customArgs[key] = value;\n  }\n\n  /**\n   * Set substitutions\n   */\n  setSubstitutions(substitutions) {\n    if (typeof substitutions === 'undefined') {\n      return;\n    }\n    if (typeof substitutions !== 'object') {\n      throw new Error('Object expected for `substitutions`');\n    }\n    this.substitutions = substitutions;\n  }\n\n  /**\n   * Add a substitution\n   */\n  addSubstitution(key, value) {\n    if (typeof key !== 'string') {\n      throw new Error('String expected for substitution key');\n    }\n    if (typeof value !== 'string' && typeof value !== 'number') {\n      throw new Error('String or Number expected for substitution value');\n    }\n    this.substitutions[key] = value;\n  }\n\n  /**\n   * Reverse merge substitutions, preserving existing ones\n   */\n  reverseMergeSubstitutions(substitutions) {\n    if (typeof substitutions === 'undefined' || substitutions === null) {\n      return;\n    }\n    if (typeof substitutions !== 'object') {\n      throw new Error(\n        'Object expected for `substitutions` in reverseMergeSubstitutions'\n      );\n    }\n    this.substitutions = Object.assign({}, substitutions, this.substitutions);\n  }\n\n  /**\n   * Set substitution wrappers\n   */\n  setSubstitutionWrappers(wrappers) {\n    if (typeof wrappers === 'undefined' || wrappers === null) {\n      return;\n    }\n\n    if (!Array.isArray(wrappers) || wrappers.length !== 2) {\n      throw new Error(\n        'Array expected with two elements for `substitutionWrappers`'\n      );\n    }\n    this.substitutionWrappers = wrappers;\n  }\n\n  /**\n   * Reverse merge dynamic template data, preserving existing ones\n   */\n  deepMergeDynamicTemplateData(dynamicTemplateData) {\n    if (typeof dynamicTemplateData === 'undefined' || dynamicTemplateData === null) {\n      return;\n    }\n    if (typeof dynamicTemplateData !== 'object') {\n      throw new Error(\n        'Object expected for `dynamicTemplateData` in deepMergeDynamicTemplateData'\n      );\n    }\n    this.dynamicTemplateData = deepMerge(dynamicTemplateData, this.dynamicTemplateData);\n  }\n\n  /**\n   * Set dynamic template data\n   */\n  setDynamicTemplateData(dynamicTemplateData) {\n    if (typeof dynamicTemplateData === 'undefined') {\n      return;\n    }\n    if (typeof dynamicTemplateData !== 'object') {\n      throw new Error('Object expected for `dynamicTemplateData`');\n    }\n    this.dynamicTemplateData = dynamicTemplateData;\n  }\n\n  /**\n   * To JSON\n   */\n  toJSON() {\n\n    //Get data from self\n    const {\n      to, from, cc, bcc, subject, headers, customArgs, sendAt,\n      substitutions, substitutionWrappers, dynamicTemplateData,\n    } = this;\n\n    //Initialize with mandatory values\n    const json = {to};\n\n    //Arrays\n    if (Array.isArray(cc) && cc.length > 0) {\n      json.cc = cc;\n    }\n    if (Array.isArray(bcc) && bcc.length > 0) {\n      json.bcc = bcc;\n    }\n\n    //Objects\n    if (Object.keys(headers).length > 0) {\n      json.headers = headers;\n    }\n    if (substitutions && Object.keys(substitutions).length > 0) {\n      const [left, right] = substitutionWrappers;\n      json.substitutions = wrapSubstitutions(substitutions, left, right);\n    }\n    if (Object.keys(customArgs).length > 0) {\n      json.customArgs = customArgs;\n    }\n\n    if (dynamicTemplateData && Object.keys(dynamicTemplateData).length > 0) {\n      json.dynamicTemplateData = dynamicTemplateData;\n    }\n\n    //Simple properties\n    if (typeof subject !== 'undefined') {\n      json.subject = subject;\n    }\n    if (typeof sendAt !== 'undefined') {\n      json.sendAt = sendAt;\n    }\n    if (typeof from !== 'undefined') {\n      json.from = from;\n    }\n\n    //Return as snake cased object\n    return toSnakeCase(json, ['substitutions', 'dynamicTemplateData', 'customArgs', 'headers']);\n  }\n}\n\n//Export class\nmodule.exports = Personalization;\n","'use strict';\n\n/**\n * Helper to convert an array of objects to JSON\n */\nmodule.exports = function arrayToJSON(arr) {\n  return arr.map(item => {\n    if (typeof item === 'object' && item !== null && typeof item.toJSON === 'function') {\n      return item.toJSON();\n    }\n    return item;\n  });\n};\n","const DYNAMIC_TEMPLATE_CHAR_WARNING = `\nContent with characters ', \" or & may need to be escaped with three brackets\n{{{ content }}}\nSee https://sendgrid.com/docs/for-developers/sending-email/using-handlebars/ for more information.`;\n\nmodule.exports = {\n  DYNAMIC_TEMPLATE_CHAR_WARNING,\n};\n","'use strict';\n\nconst validate = (parent, parentName, childName, childType) => {\n  if (typeof parent === 'undefined' || typeof parent[childName] === 'undefined') {\n    return;\n  }\n  if (typeof parent[childName] !== childType) {\n    throw new Error(`${childType} expected for \\`${parentName}.${childName}\\``)\n  }\n};\n\nmodule.exports = {\n  validateMailSettings(settings) {\n    if (typeof settings !== 'object') {\n      throw new Error('Object expected for `mailSettings`');\n    }\n    const {\n      bcc,\n      bypassListManagement,\n      bypassSpamManagement,\n      bypassBounceManagement,\n      bypassUnsubscribeManagement,\n      footer,\n      sandboxMode,\n      spamCheck,\n    } = settings;\n    validate(bcc, 'bcc', 'enable', 'boolean');\n    validate(bcc, 'bcc', 'email', 'string');\n    validate(bypassListManagement, 'bypassListManagement', 'enable', 'boolean');\n    validate(bypassSpamManagement, 'bypassSpamManagement', 'enable', 'boolean');\n    validate(bypassBounceManagement, 'bypassBounceManagement', 'enable', 'boolean');\n    validate(bypassUnsubscribeManagement, 'bypassUnsubscribeManagement', 'enable', 'boolean');\n    validate(footer, 'footer', 'enable', 'boolean');\n    validate(footer, 'footer', 'text', 'string');\n    validate(footer, 'footer', 'html', 'string');\n    validate(sandboxMode, 'sandboxMode', 'enable', 'boolean');\n    validate(spamCheck, 'spamCheck', 'enable', 'boolean');\n    validate(spamCheck, 'spamCheck', 'threshold', 'number');\n    validate(spamCheck, 'spamCheck', 'postToUrl', 'string');\n  },\n\n  validateTrackingSettings(settings) {\n    if (typeof settings !== 'object') {\n      throw new Error('Object expected for `trackingSettings`');\n    }\n    const {\n      clickTracking,\n      openTracking,\n      subscriptionTracking,\n      ganalytics,\n    } = settings;\n    validate(clickTracking, 'clickTracking', 'enable', 'boolean');\n    validate(clickTracking, 'clickTracking', 'enableText', 'boolean');\n    validate(openTracking, 'openTracking', 'enable', 'boolean');\n    validate(openTracking, 'openTracking', 'substitutionTag', 'string');\n    validate(subscriptionTracking, 'subscriptionTracking', 'enable', 'boolean');\n    validate(subscriptionTracking, 'subscriptionTracking', 'text', 'string');\n    validate(subscriptionTracking, 'subscriptionTracking', 'html', 'string');\n    validate(subscriptionTracking, 'subscriptionTracking', 'substitutionTag', 'string');\n    validate(ganalytics, 'ganalytics', 'enable', 'boolean');\n    validate(ganalytics, 'ganalytics', 'utm_source', 'string');\n    validate(ganalytics, 'ganalytics', 'utm_medium', 'string');\n    validate(ganalytics, 'ganalytics', 'utm_term', 'string');\n    validate(ganalytics, 'ganalytics', 'utm_content', 'string');\n    validate(ganalytics, 'ganalytics', 'utm_campaign', 'string');\n  },\n};\n","'use strict';\n\n/**\n * Dependencies\n */\nconst EmailAddress = require('./email-address');\nconst Personalization = require('./personalization');\nconst toCamelCase = require('../helpers/to-camel-case');\nconst toSnakeCase = require('../helpers/to-snake-case');\nconst deepClone = require('../helpers/deep-clone');\nconst arrayToJSON = require('../helpers/array-to-json');\nconst { DYNAMIC_TEMPLATE_CHAR_WARNING } = require('../constants');\nconst {validateMailSettings, validateTrackingSettings} = require('../helpers/validate-settings');\n\n/**\n * Mail class\n */\nclass Mail {\n\n  /**\n   * Constructor\n   */\n  constructor(data) {\n\n    //Initialize array and object properties\n    this.isDynamic = false;\n    this.hideWarnings = false;\n    this.personalizations = [];\n    this.attachments = [];\n    this.content = [];\n    this.categories = [];\n    this.headers = {};\n    this.sections = {};\n    this.customArgs = {};\n    this.trackingSettings = {};\n    this.mailSettings = {};\n    this.asm = {};\n\n    //Helper properties\n    this.substitutions = null;\n    this.substitutionWrappers = null;\n    this.dynamicTemplateData = null;\n\n    //Process data if given\n    if (data) {\n      this.fromData(data);\n    }\n  }\n\n  /**\n   * Build from data\n   */\n  fromData(data) {\n\n    //Expecting object\n    if (typeof data !== 'object') {\n      throw new Error('Expecting object for Mail data');\n    }\n\n    //Convert to camel case to make it workable, making a copy to prevent\n    //changes to the original objects\n    data = deepClone(data);\n    data = toCamelCase(data, ['substitutions', 'dynamicTemplateData', 'customArgs', 'headers', 'sections']);\n\n    //Extract properties from data\n    const {\n      to, from, replyTo, cc, bcc, sendAt, subject, text, html, content,\n      templateId, personalizations, attachments, ipPoolName, batchId,\n      sections, headers, categories, category, customArgs, asm, mailSettings,\n      trackingSettings, substitutions, substitutionWrappers, dynamicTemplateData, isMultiple,\n      hideWarnings, replyToList,\n    } = data;\n\n    //Set data\n    this.setFrom(from);\n    this.setReplyTo(replyTo);\n    this.setSubject(subject);\n    this.setSendAt(sendAt);\n    this.setTemplateId(templateId);\n    this.setBatchId(batchId);\n    this.setIpPoolName(ipPoolName);\n    this.setAttachments(attachments);\n    this.setContent(content);\n    this.setSections(sections);\n    this.setHeaders(headers);\n    this.setCategories(category);\n    this.setCategories(categories);\n    this.setCustomArgs(customArgs);\n    this.setAsm(asm);\n    this.setMailSettings(mailSettings);\n    this.setTrackingSettings(trackingSettings);\n    this.setHideWarnings(hideWarnings);\n    this.setReplyToList(replyToList);\n\n    if (this.isDynamic) {\n      this.setDynamicTemplateData(dynamicTemplateData);\n    } else {\n      this.setSubstitutions(substitutions);\n      this.setSubstitutionWrappers(substitutionWrappers);\n    }\n\n    //Add contents from text/html properties\n    this.addTextContent(text);\n    this.addHtmlContent(html);\n\n    //Using \"to\" property for personalizations\n    if (personalizations) {\n      this.setPersonalizations(personalizations);\n    } else if (isMultiple && Array.isArray(to)) {\n      //Multiple individual emails\n      to.forEach(to => this.addTo(to, cc, bcc));\n    } else {\n      //Single email (possibly with multiple recipients in the to field)\n      this.addTo(to, cc, bcc);\n    }\n  }\n\n  /**\n   * Set from email\n   */\n  setFrom(from) {\n    if (this._checkProperty('from', from, [this._checkUndefined])) {\n      if (typeof from !== 'string' && typeof from.email !== 'string') {\n        throw new Error('String or address object expected for `from`');\n      }\n      this.from = EmailAddress.create(from);\n    }\n  }\n\n  /**\n   * Set reply to\n   */\n  setReplyTo(replyTo) {\n    if (this._checkProperty('replyTo', replyTo, [this._checkUndefined])) {\n      if (typeof replyTo !== 'string' && typeof replyTo.email !== 'string') {\n        throw new Error('String or address object expected for `replyTo`');\n      }\n      this.replyTo = EmailAddress.create(replyTo);\n    }\n  }\n\n  /**\n   * Set subject\n   */\n  setSubject(subject) {\n    this._setProperty('subject', subject, 'string');\n  }\n\n  /**\n   * Set send at\n   */\n  setSendAt(sendAt) {\n    if (this._checkProperty('sendAt', sendAt, [this._checkUndefined, this._createCheckThatThrows(Number.isInteger, 'Integer expected for `sendAt`')])) {\n      this.sendAt = sendAt;\n    }\n  }\n\n  /**\n   * Set template ID, also checks if the template is dynamic or legacy\n   */\n  setTemplateId(templateId) {\n    if (this._setProperty('templateId', templateId, 'string')) {\n      if (templateId.indexOf('d-') === 0) {\n        this.isDynamic = true;\n      }\n    }\n  }\n\n  /**\n   * Set batch ID\n   */\n  setBatchId(batchId) {\n    this._setProperty('batchId', batchId, 'string');\n  }\n\n  /**\n   * Set IP pool name\n   */\n  setIpPoolName(ipPoolName) {\n    this._setProperty('ipPoolName', ipPoolName, 'string');\n  }\n\n  /**\n   * Set ASM\n   */\n  setAsm(asm) {\n    if (this._checkProperty('asm', asm, [this._checkUndefined, this._createTypeCheck('object')])) {\n      if (typeof asm.groupId !== 'number') {\n        throw new Error('Expected `asm` to include an integer in its `groupId` field');\n      }\n      if (asm.groupsToDisplay &&\n        (!Array.isArray(asm.groupsToDisplay) || !asm.groupsToDisplay.every(group => typeof group === 'number'))) {\n        throw new Error('Array of integers expected for `asm.groupsToDisplay`');\n      }\n      this.asm = asm;\n    }\n  }\n\n  /**\n   * Set personalizations\n   */\n  setPersonalizations(personalizations) {\n    if (!this._doArrayCheck('personalizations', personalizations)) {\n      return;\n    }\n\n    if (!personalizations.every(personalization => typeof personalization === 'object')) {\n      throw new Error('Array of objects expected for `personalizations`');\n    }\n\n    //Clear and use add helper to add one by one\n    this.personalizations = [];\n    personalizations\n      .forEach(personalization => this.addPersonalization(personalization));\n  }\n\n  /**\n   * Add personalization\n   */\n  addPersonalization(personalization) {\n    //We should either send substitutions or dynamicTemplateData\n    //depending on the templateId\n    if (this.isDynamic && personalization.substitutions) {\n      delete personalization.substitutions;\n    } else if (!this.isDynamic && personalization.dynamicTemplateData) {\n      delete personalization.dynamicTemplateData;\n    }\n\n    //Convert to class if needed\n    if (!(personalization instanceof Personalization)) {\n      personalization = new Personalization(personalization);\n    }\n\n    //If this is dynamic, set dynamicTemplateData, or set substitutions\n    if (this.isDynamic) {\n      this.applyDynamicTemplateData(personalization);\n    } else {\n      this.applySubstitutions(personalization);\n    }\n\n    //Push personalization to array\n    this.personalizations.push(personalization);\n  }\n\n  /**\n   * Convenience method for quickly creating personalizations\n   */\n  addTo(to, cc, bcc) {\n    if (\n      typeof to === 'undefined' &&\n      typeof cc === 'undefined' &&\n      typeof bcc === 'undefined'\n    ) {\n      throw new Error('Provide at least one of to, cc or bcc');\n    }\n    this.addPersonalization(new Personalization({to, cc, bcc}));\n  }\n\n  /**\n   * Set substitutions\n   */\n  setSubstitutions(substitutions) {\n    this._setProperty('substitutions', substitutions, 'object');\n  }\n\n  /**\n   * Set substitution wrappers\n   */\n  setSubstitutionWrappers(substitutionWrappers) {\n    let lengthCheck = (propertyName, value) => {\n      if (!Array.isArray(value) || value.length !== 2) {\n        throw new Error('Array expected with two elements for `' + propertyName + '`');\n      }\n    };\n\n    if (this._checkProperty('substitutionWrappers', substitutionWrappers, [this._checkUndefined, lengthCheck])) {\n      this.substitutionWrappers = substitutionWrappers;\n    }\n  }\n\n  /**\n   * Helper which applies globally set substitutions to personalizations\n   */\n  applySubstitutions(personalization) {\n    if (personalization instanceof Personalization) {\n      personalization.reverseMergeSubstitutions(this.substitutions);\n      personalization.setSubstitutionWrappers(this.substitutionWrappers);\n    }\n  }\n\n  /**\n   * Helper which applies globally set dynamic_template_data to personalizations\n   */\n  applyDynamicTemplateData(personalization) {\n    if (personalization instanceof Personalization) {\n      personalization.deepMergeDynamicTemplateData(this.dynamicTemplateData);\n    }\n  }\n\n  /**\n   * Set dynamicTemplateData\n   */\n  setDynamicTemplateData(dynamicTemplateData) {\n    if (typeof dynamicTemplateData === 'undefined') {\n      return;\n    }\n    if (typeof dynamicTemplateData !== 'object') {\n      throw new Error('Object expected for `dynamicTemplateData`');\n    }\n\n    // Check dynamic template for non-escaped characters and warn if found\n    if (!this.hideWarnings) {\n      Object.values(dynamicTemplateData).forEach(value => {\n        if (/['\"&]/.test(value)) {\n          console.warn(DYNAMIC_TEMPLATE_CHAR_WARNING);\n        }\n      });\n    }\n\n    this.dynamicTemplateData = dynamicTemplateData;\n  }\n\n  /**\n   * Set content\n   */\n  setContent(content) {\n    if (this._doArrayCheck('content', content)) {\n      if (!content.every(contentField => typeof contentField === 'object')) {\n        throw new Error('Expected each entry in `content` to be an object');\n      }\n      if (!content.every(contentField => typeof contentField.type === 'string')) {\n        throw new Error('Expected each `content` entry to contain a `type` string');\n      }\n      if (!content.every(contentField => typeof contentField.value === 'string')) {\n        throw new Error('Expected each `content` entry to contain a `value` string');\n      }\n      this.content = content;\n    }\n  }\n\n  /**\n   * Add content\n   */\n  addContent(content) {\n    if (this._checkProperty('content', content, [this._createTypeCheck('object')])) {\n      this.content.push(content);\n    }\n  }\n\n  /**\n   * Add text content\n   */\n  addTextContent(text) {\n    if (this._checkProperty('text', text, [this._checkUndefined, this._createTypeCheck('string')])) {\n      this.addContent({\n        value: text,\n        type: 'text/plain',\n      });\n    }\n  }\n\n  /**\n   * Add HTML content\n   */\n  addHtmlContent(html) {\n    if (this._checkProperty('html', html, [this._checkUndefined, this._createTypeCheck('string')])) {\n      this.addContent({\n        value: html,\n        type: 'text/html',\n      });\n    }\n  }\n\n  /**\n   * Set attachments\n   */\n  setAttachments(attachments) {\n    if (this._doArrayCheck('attachments', attachments)) {\n      if (!attachments.every(attachment => typeof attachment.content === 'string')) {\n        throw new Error('Expected each attachment to contain a `content` string');\n      }\n      if (!attachments.every(attachment => typeof attachment.filename === 'string')) {\n        throw new Error('Expected each attachment to contain a `filename` string');\n      }\n      if (!attachments.every(attachment => !attachment.type || typeof attachment.type === 'string')) {\n        throw new Error('Expected the attachment\\'s `type` field to be a string');\n      }\n      if (!attachments.every(attachment => !attachment.disposition || typeof attachment.disposition === 'string')) {\n        throw new Error('Expected the attachment\\'s `disposition` field to be a string');\n      }\n      this.attachments = attachments;\n    }\n  }\n\n  /**\n   * Add attachment\n   */\n  addAttachment(attachment) {\n    if (this._checkProperty('attachment', attachment, [this._checkUndefined, this._createTypeCheck('object')])) {\n      this.attachments.push(attachment);\n    }\n  }\n\n  /**\n   * Set categories\n   */\n  setCategories(categories) {\n    let allElementsAreStrings = (propertyName, value) => {\n      if (!Array.isArray(value) || !value.every(item => typeof item === 'string')) {\n        throw new Error('Array of strings expected for `' + propertyName + '`');\n      }\n    };\n\n    if (typeof categories === 'string') {\n      categories = [categories];\n    }\n\n    if (this._checkProperty('categories', categories, [this._checkUndefined, allElementsAreStrings])) {\n      this.categories = categories;\n    }\n  }\n\n  /**\n   * Add category\n   */\n  addCategory(category) {\n    if (this._checkProperty('category', category, [this._createTypeCheck('string')])) {\n      this.categories.push(category);\n    }\n  }\n\n  /**\n   * Set headers\n   */\n  setHeaders(headers) {\n    this._setProperty('headers', headers, 'object');\n  }\n\n  /**\n   * Add a header\n   */\n  addHeader(key, value) {\n    if (this._checkProperty('key', key, [this._createTypeCheck('string')])\n      && this._checkProperty('value', value, [this._createTypeCheck('string')])) {\n      this.headers[key] = value;\n    }\n  }\n\n  /**\n   * Set sections\n   */\n  setSections(sections) {\n    this._setProperty('sections', sections, 'object');\n  }\n\n  /**\n   * Set custom args\n   */\n  setCustomArgs(customArgs) {\n    this._setProperty('customArgs', customArgs, 'object');\n  }\n\n  /**\n   * Set tracking settings\n   */\n  setTrackingSettings(settings) {\n    if (typeof settings === 'undefined') {\n      return;\n    }\n    validateTrackingSettings(settings);\n    this.trackingSettings = settings;\n  }\n\n  /**\n   * Set mail settings\n   */\n  setMailSettings(settings) {\n    if (typeof settings === 'undefined') {\n      return;\n    }\n    validateMailSettings(settings);\n    this.mailSettings = settings;\n  }\n\n  /**\n   * Set hide warnings\n   */\n  setHideWarnings(hide) {\n    if (typeof hide === 'undefined') {\n      return;\n    }\n    if (typeof hide !== 'boolean') {\n      throw new Error('Boolean expected for `hideWarnings`');\n    }\n    this.hideWarnings = hide;\n  }\n\n  /**\n   * To JSON\n   */\n  toJSON() {\n\n    //Extract properties from self\n    const {\n      from, replyTo, sendAt, subject, content, templateId,\n      personalizations, attachments, ipPoolName, batchId, asm,\n      sections, headers, categories, customArgs, mailSettings,\n      trackingSettings, replyToList,\n    } = this;\n\n    //Initialize with mandatory values\n    const json = {\n      from, subject,\n      personalizations: arrayToJSON(personalizations),\n    };\n\n    //Array properties\n    if (Array.isArray(attachments) && attachments.length > 0) {\n      json.attachments = arrayToJSON(attachments);\n    }\n    if (Array.isArray(categories) && categories.length > 0) {\n      json.categories = categories.filter(cat => cat !== '');\n    }\n    if (Array.isArray(content) && content.length > 0) {\n      json.content = arrayToJSON(content);\n    }\n\n    //Object properties\n    if (Object.keys(headers).length > 0) {\n      json.headers = headers;\n    }\n    if (Object.keys(mailSettings).length > 0) {\n      json.mailSettings = mailSettings;\n    }\n    if (Object.keys(trackingSettings).length > 0) {\n      json.trackingSettings = trackingSettings;\n    }\n    if (Object.keys(customArgs).length > 0) {\n      json.customArgs = customArgs;\n    }\n    if (Object.keys(sections).length > 0) {\n      json.sections = sections;\n    }\n    if (Object.keys(asm).length > 0) {\n      json.asm = asm;\n    }\n\n    //Simple properties\n    if (typeof replyTo !== 'undefined') {\n      json.replyTo = replyTo;\n    }\n    if (typeof sendAt !== 'undefined') {\n      json.sendAt = sendAt;\n    }\n    if (typeof batchId !== 'undefined') {\n      json.batchId = batchId;\n    }\n    if (typeof templateId !== 'undefined') {\n      json.templateId = templateId;\n    }\n    if (typeof ipPoolName !== 'undefined') {\n      json.ipPoolName = ipPoolName;\n    }\n    if(typeof replyToList !== 'undefined') {\n      json.replyToList = replyToList;\n    }\n\n    //Return as snake cased object\n    return toSnakeCase(json, ['substitutions', 'dynamicTemplateData', 'customArgs', 'headers', 'sections']);\n  }\n\n  /**************************************************************************\n   * Static helpers\n   ***/\n\n  /**\n   * Create a Mail instance from given data\n   */\n  static create(data) {\n\n    //Array?\n    if (Array.isArray(data)) {\n      return data\n        .filter(item => !!item)\n        .map(item => this.create(item));\n    }\n\n    //Already instance of Mail class?\n    if (data instanceof Mail) {\n      return data;\n    }\n\n    //Create instance\n    return new Mail(data);\n  }\n\n  /**************************************************************************\n   * helpers for property-setting checks\n   ***/\n\n  /**\n   * Perform a set of checks on the new property value. Returns true if all\n   * checks complete successfully without throwing errors or returning true.\n   */\n  _checkProperty(propertyName, value, checks) {\n    return !checks.some((e) => e(propertyName, value));\n  }\n\n  /**\n   * Set a property with normal undefined and type-checks\n   */\n  _setProperty(propertyName, value, propertyType) {\n    let propertyChecksPassed = this._checkProperty(\n      propertyName,\n      value,\n      [this._checkUndefined, this._createTypeCheck(propertyType)]);\n\n    if (propertyChecksPassed) {\n      this[propertyName] = value;\n    }\n\n    return propertyChecksPassed;\n  }\n\n  /**\n   * Fail if the value is undefined.\n   */\n  _checkUndefined(propertyName, value) {\n    return typeof value === 'undefined';\n  }\n\n  /**\n   * Create and return a function that checks for a given type\n   */\n  _createTypeCheck(propertyType) {\n    return (propertyName, value) => {\n      if (typeof value !== propertyType) {\n        throw new Error(propertyType + ' expected for `' + propertyName + '`');\n      }\n    };\n  }\n\n  /**\n   * Create a check out of a callback. If the callback\n   * returns false, the check will throw an error.\n   */\n  _createCheckThatThrows(check, errorString) {\n    return (propertyName, value) => {\n      if (!check(value)) {\n        throw new Error(errorString);\n      }\n    };\n  }\n\n  /**\n   * Set an array property after checking that the new value is an\n   * array.\n   */\n  _setArrayProperty(propertyName, value) {\n    if (this._doArrayCheck(propertyName, value)) {\n      this[propertyName] = value;\n    }\n  }\n\n  /**\n   * Check that a value isn't undefined and is an array.\n   */\n  _doArrayCheck(propertyName, value) {\n    return this._checkProperty(\n      propertyName,\n      value,\n      [this._checkUndefined, this._createCheckThatThrows(Array.isArray, 'Array expected for`' + propertyName + '`')]);\n  }\n\n  /**\n   * Set the replyToList from email body\n   */\n   setReplyToList(replyToList) {\n    if (this._doArrayCheck('replyToList', replyToList) && replyToList.length) {\n      if (!replyToList.every(replyTo => replyTo && typeof replyTo.email === 'string')) {\n        throw new Error('Expected each replyTo to contain an `email` string');\n      }\n      this.replyToList = replyToList;\n    }\n  }\n}\n\n//Export class\nmodule.exports = Mail;\n","'use strict';\n\nclass Response {\n  constructor(statusCode, body, headers) {\n    this.statusCode = statusCode;\n    this.body = body;\n    this.headers = headers;\n  }\n\n  toString() {\n    return 'HTTP ' + this.statusCode + ' ' + this.body;\n  }\n}\n\nmodule.exports = Response;\n","'use strict';\n\n/**\n * Response error class\n */\nclass ResponseError extends Error {\n\n  /**\n   * Constructor\n   */\n  constructor(response) {\n\n    //Super\n    super();\n\n    //Extract data from response\n    const { headers, status, statusText, data } = response;\n\n    //Set data\n    this.code = status;\n    this.message = statusText;\n    this.response = { headers, body: data };\n\n    //Capture stack trace\n    if (!this.stack) {\n      Error.captureStackTrace(this, this.constructor);\n    }\n\n    //Clean up stack trace\n    const regex = new RegExp(process.cwd() + '/', 'gi');\n    this.stack = this.stack.replace(regex, '');\n  }\n\n  /**\n   * Convert to string\n   */\n  toString() {\n    const { body } = this.response;\n    let err = `${this.message} (${this.code})`;\n    if (body && Array.isArray(body.errors)) {\n      body.errors.forEach(error => {\n        const message = error.message;\n        const field = error.field;\n        const help = error.help;\n        err += `\\n  ${message}\\n    ${field}\\n    ${help}`;\n      });\n    }\n    return err;\n  }\n\n  /**\n   * Convert to simple object for JSON responses\n   */\n  toJSON() {\n    const { message, code, response } = this;\n    return { message, code, response };\n  }\n}\n\n//Export\nmodule.exports = ResponseError;\n","'use strict';\n\n/**\n * Dependencies\n */\nconst toCamelCase = require('../helpers/to-camel-case');\nconst deepClone = require('../helpers/deep-clone');\n\n/**\n * Options\n */\nconst AggregatedByOptions = ['day', 'week', 'month'];\nconst CountryOptions = ['us', 'ca'];\nconst SortByDirection = ['desc', 'asc'];\n\n/**\n * Statistics class\n */\nclass Statistics {\n  constructor(data) {\n    this.startDate = null;\n    this.endDate = null;\n    this.aggregatedBy = null;\n\n    if (data) {\n      this.fromData(data);\n    }\n  }\n\n  /**\n   * Build from data\n   */\n  fromData(data) {\n\n    //Expecting object\n    if (typeof data !== 'object') {\n      throw new Error('Expecting object for Statistics data');\n    }\n\n    //Convert to camel case to make it workable, making a copy to prevent\n    //changes to the original objects\n    data = deepClone(data);\n    data = toCamelCase(data, ['substitutions', 'customArgs']);\n\n    const { startDate,\n      endDate,\n      aggregatedBy,\n    } = data;\n\n    this.setStartDate(startDate);\n    this.setEndDate(endDate);\n    this.setAggregatedBy(aggregatedBy);\n  }\n\n  /**\n   * Set startDate\n   */\n  setStartDate(startDate) {\n    if (typeof startDate === 'undefined') {\n      throw new Error('Date expected for `startDate`');\n    }\n\n    if ((new Date(startDate) === 'Invalid Date') ||\n        isNaN(new Date(startDate))) {\n      throw new Error('Date expected for `startDate`');\n    }\n\n    console.log(startDate);\n\n    this.startDate = new Date(startDate).toISOString().slice(0, 10);\n  }\n\n  /**\n   * Set endDate\n   */\n  setEndDate(endDate) {\n    if (typeof endDate === 'undefined') {\n      this.endDate = new Date().toISOString().slice(0, 10);\n      return;\n    }\n\n    if (new Date(endDate) === 'Invalid Date' || isNaN(new Date(endDate))) {\n      throw new Error('Date expected for `endDate`');\n    }\n\n    this.endDate = new Date(endDate).toISOString().slice(0, 10);\n  }\n\n  /**\n   * Set aggregatedBy\n   */\n  setAggregatedBy(aggregatedBy) {\n    if (typeof aggregatedBy === 'undefined') {\n      return;\n    }\n\n    if (typeof aggregatedBy === 'string' &&\n        AggregatedByOptions.includes(aggregatedBy.toLowerCase())) {\n      this.aggregatedBy = aggregatedBy;\n    } else {\n      throw new Error('Incorrect value for `aggregatedBy`');\n    }\n  }\n\n  /**\n   * Get Global\n   */\n  getGlobal() {\n    const { startDate, endDate, aggregatedBy } = this;\n\n    return { startDate, endDate, aggregatedBy };\n  }\n\n  /**\n   * Get Advanced\n   */\n  getAdvanced(country) {\n    const json = this.getGlobal();\n\n    if (typeof country === 'undefined') {\n      return json;\n    }\n\n    if (typeof country === 'string' &&\n        CountryOptions.includes(country.toLowerCase())) {\n      json.country = country;\n    }\n\n    return json;\n  }\n\n  /**\n   * Get Advanced Mailbox Providers\n   */\n  getAdvancedMailboxProviders(mailBoxProviders) {\n    const json = this.getGlobal();\n\n    if (typeof mailBoxProviders === 'undefined') {\n      return json;\n    }\n\n    if (Array.isArray(mailBoxProviders) &&\n        mailBoxProviders.some(x => typeof x !== 'string')) {\n      throw new Error('Array of strings expected for `mailboxProviders`');\n    }\n\n    json.mailBoxProviders = mailBoxProviders;\n\n    return json;\n  }\n\n  /**\n   * Get Advanced Browsers\n   */\n  getAdvancedBrowsers(browsers) {\n    const json = this.getGlobal();\n\n    if (typeof browsers === 'undefined') {\n      return json;\n    }\n\n    if (Array.isArray(browsers) && browsers.some(x => typeof x !== 'string')) {\n      throw new Error('Array of strings expected for `browsers`');\n    }\n\n    json.browsers = browsers;\n\n    return json;\n  }\n\n  /**\n   * Get Categories\n   */\n  getCategories(categories) {\n    if (typeof categories === 'undefined') {\n      throw new Error('Array of strings expected for `categories`');\n    }\n\n    if (!this._isValidArrayOfStrings(categories)) {\n      throw new Error('Array of strings expected for `categories`');\n    }\n\n    const json = this.getGlobal();\n    json.categories = categories;\n\n    return json;\n  }\n\n  /**\n   * Get Subuser\n   */\n  getSubuser(subusers) {\n    if (typeof subusers === 'undefined') {\n      throw new Error('Array of strings expected for `subusers`');\n    }\n\n    if (!this._isValidArrayOfStrings(subusers)) {\n      throw new Error('Array of strings expected for `subusers`');\n    }\n\n    const json = this.getGlobal();\n    json.subusers = subusers;\n\n    return json;\n  }\n\n  /**\n   * Get Subuser Sum\n   */\n  getSubuserSum(sortByMetric = 'delivered',\n    sortByDirection = SortByDirection[0], limit = 5, offset = 0) {\n    if (typeof sortByMetric !== 'string') {\n      throw new Error('string expected for `sortByMetric`');\n    }\n\n    if (!SortByDirection.includes(sortByDirection.toLowerCase())) {\n      throw new Error('desc or asc expected for `sortByDirection`');\n    }\n\n    if (typeof limit !== 'number') {\n      throw new Error('number expected for `limit`');\n    }\n\n    if (typeof offset !== 'number') {\n      throw new Error('number expected for `offset`');\n    }\n\n    const json = this.getGlobal();\n\n    json.sortByMetric = sortByMetric;\n    json.sortByDirection = sortByDirection;\n    json.limit = limit;\n    json.offset = offset;\n\n    return json;\n  }\n\n  /**\n   * Get Subuser Monthly\n   */\n  getSubuserMonthly(sortByMetric = 'delivered',\n    sortByDirection = SortByDirection[0], limit = 5, offset = 0) {\n    if (typeof sortByMetric !== 'string') {\n      throw new Error('string expected for `sortByMetric`');\n    }\n\n    if (!SortByDirection.includes(sortByDirection.toLowerCase())) {\n      throw new Error('desc or asc expected for `sortByDirection`');\n    }\n\n    if (typeof limit !== 'number') {\n      throw new Error('number expected for `limit`');\n    }\n\n    if (typeof offset !== 'number') {\n      throw new Error('number expected for `offset`');\n    }\n\n    const json = this.getGlobal();\n\n    json.sortByMetric = sortByMetric;\n    json.sortByDirection = sortByDirection;\n    json.limit = limit;\n    json.offset = offset;\n\n    return json;\n  }\n\n  _isValidArrayOfStrings(arr) {\n    if (!Array.isArray(arr)) {\n      return false;\n    }\n\n    if (arr.length < 1 || arr.some(x => typeof x !== 'string')) {\n      return false;\n    }\n\n    return true;\n  }\n}\n\n//Export class\nmodule.exports = Statistics;\n","'use strict';\n\n/**\n * Expose classes\n */\nconst Attachment = require('./attachment');\nconst EmailAddress = require('./email-address');\nconst Mail = require('./mail');\nconst Personalization = require('./personalization');\nconst Response = require('./response');\nconst ResponseError = require('./response-error');\nconst Statistics = require('./statistics');\n\n/**\n * Export\n */\nmodule.exports = {\n  Attachment,\n  EmailAddress,\n  Mail,\n  Personalization,\n  Response,\n  ResponseError,\n  Statistics,\n};\n","'use strict';\n\n/**\n * Merge data helper\n */\nmodule.exports = function mergeData(base, data) {\n\n  //Validate data\n  if (typeof base !== 'object' || base === null) {\n    throw new Error('Not an object provided for base');\n  }\n  if (typeof data !== 'object' || data === null) {\n    throw new Error('Not an object provided for data');\n  }\n\n  //Copy base\n  const merged = Object.assign({}, base);\n\n  //Add data\n  for (const key in data) {\n    //istanbul ignore else\n    if (data.hasOwnProperty(key)) {\n      if (data[key] && Array.isArray(data[key])) {\n        merged[key] = data[key];\n      } else if (data[key] && typeof data[key] === 'object') {\n        merged[key] = Object.assign({}, data[key]);\n      } else if (data[key]) {\n        merged[key] = data[key];\n      }\n    }\n  }\n\n  //Return\n  return merged;\n};\n","'use strict';\n\n/**\n * Expose helpers\n */\nconst arrayToJSON = require('./array-to-json');\nconst convertKeys = require('./convert-keys');\nconst deepClone = require('./deep-clone');\nconst mergeData = require('./merge-data');\nconst splitNameEmail = require('./split-name-email');\nconst toCamelCase = require('./to-camel-case');\nconst toSnakeCase = require('./to-snake-case');\nconst wrapSubstitutions = require('./wrap-substitutions');\n\n/**\n * Export\n */\nmodule.exports = {\n  arrayToJSON,\n  convertKeys,\n  deepClone,\n  mergeData,\n  splitNameEmail,\n  toCamelCase,\n  toSnakeCase,\n  wrapSubstitutions,\n};\n","'use strict';\n\n/**\n * Load support assets\n */\nconst classes = require('./classes');\nconst helpers = require('./helpers');\n\n/**\n * Export\n */\nmodule.exports = {classes, helpers};\n","'use strict';\nconst axios = require('axios');\nconst pkg = require('../../package.json');\nconst {\n  helpers: {\n    mergeData,\n  },\n  classes: {\n    Response,\n    ResponseError,\n  },\n} = require('@sendgrid/helpers');\n\nconst API_KEY_PREFIX = 'SG.';\nconst SENDGRID_BASE_URL = 'https://api.sendgrid.com/';\nconst TWILIO_BASE_URL = 'https://email.twilio.com/';\nconst SENDGRID_REGION = 'global';\n// Initialize the allowed regions and their corresponding hosts\nconst REGION_HOST_MAP = {\n  eu: 'https://api.eu.sendgrid.com/',\n  global: 'https://api.sendgrid.com/',\n};\nclass Client {\n  constructor() {\n    this.auth = '';\n    this.impersonateSubuser = '';\n    this.sendgrid_region = SENDGRID_REGION;\n\n    this.defaultHeaders = {\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n      'User-Agent': 'sendgrid/' + pkg.version + ';nodejs',\n    };\n\n    this.defaultRequest = {\n      baseUrl: SENDGRID_BASE_URL,\n      url: '',\n      method: 'GET',\n      headers: {},\n      maxContentLength: Infinity, // Don't limit the content length.\n      maxBodyLength: Infinity,\n    };\n  }\n\n  setApiKey(apiKey) {\n    this.auth = 'Bearer ' + apiKey;\n    this.setDefaultRequest('baseUrl', REGION_HOST_MAP[this.sendgrid_region]);\n\n    if (!this.isValidApiKey(apiKey)) {\n      console.warn(`API key does not start with \"${API_KEY_PREFIX}\".`);\n    }\n  }\n\n  setTwilioEmailAuth(username, password) {\n    const b64Auth = Buffer.from(username + ':' + password).toString('base64');\n    this.auth = 'Basic ' + b64Auth;\n    this.setDefaultRequest('baseUrl', TWILIO_BASE_URL);\n\n    if (!this.isValidTwilioAuth(username, password)) {\n      console.warn('Twilio Email credentials must be non-empty strings.');\n    }\n  }\n\n  isValidApiKey(apiKey) {\n    return this.isString(apiKey) && apiKey.trim().startsWith(API_KEY_PREFIX);\n  }\n\n  isValidTwilioAuth(username, password) {\n    return this.isString(username) && username\n      && this.isString(password) && password;\n  }\n\n  isString(value) {\n    return typeof value === 'string' || value instanceof String;\n  }\n\n  setImpersonateSubuser(subuser) {\n    this.impersonateSubuser = subuser;\n  }\n\n  setDefaultHeader(key, value) {\n    if (key !== null && typeof key === 'object') {\n      // key is an object\n      Object.assign(this.defaultHeaders, key);\n      return this;\n    }\n\n    this.defaultHeaders[key] = value;\n    return this;\n  }\n\n  setDefaultRequest(key, value) {\n    if (key !== null && typeof key === 'object') {\n      // key is an object\n      Object.assign(this.defaultRequest, key);\n      return this;\n    }\n\n    this.defaultRequest[key] = value;\n    return this;\n  }\n\n  /**\n   * Global is the default residency (or region)\n   * Global region means the message will be sent through https://api.sendgrid.com\n   * EU region means the message will be sent through https://api.eu.sendgrid.com\n   **/\n  setDataResidency(region) {\n    if (!REGION_HOST_MAP.hasOwnProperty(region)) {\n      console.warn('Region can only be \"global\" or \"eu\".');\n    } else {\n      this.sendgrid_region = region;\n      this.setDefaultRequest('baseUrl', REGION_HOST_MAP[region]);\n    }\n    return this;\n  }\n\n  createHeaders(data) {\n    // Merge data with default headers.\n    const headers = mergeData(this.defaultHeaders, data);\n\n    // Add auth, but don't overwrite if header already set.\n    if (typeof headers.Authorization === 'undefined' && this.auth) {\n      headers.Authorization = this.auth;\n    }\n\n    if (this.impersonateSubuser) {\n      headers['On-Behalf-Of'] = this.impersonateSubuser;\n    }\n\n    return headers;\n  }\n\n  createRequest(data) {\n    let options = {\n      url: data.uri || data.url,\n      baseUrl: data.baseUrl,\n      method: data.method,\n      data: data.body,\n      params: data.qs,\n      headers: data.headers,\n    };\n\n    // Merge data with default request.\n    options = mergeData(this.defaultRequest, options);\n    options.headers = this.createHeaders(options.headers);\n    options.baseURL = options.baseUrl;\n    delete options.baseUrl;\n\n    return options;\n  }\n\n  request(data, cb) {\n    data = this.createRequest(data);\n\n    const promise = new Promise((resolve, reject) => {\n      axios(data)\n        .then(response => {\n          return resolve([\n            new Response(response.status, response.data, response.headers),\n            response.data,\n          ]);\n        })\n        .catch(error => {\n          if (error.response) {\n            if (error.response.status >= 400) {\n              return reject(new ResponseError(error.response));\n            }\n          }\n          return reject(error);\n        });\n    });\n\n    // Throw an error in case a callback function was not passed.\n    if (cb && typeof cb !== 'function') {\n      throw new Error('Callback passed is not a function.');\n    }\n\n    if (cb) {\n      return promise\n        .then(result => cb(null, result))\n        .catch(error => cb(error, null));\n    }\n\n    return promise;\n  }\n}\n\nmodule.exports = Client;\n","'use strict';\n\n/**\n * Dependencies\n */\nconst Client = require('./classes/client');\n\n//Export singleton instance\nmodule.exports = new Client();\n","'use strict';\n\nconst client = require('./src/client');\nconst Client = require('./src/classes/client');\n\nmodule.exports = client;\nmodule.exports.Client = Client;\n","'use strict';\n\n/**\n * Dependencies\n */\nconst {Client} = require('@sendgrid/client');\nconst {classes: {Mail}} = require('@sendgrid/helpers');\n\n/**\n * Mail service class\n */\nclass MailService {\n\n  /**\n   * Constructor\n   */\n  constructor() {\n\n    // Set client, initialize substitution wrappers and secret rules filter.\n    this.setClient(new Client());\n    this.setSubstitutionWrappers('{{', '}}');\n    this.secretRules = [];\n  }\n\n  /**\n   * Set client\n   */\n  setClient(client) {\n    this.client = client;\n\n    return this;\n  }\n\n  /**\n   * SendGrid API key passthrough for convenience.\n   */\n  setApiKey(apiKey) {\n    this.client.setApiKey(apiKey);\n\n    return this;\n  }\n\n  /**\n   * Twilio Email Auth passthrough for convenience.\n   */\n  setTwilioEmailAuth(username, password) {\n    this.client.setTwilioEmailAuth(username, password);\n  }\n\n  /**\n   * Set client timeout\n   */\n  setTimeout(timeout) {\n    if (typeof timeout === 'undefined') {\n      return;\n    }\n\n    this.client.setDefaultRequest('timeout', timeout);\n  }\n\n  /**\n   * Set substitution wrappers\n   */\n  setSubstitutionWrappers(left, right) {\n    if (typeof left === 'undefined' || typeof right === 'undefined') {\n      throw new Error('Must provide both left and right side wrappers');\n    }\n    if (!Array.isArray(this.substitutionWrappers)) {\n      this.substitutionWrappers = [];\n    }\n    this.substitutionWrappers[0] = left;\n    this.substitutionWrappers[1] = right;\n\n    return this;\n  }\n\n  /**\n   * Set secret rules for filtering the e-mail content\n   */\n  setSecretRules(rules) {\n    if (!(rules instanceof Array)) {\n      rules = [rules];\n    }\n\n    const tmpRules = rules.map(function (rule) {\n      const ruleType = typeof rule;\n\n      if (ruleType === 'string') {\n        return {\n          pattern: new RegExp(rule),\n        };\n      } else if (ruleType === 'object') {\n        // normalize rule object\n        if (rule instanceof RegExp) {\n          rule = {\n            pattern: rule,\n          };\n        } else if (rule.hasOwnProperty('pattern')\n          && (typeof rule.pattern === 'string')\n        ) {\n          rule.pattern = new RegExp(rule.pattern);\n        }\n\n        try {\n          // test if rule.pattern is a valid regex\n          rule.pattern.test('');\n          return rule;\n        } catch (err) {\n          // continue regardless of error\n        }\n      }\n    });\n\n    this.secretRules = tmpRules.filter(function (val) {\n      return val;\n    });\n  }\n\n  /**\n   * Check if the e-mail is safe to be sent\n   */\n  filterSecrets(body) {\n    if ((typeof body === 'object') && !body.hasOwnProperty('content')) {\n      return;\n    }\n\n    const self = this;\n\n    body.content.forEach(function (data) {\n      self.secretRules.forEach(function (rule) {\n        if (rule.hasOwnProperty('pattern')\n          && !rule.pattern.test(data.value)\n        ) {\n          return;\n        }\n\n        let message = `The pattern '${rule.pattern}'`;\n\n        if (rule.name) {\n          message += `identified by '${rule.name}'`;\n        }\n\n        message += ' was found in the Mail content!';\n\n        throw new Error(message);\n      });\n    });\n  }\n\n  /**\n   * Send email\n   */\n  send(data, isMultiple = false, cb) {\n\n    //Callback as second parameter\n    if (typeof isMultiple === 'function') {\n      cb = isMultiple;\n      isMultiple = false;\n    }\n\n    //Array? Send in parallel\n    if (Array.isArray(data)) {\n\n      //Create promise\n      const promise = Promise.all(data.map(item => {\n        return this.send(item, isMultiple);\n      }));\n\n      //Execute callback if provided\n      if (cb) {\n        promise\n          .then(result => cb(null, result))\n          .catch(error => cb(error, null));\n      }\n\n      //Return promise\n      return promise;\n    }\n\n    //Send mail\n    try {\n\n      //Append multiple flag to data if not set\n      if (typeof data.isMultiple === 'undefined') {\n        data.isMultiple = isMultiple;\n      }\n\n      //Append global substitution wrappers if not set in data\n      if (typeof data.substitutionWrappers === 'undefined') {\n        data.substitutionWrappers = this.substitutionWrappers;\n      }\n\n      //Create Mail instance from data and get JSON body for request\n      const mail = Mail.create(data);\n      const body = mail.toJSON();\n\n      //Filters the Mail body to avoid sensitive content leakage\n      this.filterSecrets(body);\n\n      //Create request\n      const request = {\n        method: 'POST',\n        url: '/v3/mail/send',\n        headers: mail.headers,\n        body,\n      };\n\n      //Send\n      return this.client.request(request, cb);\n    } catch (error) {\n\n      //Pass to callback if provided\n      if (cb) {\n        // eslint-disable-next-line callback-return\n        cb(error, null);\n      }\n\n      //Reject promise\n      return Promise.reject(error);\n    }\n  }\n\n  /**\n   * Send multiple emails (shortcut)\n   */\n  sendMultiple(data, cb) {\n    return this.send(data, true, cb);\n  }\n}\n\n//Export class\nmodule.exports = MailService;\n","'use strict';\n\n/**\n * Dependencies\n */\nconst MailService = require('./classes/mail-service');\n\n//Export singleton instance\nmodule.exports = new MailService();\n","'use strict';\n\nconst mailer = require('./src/mail');\nconst MailService = require('./src/classes/mail-service');\n\nmodule.exports = mailer;\nmodule.exports.MailService = MailService;\n","import sgMail from '@sendgrid/mail';\n\n// Initialize SendGrid (lazy initialization to avoid build-time errors)\nlet isInitialized = false;\n\nfunction ensureSendGridInitialized() {\n  if (!isInitialized) {\n    const apiKey = process.env.SENDGRID_API_KEY;\n    if (!apiKey) {\n      throw new Error('SENDGRID_API_KEY environment variable is required. Get your API key from https://app.sendgrid.com/settings/api_keys');\n    }\n    // Note: Most SendGrid keys start with 'SG.' but validation is done by SendGrid API\n    sgMail.setApiKey(apiKey);\n    isInitialized = true;\n  }\n}\n\n// Send email using dynamic template\nexport async function sendEmail(params: {\n  to: string;\n  templateId: string;\n  dynamicTemplateData: Record<string, any>;\n  from?: { email: string; name?: string };\n}) {\n  ensureSendGridInitialized();\n\n  try {\n    const msg = {\n      to: params.to,\n      from: params.from || {\n        email: process.env.SENDGRID_FROM_EMAIL!,\n        name: process.env.SENDGRID_FROM_NAME || 'Relay',\n      },\n      templateId: params.templateId,\n      dynamicTemplateData: params.dynamicTemplateData,\n    };\n\n    await sgMail.send(msg);\n    console.log(` Email sent to ${params.to}`);\n  } catch (error) {\n    console.error('SendGrid email error:', error);\n    throw new Error('Failed to send email');\n  }\n}\n\n// Send invoice email with payment options\nexport async function sendInvoiceEmail(params: {\n  toEmail: string;\n  invoiceReference: string;\n  amount: number;\n  currency?: string;\n  freelancerName: string;\n  dueDate?: Date;\n  description?: string;\n  bankDetails?: string;\n  stripeLink?: string;\n  confirmationUrl: string;\n}) {\n  const templateId = process.env.SENDGRID_INVOICE_TEMPLATE_ID!;\n\n  await sendEmail({\n    to: params.toEmail,\n    templateId,\n    dynamicTemplateData: {\n      freelancerName: params.freelancerName,\n      invoiceReference: params.invoiceReference,\n      amount: params.amount.toFixed(2),\n      currency: params.currency || 'GBP',\n      dueDate: params.dueDate?.toISOString(),\n      description: params.description,\n      bankDetails: params.bankDetails,\n      stripeLink: params.stripeLink,\n      confirmationUrl: params.confirmationUrl,\n    },\n  });\n}\n\n// Send day 7 reminder email\nexport async function sendReminderDay7Email(params: {\n  toEmail: string;\n  freelancerName: string;\n  invoiceReference: string;\n  amount: number;\n  currency: string;\n  dueDate: Date;\n  daysOverdue: number;\n}) {\n  const templateId = process.env.SENDGRID_REMINDER_DAY7_TEMPLATE_ID!;\n\n  await sendEmail({\n    to: params.toEmail,\n    templateId,\n    dynamicTemplateData: {\n      freelancerName: params.freelancerName,\n      invoiceReference: params.invoiceReference,\n      amount: params.amount.toFixed(2),\n      currency: params.currency,\n      dueDate: params.dueDate.toISOString(),\n      daysOverdue: params.daysOverdue,\n    },\n  });\n}\n\n// Send day 21 reminder email\nexport async function sendReminderDay21Email(params: {\n  toEmail: string;\n  freelancerName: string;\n  invoiceReference: string;\n  amount: number;\n  currency: string;\n  dueDate: Date;\n  daysOverdue: number;\n}) {\n  const templateId = process.env.SENDGRID_REMINDER_DAY21_TEMPLATE_ID!;\n\n  await sendEmail({\n    to: params.toEmail,\n    templateId,\n    dynamicTemplateData: {\n      freelancerName: params.freelancerName,\n      invoiceReference: params.invoiceReference,\n      amount: params.amount.toFixed(2),\n      currency: params.currency,\n      dueDate: params.dueDate.toISOString(),\n      daysOverdue: params.daysOverdue,\n    },\n  });\n}\n\n// Send payment confirmed notification\nexport async function sendPaymentConfirmedEmail(params: {\n  toEmail: string;\n  invoiceReference: string;\n  amount: number;\n  clientName: string;\n}) {\n  const templateId = process.env.SENDGRID_PAYMENT_CONFIRMED_TEMPLATE_ID!;\n\n  await sendEmail({\n    to: params.toEmail,\n    templateId,\n    dynamicTemplateData: {\n      invoiceReference: params.invoiceReference,\n      amount: params.amount.toFixed(2),\n      clientName: params.clientName,\n    },\n  });\n}\n\n// Send smart notification email\nexport async function sendNotificationEmail(params: {\n  toEmail: string;\n  subject: string;\n  message: string;\n  actionUrl?: string;\n}) {\n  const templateId = process.env.SENDGRID_NOTIFICATION_TEMPLATE_ID!;\n\n  await sendEmail({\n    to: params.toEmail,\n    templateId,\n    dynamicTemplateData: {\n      subject: params.subject,\n      message: params.message,\n      actionUrl: params.actionUrl,\n    },\n  });\n}\n"],"names":[],"mappings":"0BAAA,EAAA,CAAA,CAAA,CAAA,KAAA,mBAAA,YAAA,oCAAA,QAAA,QAAA,OAAA,mDAAA,aAAA,CAAA,+CAAA,iDAAA,6BAAA,2CAAA,yCAAA,6CAAA,oCAAA,2BAAA,CAAA,QAAA,MAAA,SAAA,uBAAA,WAAA,CAAA,KAAA,MAAA,IAAA,+CAAA,EAAA,cAAA,CAAA,OAAA,QAAA,EAAA,KAAA,WAAA,QAAA,CAAA,KAAA,QAAA,EAAA,aAAA,CAAA,oBAAA,SAAA,MAAA,SAAA,EAAA,gBAAA,CAAA,KAAA,QAAA,KAAA,SAAA,EAAA,YAAA,CAAA,KAAA,OAAA,EAAA,KAAA,CAAA,OAAA,OAAA,MAAA,OAAA,WAAA,CAAA,QAAA,0CAAA,E,+BCKA,EAAO,OAAO,CAAG,SAAS,EAAY,CAAG,CAAE,CAAS,CAAE,CAAO,EAG3D,GAAmB,UAAf,OAAO,GAA4B,MAAM,CAAd,EAC7B,MAAM,AAAI,MAAM,qCAAuC,GAIzD,GAAI,MAAM,OAAO,CAAC,GAChB,GADsB,IACf,EAST,IAAK,IAAM,KALP,AAAC,MAAM,OAAO,CAAC,KACjB,EAAU,EAAA,AAAE,CADe,CAKX,EAEhB,EAFqB,CAEjB,EAAI,cAAc,CAAC,GAAM,CAG3B,IAAM,EAAY,EAAU,GAIJ,UAApB,OAAO,CAAG,CAAC,EAAI,EAA8B,MAAM,CAAnB,CAAG,CAAC,EAAI,EACrC,EAAQ,QAAQ,CAAC,IAAS,EAAQ,EAAT,MAAiB,CAAC,KAC9C,CAAG,CAAC,EAAI,CAAG,EAD+C,AACnC,CAAG,CAAC,EAAI,CAAE,EAAW,EAAA,EAK5C,IAAc,IAChB,CADqB,AAClB,CAAC,EAAU,CAAG,CAAG,CAAC,EAAI,CACzB,OAAO,CAAG,CAAC,EAAI,CAEnB,CAIF,OAAO,CACT,+BC3CA,GAAO,OAAO,CAAG,SAAS,AAAe,CAAG,EAC1C,GAAmB,UAAf,AAAyB,OAAlB,EACT,MAAM,AAAI,MAAM,gDAElB,OAAO,EACJ,IAAI,GACJ,OAAO,CAAC,UAAW,KACnB,OAAO,CAAC,0BAA2B,SAAS,CAAK,CAAE,CAAK,SACvD,AAAI,AAAkB,GAAG,QAAd,GACF,GAES,IAAV,EAAe,EAAM,WAAW,GAAK,EAAM,WAAW,EAChE,EACJ,8BCbA,IAAM,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAKN,EAAO,OAAO,CAAG,SAAS,AAAY,CAAG,CAAE,CAAO,EAChD,OAAO,EAAY,EAAK,EAAgB,EAC1C,gCCRA,EAAO,OAAO,CAAG,SAAS,AAAe,CAAG,EAC1C,GAAmB,UAAU,AAAzB,OAAO,EACT,MAAM,AAAI,MAAM,gDAElB,OAAO,EAAI,IAAI,GAAG,OAAO,CAAC,sBAAuB,SAAS,CAAE,EAE1D,MAAO,AAAC,CAAU,OADlB,EAAK,EAAG,IAAI,GAAG,WAAW,GAAG,OAAO,CAAC,IAAK,GAAA,CAChC,CAAC,EAAE,CAAW,GAAK,GAAA,CAAG,CAAI,CACtC,GAAG,KAAK,CAAC,EACX,gCCRA,IAAM,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAKN,EAAO,OAAO,CAAG,SAAS,AAAY,CAAG,CAAE,CAAO,EAChD,OAAO,EAAY,EAAK,EAAgB,EAC1C,gCCRA,EAAO,OAAO,CAAG,SAAmB,AAAV,CAAa,EACrC,OAAO,KAAK,KAAK,CAAC,KAAK,SAAS,CAAC,GACnC,gCCFA,IAAM,EAAA,EAAA,CAAA,CAAA,KACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAiLN,EAAO,OAAO,CA5Kd,EA4KiB,IA5KX,AAKJ,YAAY,CAAI,CAAE,CAGZ,GACF,GADQ,CACJ,CAAC,QAAQ,CAAC,EAElB,CAKA,SAAS,CAAI,CAAE,CAGb,GAAoB,UAAhB,AAA0B,OAAnB,EACT,MAAU,AAAJ,MAAU,kCASlB,GAAM,SACJ,CAAO,UACP,CAAQ,MACR,CAAI,CACJ,aAAW,WACX,CAAS,UACT,CAAQ,CACT,CAVD,EAAO,AAUH,EAXJ,EAAO,EAAU,IAajB,EAZmB,CAYd,KAAmB,IAAZ,GAA6B,KAAoB,IAAb,EAC9C,MAAM,AAAI,CAD+D,KAEvE,+DAKJ,IAAI,CAAC,WAAW,CAAC,GACjB,IAAI,CAAC,OAAO,CAAC,GACb,IAAI,CAAC,cAAc,CAAC,GACpB,IAAI,CAAC,YAAY,CAAC,GAClB,IAAI,CAAC,UAAU,CAAC,EAAW,IAAI,CAAC,QAAQ,CAAC,GAAY,EACvD,CAKA,SAAS,CAAQ,CAAE,CACjB,OAAO,EAAG,YAAY,CAAC,EAAK,OAAO,CAAC,GACtC,CAKA,WAAW,CAAO,CAAE,CAElB,GAAuB,UAAnB,OAAO,EAAsB,CAC/B,IAAI,CAAC,OAAO,CAAG,EACf,MACF,CAAO,GAAI,aAAmB,aAA+B,IAArB,EAAQ,QAAQ,CAAgB,CACtE,IAAI,CAAC,OAAO,CAAG,EAAQ,QAAQ,GAEN,AAArB,cAAmC,KAA/B,CAAC,WAAW,GAClB,IAAI,CAAC,OAAO,CAAG,EAAQ,QAAQ,CAAC,SAAA,EAGlC,MACF,CAEA,MAAM,AAAI,MAAM,mDAClB,CAKA,eAAe,CAAO,CAAE,CACtB,GAAI,aAAmB,QAAU,KAAqB,MAAb,QAAQ,CAAgB,CAC/D,IAAI,CAAC,OAAO,CAAG,EAAQ,QAAQ,CAAC,UAChC,MACF,CAEA,MAAM,AAAI,MAAM,kCAClB,CAKA,YAAY,CAAQ,CAAE,CACpB,GAAI,KAAoB,IAAb,GAGX,GAAI,GAHiC,AAGD,UAApB,AAA8B,OAAvB,EACrB,MAAM,AAAI,MAAM,kCAElB,IAAI,CAAC,QAAQ,CAAG,EAClB,CAKA,QAAQ,CAAI,CAAE,CACZ,GAAI,KAAgB,IAAT,GAGX,GAAoB,GAHa,OAG7B,AAA0B,OAAnB,EACT,MAAM,AAAI,MAAM,8BAElB,IAAI,CAAC,IAAI,CAAG,EACd,CAKA,eAAe,CAAW,CAAE,CAC1B,GAAI,KAAuB,IAAhB,GAGX,GAA2B,GAHa,OAGpC,AAAiC,OAA1B,EACT,MAAM,AAAI,MAAM,qCAElB,IAAI,CAAC,WAAW,CAAG,EACrB,CAKA,aAAa,CAAS,CAAE,CACtB,GAAI,AAAqB,SAAd,GAGX,CAHsC,EAGb,UAArB,AAA+B,OAAxB,EACT,MAAU,AAAJ,MAAU,mCAElB,IAAI,CAAC,SAAS,CAAG,EACnB,CAKA,QAAS,CAGP,GAAM,SAAC,CAAO,UAAE,CAAQ,MAAE,CAAI,CAAE,aAAW,WAAE,CAAS,CAAC,CAAG,IAAI,CAGxD,EAAO,SAAC,WAAS,CAAQ,EAc/B,OAXI,KAAgB,IAAT,IACT,EAAK,GAD0B,CACtB,CAAG,CAAA,EAEV,KAAuB,IAAhB,IACT,EAAK,GADiC,QACtB,CAAG,CAAA,EAEjB,KAAqB,IAAd,IACT,EAAK,GAD+B,MACtB,CAAG,CAAA,EAIZ,EAAY,EACrB,CACF,gCClLA,EAAO,OAAO,CAAG,SAAS,AAAe,CAAG,EAG1C,GAAyB,CAAC,GAAG,CAAzB,EAAI,OAAO,CAAC,KACd,MAAO,CAAC,GAAI,EAAI,CAIlB,GAAI,CAAC,EAAM,EAAM,CAAG,EAAI,KAAK,CAAC,KAO9B,OAJA,AAIO,EAJA,EAAK,IAAI,GAChB,EAAQ,EAAM,OAAO,CAAC,IAAK,IAAI,IAAI,GAIrC,gCChBA,IAAM,EAAA,EAAA,CAAA,CAAA,MAKN,OAAM,EAKJ,YAAY,CAAI,CAAE,CAGZ,GACF,GADQ,CACJ,CAAC,QAAQ,CAAC,EAElB,CAKA,SAAS,CAAI,CAAE,CAGb,GAAoB,UAAhB,OAAO,EAAmB,CAC5B,GAAM,CAAC,EAAM,EAAM,CAAG,EAAe,GACrC,EAAO,MAAC,QAAM,CAAK,CACrB,CAGA,GAAI,AAAgB,UAAU,OAAnB,EACT,MAAU,AAAJ,MAAU,oDAIlB,GAAM,MAAC,CAAI,OAAE,CAAK,CAAC,CAAG,EAGtB,IAAI,CAAC,QAAQ,CAAC,GACd,IAAI,CAAC,OAAO,CAAC,EACf,CAKA,QAAQ,CAAI,CAAE,CACZ,GAAI,AAAgB,SAAT,GAGX,CAHiC,EAGb,UAAU,AAA1B,OAAO,EACT,MAAM,AAAI,MAAM,8BAElB,IAAI,CAAC,IAAI,CAAG,EACd,CAKA,SAAS,CAAK,CAAE,CACd,GAAI,KAAiB,IAAV,EACT,MAAM,AAAI,CADsB,KAChB,wBAElB,GAAqB,UAAU,AAA3B,OAAO,EACT,MAAU,AAAJ,MAAU,+BAElB,IAAI,CAAC,KAAK,CAAG,CACf,CAKA,QAAS,CAGP,GAAM,OAAC,CAAK,MAAE,CAAI,CAAC,CAAG,IAAI,CAGpB,EAAO,OAAC,CAAK,EAQnB,MALa,IAAI,CAAb,IACF,EAAK,IAAI,CAAG,CAAA,EAIP,CACT,CASA,OAAO,OAAO,CAAI,CAAE,QAGlB,AAAI,MAAM,OAAO,CAAC,GACT,EACJ,EAFoB,IAEd,CAAC,GAAQ,CAAC,CAAC,GACjB,GAAG,CAAC,GAAQ,IAAI,CAAC,MAAM,CAAC,IAIzB,aAAgB,EACX,EAIF,IAAI,EAAa,EAC1B,CACF,CAPsC,AAUtC,EAAO,OAAO,CAAG,gCCtHjB,IAAI,EAAoB,SAAS,AAAkB,CAAK,QASrC,EACd,EATJ,CAQuB,KARhB,AAKA,CAAC,CAAC,CADe,EAJD,GAIM,CACX,AAAiB,MAJ/B,CAAC,UAIoB,MAJV,EAUR,AAAgB,uBAFL,OAAO,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,KAG7B,kBAAhB,CACA,EAAe,AAQZ,EAAM,QAAQ,GAAK,EAnB3B,EAgBI,EADiC,AACZ,YADN,OAAO,QAAyB,OAAO,GAAG,CACrB,OAAO,GAAG,CAAC,iBAAmB,MAUtE,SAAS,EAA8B,CAAK,CAAE,CAAO,EACpD,OAA0B,IAAlB,EAAQ,KAAK,EAAc,EAAQ,iBAAiB,CAAC,GAC1D,EALI,MAAM,EAKA,KALO,CAAC,AAKI,GALG,EAAE,CAAG,CAAC,EAKD,EAAO,GACrC,CACJ,CAEA,SAAS,EAAkB,CAAM,CAAE,CAAM,CAAE,CAAO,EACjD,OAAO,EAAO,MAAM,CAAC,GAAQ,GAAG,CAAC,SAAS,CAAO,EAChD,OAAO,EAA8B,EAAS,EAC/C,EACD,CAkBA,SAAS,EAAQ,CAAM,EACtB,OAAO,OAAO,IAAI,CAAC,GAAQ,MAAM,CAR1B,AAQ2B,OARpB,qBAAqB,CAChC,OAAO,qBAAqB,CAOmC,AAPlC,GAAQ,MAAM,CAAC,SAAS,CAAM,EAC5D,OAAO,OAAO,oBAAoB,CAAC,IAAI,CAAC,EAAQ,EACjD,GACE,EAAE,CAKN,CAEA,SAAS,EAAmB,CAAM,CAAE,CAAQ,EAC3C,GAAI,CACH,OAAO,KAAY,CACpB,CAAE,MAAM,EAAG,CACV,OAAO,CACR,CACD,CA8BA,SAAS,EAAU,CAAM,CAAE,CAAM,CAAE,CAAO,EAEzC,CADA,EAAU,GAAW,CAAC,GACd,UAAU,CAAG,EAAQ,UAAU,EAAI,EAC3C,EAAQ,iBAAiB,CAAG,EAAQ,iBAAiB,EAAI,EAGzD,EAAQ,6BAA6B,CAAG,EAExC,IA7BoC,EAChC,EA4BA,EAAgB,CA7BuB,KA6BjB,OAAO,CAAC,UAEF,AAEhC,IAHoB,AAGhB,CAAC,KAHqB,OAAO,CAAC,AACgB,GAG1C,EAA8B,EAAQ,GACnC,EACH,EAHwB,AAGhB,UAAU,CADA,AACC,EAAQ,EAAQ,MAnCzB,CAAC,EACf,GAoCgC,GApCxB,iBAAiB,CAAC,AAoCV,IAnCnB,KADsC,AACtB,GAAR,IAAe,CAAC,SAAS,CAAG,EACnC,CAAW,CAAC,EAAI,CAAG,EAA8B,CAAM,CAAC,EAAI,CAAE,EAC/D,GAED,EA+B4B,GA/BZ,GAAR,IAAe,CAAC,SAAS,CAAG,EAZ7B,QACH,CAAC,CAAC,OAAO,EADa,QAAQ,IACP,CAAC,AADW,IACP,CAAC,MAC5B,EADoC,KAAK,AAClC,oBAAoB,CAAC,IAAI,CAAC,EAWR,EAXgB,CAAI,EAAE,CAAN,AAWV,AAI/B,IAA2B,IAAQ,EAAQ,GAhB6C,KADgB,CAiBrF,QAAyC,CAAC,CAAM,CAAC,EAAI,EAC3E,CAD8E,AACnE,CAAC,EAAI,CAAG,CAhDtB,GAgCiG,MAhCxF,AAAiB,CAAG,CAAE,CAAO,EACrC,GAAI,CAAC,EAAQ,WAAW,CACvB,CADyB,MAClB,EAER,IAAI,EAAc,EAAQ,WAAW,CAAC,GACtC,MAA8B,YAAvB,OAAO,EAA6B,EAAc,EAC1D,EA0CuC,EAAK,GAAS,CAAM,CAAC,EAAI,CAAE,CAAM,CAAC,EAAI,CAAE,GAE5E,CAAW,CAAC,EAAI,CAAG,EAA8B,CAAM,CAAC,EAAI,CAAE,GAEhE,GACO,EAsBR,CAEA,EAAU,GAAG,CAAG,SAAS,AAAa,CAAK,CAAE,CAAO,EACnD,GAAI,CAAC,MAAM,OAAO,CAAC,GAClB,KAD0B,CACpB,AAAI,MAAM,qCAGjB,OAAO,EAAM,MAAM,CAAC,SAAS,CAAI,CAAE,CAAI,EACtC,OAAO,EAAU,EAAM,EAAM,EAC9B,EAAG,CAAC,EACL,EAIA,EAAO,OAAO,CAFI,EAED,8BC/HjB,EAAO,OAAO,CAAG,SAAS,EAAK,CAAa,CAAE,EAAO,IAAI,CAAE,EAAQ,IAAI,EAGrE,GAAI,MAAM,OAAO,CAAC,GAChB,OAAO,EAAc,GAAG,CAAC,AADO,GACC,EAAK,EAAM,EAAM,IAIpD,IAAM,EAAU,CAAC,EAGjB,IAAK,IAAM,KAAO,EAEZ,EAAc,UAFa,IAEC,CAAC,KAC/B,CADqC,AAC9B,CAAC,EAAO,EAAM,EAAM,CAAG,OAAO,CAAa,CAAC,GAAI,EAK3D,OAAO,CACT,gCCpBA,IAAM,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,KACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,MAwWN,GAAO,OAAO,CAnWd,EAmWiB,IAnWX,AAKJ,YAAY,CAAI,CAAE,CAGhB,IAAI,CAAC,EAAE,CAAG,EAAE,CACZ,IAAI,CAAC,EAAE,CAAG,EAAE,CACZ,IAAI,CAAC,GAAG,CAAG,EAAE,CACb,IAAI,CAAC,OAAO,CAAG,CAAC,EAChB,IAAI,CAAC,UAAU,CAAG,CAAC,EACnB,IAAI,CAAC,aAAa,CAAG,CAAC,EACtB,IAAI,CAAC,oBAAoB,CAAG,CAAC,KAAM,KAAK,CACxC,IAAI,CAAC,mBAAmB,CAAG,CAAC,EAGxB,GACF,GADQ,CACJ,CAAC,QAAQ,CAAC,EAElB,CAKA,SAAS,CAAI,CAAE,CAGb,GAAoB,UAAhB,AAA0B,OAAnB,EACT,MAAM,AAAI,MAAM,kCASlB,GAAM,CACJ,IAAE,CAAE,MAAI,IAAE,CAAE,KAAE,CAAG,SAAE,CAAO,SAAE,CAAO,YAAE,CAAU,QAAE,CAAM,eACvD,CAAa,sBAAE,CAAoB,qBAAE,CAAmB,CACzD,CAND,EAMI,AANG,EADP,EAAO,EAAU,GACQ,CAAC,EAAP,cAAwB,sBAAuB,aAAc,UAAU,EAS1F,IAAI,CAAC,KAAK,CAAC,GACX,IAAI,CAAC,OAAO,CAAC,GACb,IAAI,CAAC,KAAK,CAAC,GACX,IAAI,CAAC,MAAM,CAAC,GACZ,IAAI,CAAC,UAAU,CAAC,GAChB,IAAI,CAAC,UAAU,CAAC,GAChB,IAAI,CAAC,gBAAgB,CAAC,GACtB,IAAI,CAAC,uBAAuB,CAAC,GAC7B,IAAI,CAAC,aAAa,CAAC,GACnB,IAAI,CAAC,sBAAsB,CAAC,GAC5B,IAAI,CAAC,SAAS,CAAC,EACjB,CAKA,WAAW,CAAO,CAAE,CAClB,GAAI,KAAmB,IAAZ,GAGX,GAAI,AAAmB,GAHa,OAGH,OAAtB,EACT,MAAM,AAAI,MAAM,iCAElB,IAAI,CAAC,OAAO,CAAG,EACjB,CAKA,UAAU,CAAM,CAAE,CAChB,GAAI,KAAkB,IAAX,GAGX,GAAI,CAAC,EAH8B,KAGvB,SAAS,CAAC,GACpB,MAD6B,AACvB,AAAI,MAAM,iCAElB,IAAI,CAAC,MAAM,CAAG,EAChB,CAKA,MAAM,CAAE,CAAE,CACU,SAAP,IAGN,AAH0B,AAG3B,MAAO,OAAO,CAAC,KAAK,AACtB,EAAK,CAAC,EAAG,EAEX,IAAI,CAAC,EAAE,CAAG,EAAa,MAAM,CAAC,GAChC,CAKA,QAAQ,CAAI,CAAE,CACQ,SAAT,IAGX,AAHiC,IAG7B,CAAC,IAAI,CAAG,EAAa,MAAM,CAAC,EAAA,CAClC,CAKA,MAAM,CAAE,CAAE,MACU,IAAP,GAGX,IAAI,CAAC,CAH0B,CAGxB,CAAC,IAAI,CAAC,EAAa,MAAM,CAAC,GACnC,CAKA,MAAM,CAAE,CAAE,CACU,SAAP,IAAoB,AAG3B,AAAC,MAAM,OAAO,CAAC,KAAK,AACtB,EAAK,CAAC,EAAG,EAEX,IAAI,CAAC,EAAE,CAAG,EAAa,MAAM,CAAC,GAChC,CAKA,MAAM,CAAE,CAAE,MACU,IAAP,GAGX,IAAI,CAAC,CAH0B,CAGxB,CAAC,IAAI,CAAC,EAAa,MAAM,CAAC,GACnC,CAKA,OAAO,CAAG,CAAE,MACS,IAAR,IAGP,AAAC,KAH2B,CAGrB,OAAO,CAAC,KACjB,CADuB,CACjB,CAAC,EAAI,EAEb,IAAI,CAAC,GAAG,CAAG,EAAa,MAAM,CAAC,GACjC,CAKA,OAAO,CAAG,CAAE,MACS,IAAR,GAGX,IAAI,CAAC,CAH2B,EAGxB,CAAC,IAAI,CAAC,EAAa,MAAM,CAAC,GACpC,CAKA,WAAW,CAAO,CAAE,CAClB,GAAI,KAAmB,IAAZ,GAGX,GAAuB,GAHa,OAGhC,OAAO,GAAwB,AAAY,MAAM,GACnD,MAAM,AAAI,MAAM,iCAElB,IAAI,CAAC,OAAO,CAAG,EACjB,CAKA,UAAU,CAAG,CAAE,CAAK,CAAE,CACpB,GAAmB,UAAf,AAAyB,OAAlB,EACT,MAAM,AAAI,MAAM,kCAElB,GAAqB,UAAjB,AAA2B,OAApB,EACT,MAAM,AAAI,MAAM,oCAElB,IAAI,CAAC,OAAO,CAAC,EAAI,CAAG,CACtB,CAKA,cAAc,CAAU,CAAE,CACxB,GAAI,KAAsB,IAAf,GAGX,GAA0B,GAHa,OAGnC,OAAO,GAA0C,MAAM,CAArB,EACpC,MAAM,AAAI,MAAM,oCAElB,IAAI,CAAC,UAAU,CAAG,EACpB,CAKA,aAAa,CAAG,CAAE,CAAK,CAAE,CACvB,GAAI,AAAe,UAAU,OAAlB,EACT,MAAM,AAAI,MAAM,sCAElB,GAAqB,UAAjB,AAA2B,OAApB,EACT,MAAM,AAAI,MAAM,wCAElB,IAAI,CAAC,UAAU,CAAC,EAAI,CAAG,CACzB,CAKA,iBAAiB,CAAa,CAAE,CAC9B,GAAI,KAAyB,IAAlB,GAGX,GAA6B,GAHa,OAGtC,AAAmC,OAA5B,EACT,MAAM,AAAI,MAAM,uCAElB,IAAI,CAAC,aAAa,CAAG,EACvB,CAKA,gBAAgB,CAAG,CAAE,CAAK,CAAE,CAC1B,GAAmB,AAAf,UAAyB,OAAlB,EACT,MAAM,AAAI,MAAM,wCAElB,GAAqB,UAAjB,OAAO,GAAuC,UAAjB,AAA2B,OAApB,EACtC,MAAM,AAAI,MAAM,oDAElB,IAAI,CAAC,aAAa,CAAC,EAAI,CAAG,CAC5B,CAKA,0BAA0B,CAAa,CAAE,CACvC,GAAI,MAAO,GAGX,GAA6B,UAAzB,AAAmC,EAHV,KAGlB,EACT,MAAM,AAAI,EAJgC,IAKxC,cAL0D,MAAM,gDAQpE,IAAI,CAAC,aAAa,CAAG,OAAO,MAAM,CAAC,CAAC,EAAG,EAAe,IAAI,CAAC,aAAa,EAC1E,CAKA,wBAAwB,CAAQ,CAAE,CAChC,GAAI,MAAO,GAIX,GAAI,CAAC,MAAM,AAJa,OAIN,CAAC,IAAiC,GAAG,AAJhB,CAIP,EAAS,MAAM,CAC7C,GALkD,GAK5C,AAAI,GAL8C,GAMtD,+DAGJ,IAAI,CAAC,oBAAoB,CAAG,EAC9B,CAKA,6BAA6B,CAAmB,CAAE,CAChD,GAAI,MAAO,GAGX,GAAmC,UAA/B,AAAyC,OAAlC,CAHwB,CAIjC,MAAU,AAAJ,MACJ,EAL8C,wBAAwB,MAAM,6CAQhF,IAAI,CAAC,mBAAmB,CAAG,EAAU,EAAqB,IAAI,CAAC,mBAAmB,EACpF,CAKA,uBAAuB,CAAmB,CAAE,CAC1C,GAAI,KAA+B,IAAxB,GAGX,GAAmC,GAHa,OAG5C,AAAyC,OAAlC,EACT,MAAM,AAAI,MAAM,6CAElB,IAAI,CAAC,mBAAmB,CAAG,EAC7B,CAKA,QAAS,CAGP,GAAM,IACJ,CAAE,MAAE,CAAI,IAAE,CAAE,KAAE,CAAG,SAAE,CAAO,SAAE,CAAO,YAAE,CAAU,CAAE,QAAM,CACvD,eAAa,sBAAE,CAAoB,qBAAE,CAAmB,CACzD,CAAG,IAAI,CAGF,EAAO,IAAC,CAAE,EAchB,GAXI,MAAM,OAAO,CAAC,IAAO,EAAG,MAAM,CAAG,GAAG,AACtC,GAAK,EAAE,CAAG,CAAA,EAER,MAAM,OAAO,CAAC,IAAQ,EAAI,MAAM,CAAG,GAAG,CACxC,EAAK,GAAG,CAAG,CAAA,EAIT,OAAO,IAAI,CAAC,GAAS,MAAM,CAAG,GAAG,CACnC,EAAK,OAAO,CAAG,CAAA,EAEb,GAAiB,OAAO,IAAI,CAAC,GAAe,MAAM,CAAG,EAAG,CAC1D,GAAM,CAAC,EAAM,EAAM,CAAG,CACtB,GAAK,aAAa,CAAG,EAAkB,EAAe,EAAM,EAC9D,CAqBA,OApBI,OAAO,IAAI,CAAC,GAAY,MAAM,CAAG,GAAG,CACtC,EAAK,UAAU,CAAG,CAAA,EAGhB,GAAuB,OAAO,IAAI,CAAC,GAAqB,MAAM,CAAG,GAAG,CACtE,EAAK,mBAAmB,CAAG,CAAA,EAIzB,KAAmB,IAAZ,IACT,EAAK,GAD6B,IACtB,CAAG,CAAA,EAEb,KAAkB,IAAX,IACT,EAAK,GAD4B,GACtB,CAAG,CAAA,EAEZ,KAAgB,IAAT,IACT,EAAK,GAD0B,CACtB,CAAG,CAAA,EAIP,EAAY,EAAM,CAAC,gBAAiB,sBAAuB,aAAc,UAAU,CAC5F,CACF,gCC1WA,EAAO,OAAO,CAAG,SAAS,AAAY,CAAG,EACvC,OAAO,EAAI,GAAG,CAAC,GACb,AAAoB,UAAhB,OAAO,GAA8B,AAAT,UAAwC,YAAvB,AAAmC,OAA5B,EAAK,MAAM,CAC1D,EAAK,MAAM,GAEb,EAEX,mBCPA,EAAO,OAAO,CAAG,CACf,8BANoC,CAAC;;;kGAG2D,CAAC,AAInG,gCCLA,IAAM,EAAW,CAAC,EAAQ,EAAY,EAAW,KAC/C,GAAI,AAAkB,SAAX,GAA0B,KAA6B,IAAtB,CAAM,CAAC,EAAU,EAGzD,GAH2E,IAGpE,CAAM,CAAC,EAAU,GAAK,EAC/B,MAAM,AAAI,GADgC,GAC1B,CAAA,EAAG,EAAU,gBAAgB,EAAE,EAAW,CAAC,EAAE,EAAU,EAAE,CAAC,CAE9E,EAEA,EAAO,OAAO,CAAG,CACf,qBAAqB,CAAQ,EAC3B,GAAwB,UAApB,AAA8B,OAAvB,EACT,MAAM,AAAI,MAAM,sCAElB,GAAM,KACJ,CAAG,sBACH,CAAoB,sBACpB,CAAoB,wBACpB,CAAsB,CACtB,6BAA2B,QAC3B,CAAM,aACN,CAAW,WACX,CAAS,CACV,CAAG,EACJ,EAAS,EAAK,MAAO,SAAU,WAC/B,EAAS,EAAK,MAAO,QAAS,UAC9B,EAAS,EAAsB,uBAAwB,SAAU,WACjE,EAAS,EAAsB,uBAAwB,SAAU,WACjE,EAAS,EAAwB,yBAA0B,SAAU,WACrE,EAAS,EAA6B,8BAA+B,SAAU,WAC/E,EAAS,EAAQ,SAAU,SAAU,WACrC,EAAS,EAAQ,SAAU,OAAQ,UACnC,EAAS,EAAQ,SAAU,OAAQ,UACnC,EAAS,EAAa,cAAe,SAAU,WAC/C,EAAS,EAAW,YAAa,SAAU,WAC3C,EAAS,EAAW,YAAa,YAAa,UAC9C,EAAS,EAAW,YAAa,YAAa,SAChD,EAEA,yBAAyB,CAAQ,EAC/B,GAAwB,UAApB,AAA8B,OAAvB,EACT,MAAM,AAAI,MAAM,0CAElB,GAAM,eACJ,CAAa,cACb,CAAY,sBACZ,CAAoB,CACpB,YAAU,CACX,CAAG,EACJ,EAAS,EAAe,gBAAiB,SAAU,WACnD,EAAS,EAAe,gBAAiB,aAAc,WACvD,EAAS,EAAc,eAAgB,SAAU,WACjD,EAAS,EAAc,eAAgB,kBAAmB,UAC1D,EAAS,EAAsB,uBAAwB,SAAU,WACjE,EAAS,EAAsB,uBAAwB,OAAQ,UAC/D,EAAS,EAAsB,uBAAwB,OAAQ,UAC/D,EAAS,EAAsB,uBAAwB,kBAAmB,UAC1E,EAAS,EAAY,aAAc,SAAU,WAC7C,EAAS,EAAY,aAAc,aAAc,UACjD,EAAS,EAAY,aAAc,aAAc,UACjD,EAAS,EAAY,aAAc,WAAY,UAC/C,EAAS,EAAY,aAAc,cAAe,UAClD,EAAS,EAAY,aAAc,eAAgB,SACrD,CACF,gCC7DA,IAAM,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,KACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,+BAAE,CAA6B,CAAE,CAAA,EAAA,CAAA,CAAA,OACjC,sBAAC,CAAoB,0BAAE,CAAwB,CAAC,CAAA,EAAA,CAAA,CAAA,MAKtD,OAAM,EAKJ,YAAY,CAAI,CAAE,CAGhB,IAAI,CAAC,SAAS,EAAG,EACjB,IAAI,CAAC,YAAY,EAAG,EACpB,IAAI,CAAC,gBAAgB,CAAG,EAAE,CAC1B,IAAI,CAAC,WAAW,CAAG,EAAE,CACrB,IAAI,CAAC,OAAO,CAAG,EAAE,CACjB,IAAI,CAAC,UAAU,CAAG,EAAE,CACpB,IAAI,CAAC,OAAO,CAAG,CAAC,EAChB,IAAI,CAAC,QAAQ,CAAG,CAAC,EACjB,IAAI,CAAC,UAAU,CAAG,CAAC,EACnB,IAAI,CAAC,gBAAgB,CAAG,CAAC,EACzB,IAAI,CAAC,YAAY,CAAG,CAAC,EACrB,IAAI,CAAC,GAAG,CAAG,CAAC,EAGZ,IAAI,CAAC,aAAa,CAAG,KACrB,IAAI,CAAC,oBAAoB,CAAG,KAC5B,IAAI,CAAC,mBAAmB,CAAG,KAGvB,GACF,GADQ,CACJ,CAAC,QAAQ,CAAC,EAElB,CAKA,SAAS,CAAI,CAAE,CAGb,GAAoB,UAAU,AAA1B,OAAO,EACT,MAAM,AAAI,MAAM,kCASlB,GAAM,IACJ,CAAE,MAAE,CAAI,CAAE,SAAO,CAAE,IAAE,KAAE,CAAG,QAAE,CAAM,SAAE,CAAO,MAAE,CAAI,MAAE,CAAI,SAAE,CAAO,YAChE,CAAU,kBAAE,CAAgB,aAAE,CAAW,YAAE,CAAU,SAAE,CAAO,CAC9D,UAAQ,SAAE,CAAO,YAAE,CAAU,UAAE,CAAQ,YAAE,CAAU,KAAE,CAAG,cAAE,CAAY,kBACtE,CAAgB,eAAE,CAAa,sBAAE,CAAoB,qBAAE,CAAmB,YAAE,CAAU,cACtF,CAAY,aAAE,CAAW,CAC1B,CATD,EASI,AATG,EADP,EAAO,EAAU,GACQ,CAAC,EAAP,cAAwB,sBAAuB,aAAc,UAAW,WAAW,EAYtG,IAAI,CAAC,OAAO,CAAC,GACb,IAAI,CAAC,UAAU,CAAC,GAChB,IAAI,CAAC,UAAU,CAAC,GAChB,IAAI,CAAC,SAAS,CAAC,GACf,IAAI,CAAC,aAAa,CAAC,GACnB,IAAI,CAAC,UAAU,CAAC,GAChB,IAAI,CAAC,aAAa,CAAC,GACnB,IAAI,CAAC,cAAc,CAAC,GACpB,IAAI,CAAC,UAAU,CAAC,GAChB,IAAI,CAAC,WAAW,CAAC,GACjB,IAAI,CAAC,UAAU,CAAC,GAChB,IAAI,CAAC,aAAa,CAAC,GACnB,IAAI,CAAC,aAAa,CAAC,GACnB,IAAI,CAAC,aAAa,CAAC,GACnB,IAAI,CAAC,MAAM,CAAC,GACZ,IAAI,CAAC,eAAe,CAAC,GACrB,IAAI,CAAC,mBAAmB,CAAC,GACzB,IAAI,CAAC,eAAe,CAAC,GACrB,IAAI,CAAC,cAAc,CAAC,GAEhB,IAAI,CAAC,SAAS,CAChB,CADkB,GACd,CAAC,sBAAsB,CAAC,IAE5B,IAAI,CAAC,gBAAgB,CAAC,GACtB,IAAI,CAAC,uBAAuB,CAAC,IAI/B,IAAI,CAAC,cAAc,CAAC,GACpB,IAAI,CAAC,cAAc,CAAC,GAGhB,EACF,IAAI,CAAC,WADe,QACI,CAAC,GAChB,GAAc,MAAM,OAAO,CAAC,GAErC,EAF0C,AAEvC,OAAO,CAAC,GAAM,IAAI,CAAC,KAAK,CAAC,EAAI,EAAI,IAGpC,IAAI,CAAC,KAAK,CAAC,EAAI,EAAI,EAEvB,CAKA,QAAQ,CAAI,CAAE,CACZ,GAAI,IAAI,CAAC,cAAc,CAAC,OAAQ,EAAM,CAAC,IAAI,CAAC,eAAe,CAAC,EAAG,CAC7D,GAAoB,UAAhB,OAAO,GAAqB,AAAsB,UAAU,OAAzB,EAAK,KAAK,CAC/C,MAAU,AAAJ,MAAU,gDAElB,IAAI,CAAC,IAAI,CAAG,EAAa,MAAM,CAAC,EAClC,CACF,CAKA,WAAW,CAAO,CAAE,CAClB,GAAI,IAAI,CAAC,cAAc,CAAC,UAAW,EAAS,CAAC,IAAI,CAAC,eAAe,CAAC,EAAG,CACnE,GAAuB,UAAnB,OAAO,GAAiD,UAAzB,AAAmC,OAA5B,EAAQ,KAAK,CACrD,MAAM,AAAI,MAAM,mDAElB,IAAI,CAAC,OAAO,CAAG,EAAa,MAAM,CAAC,EACrC,CACF,CAKA,WAAW,CAAO,CAAE,CAClB,IAAI,CAAC,YAAY,CAAC,UAAW,EAAS,SACxC,CAKA,UAAU,CAAM,CAAE,CACZ,IAAI,CAAC,cAAc,CAAC,SAAU,EAAQ,CAAC,IAAI,CAAC,eAAe,CAAE,IAAI,CAAC,sBAAsB,CAAC,OAAO,SAAS,CAAE,iCAAiC,GAAG,CACjJ,IAAI,CAAC,MAAM,CAAG,CAAA,CAElB,CAKA,cAAc,CAAU,CAAE,CACpB,IAAI,CAAC,YAAY,CAAC,aAAc,EAAY,WAAW,AACrD,AAA6B,GAAG,GAArB,OAAO,CAAC,QACrB,IAAI,CAAC,SAAS,EAAG,CAAA,CAGvB,CAKA,WAAW,CAAO,CAAE,CAClB,IAAI,CAAC,YAAY,CAAC,UAAW,EAAS,SACxC,CAKA,cAAc,CAAU,CAAE,CACxB,IAAI,CAAC,YAAY,CAAC,aAAc,EAAY,SAC9C,CAKA,OAAO,CAAG,CAAE,CACV,GAAI,IAAI,CAAC,cAAc,CAAC,MAAO,EAAK,CAAC,IAAI,CAAC,eAAe,CAAE,IAAI,CAAC,gBAAgB,CAAC,UAAU,EAAG,CAC5F,GAA2B,UAAvB,AAAiC,OAA1B,EAAI,OAAO,CACpB,MAAM,AAAI,MAAM,+DAElB,GAAI,EAAI,eAAe,GACpB,CAAD,AAAE,MAAM,OAAO,CAAC,EAAI,eAAe,GAAK,CAAC,EAAI,eAAe,CAAC,KAAK,CAAC,GAAS,AAAiB,iBAAV,EAAU,CAAS,CACtG,EADyG,IACnG,AAAI,MAAM,wDAElB,IAAI,CAAC,GAAG,CAAG,CACb,CACF,CAKA,oBAAoB,CAAgB,CAAE,CACpC,GAAK,CAAD,GAAK,CAAC,aAAa,CAAC,mBAAoB,IAI5C,GAAI,CAAC,EAAiB,KAAK,CAAC,GAA8C,AAJX,UAIhB,CAAsC,MAA/B,GACpD,MAAM,AAAI,MAAM,oDAIlB,IAAI,CAAC,gBAAgB,CAAG,EAAE,CAC1B,EACG,OAAO,CAAC,GAAmB,IAAI,CAAC,kBAAkB,CAAC,IACxD,CAKA,mBAAmB,CAAe,CAAE,CAG9B,IAAI,CAAC,SAAS,EAAI,EAAgB,aAAa,CACjD,CADmD,MAC5C,EAAgB,aAAa,CAC3B,CAAC,IAAI,CAAC,SAAS,EAAI,EAAgB,mBAAmB,EAAE,AACjE,OAAO,EAAgB,mBAAmB,CAIxC,AAAE,CAAD,YAA4B,IAC/B,EAAkB,IAAI,EAAgB,EAAA,CADQ,CAK5C,EAL+C,EAK3C,CAAC,SAAS,CAChB,CADkB,GACd,CAAC,wBAAwB,CAAC,GAE9B,IAAI,CAAC,kBAAkB,CAAC,GAI1B,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,EAC7B,CAKA,MAAM,CAAE,CAAE,CAAE,CAAE,CAAG,CAAE,CACjB,GACE,KAAc,IAAP,GACP,KAAc,IAAP,GACP,KAAe,IAAR,EAEP,MAAM,AAAI,CADV,KACgB,yCAElB,IAAI,CAAC,kBAAkB,CAAC,IAAI,EAAgB,IAAC,KAAI,MAAI,CAAG,GAC1D,CAKA,iBAAiB,CAAa,CAAE,CAC9B,IAAI,CAAC,YAAY,CAAC,gBAAiB,EAAe,SACpD,CAKA,wBAAwB,CAAoB,CAAE,CAOxC,IAAI,CAAC,cAAc,CAAC,uBAAwB,EAAsB,CAAC,IAAI,CAAC,eAAe,CANzE,CAAC,EAAc,KAC/B,GAAI,CAAC,MAAM,OAAO,CAAC,IAA2B,GAAG,CAApB,EAAM,MAAM,CACvC,MAAM,AAAI,MAAM,yCAA2C,EAAe,IAE9E,EAEyG,GAAG,CAC1G,IAAI,CAAC,oBAAoB,CAAG,CAAA,CAEhC,CAKA,mBAAmB,CAAe,CAAE,CAC9B,aAA2B,IAC7B,EAAgB,WAD8B,cACL,CAAC,IAAI,CAAC,aAAa,EAC5D,EAAgB,uBAAuB,CAAC,IAAI,CAAC,oBAAoB,EAErE,CAKA,yBAAyB,CAAe,CAAE,CACpC,aAA2B,GAC7B,EAAgB,YAD8B,gBACF,CAAC,IAAI,CAAC,mBAAmB,CAEzE,CAKA,uBAAuB,CAAmB,CAAE,CAC1C,GAAI,KAA+B,IAAxB,GAGX,GAAmC,GAHa,OAG5C,AAAyC,OAAlC,EACT,MAAM,AAAI,MAAM,4CAId,CAAC,IAAI,CAAC,YAAY,EAAE,AACtB,OAAO,MAAM,CAAC,GAAqB,OAAO,CAAC,IACrC,QAAQ,IAAI,CAAC,IACf,IADuB,IACf,IAAI,CAAC,EAEjB,GAGF,IAAI,CAAC,mBAAmB,CAAG,EAC7B,CAKA,WAAW,CAAO,CAAE,CAClB,GAAI,IAAI,CAAC,aAAa,CAAC,UAAW,GAAU,CAC1C,GAAI,CAAC,EAAQ,KAAK,CAAC,GAAwC,UAAxB,CAAmC,MAA5B,GACxC,MAAU,AAAJ,MAAU,oDAElB,GAAI,CAAC,EAAQ,KAAK,CAAC,GAA6C,UAA7B,CAAwC,MAAjC,EAAa,IAAI,EACzD,MAAM,AAAI,MAAM,4DAElB,GAAI,CAAC,EAAQ,KAAK,CAAC,GAA8C,UAA9B,CAAyC,MAAlC,EAAa,KAAK,EAC1D,MAAM,AAAI,MAAM,6DAElB,IAAI,CAAC,OAAO,CAAG,CACjB,CACF,CAKA,WAAW,CAAO,CAAE,CACd,IAAI,CAAC,cAAc,CAAC,UAAW,EAAS,CAAC,IAAI,CAAC,gBAAgB,CAAC,UAAU,GAAG,AAC9E,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAEtB,CAKA,eAAe,CAAI,CAAE,CACf,IAAI,CAAC,cAAc,CAAC,OAAQ,EAAM,CAAC,IAAI,CAAC,eAAe,CAAE,IAAI,CAAC,gBAAgB,CAAC,UAAU,GAC3F,AAD8F,IAC1F,CAAC,UAAU,CAAC,CACd,MAAO,EACP,KAAM,YACR,EAEJ,CAKA,eAAe,CAAI,CAAE,CACf,IAAI,CAAC,cAAc,CAAC,OAAQ,EAAM,CAAC,IAAI,CAAC,eAAe,CAAE,IAAI,CAAC,gBAAgB,CAAC,UAAU,GAAG,AAC9F,IAAI,CAAC,UAAU,CAAC,CACd,MAAO,EACP,KAAM,WACR,EAEJ,CAKA,eAAe,CAAW,CAAE,CAC1B,GAAI,IAAI,CAAC,aAAa,CAAC,cAAe,GAAc,CAClD,GAAI,CAAC,EAAY,KAAK,CAAC,GAA4C,UAA9B,CAAyC,MAAlC,EAAW,OAAO,EAC5D,MAAM,AAAI,MAAM,0DAElB,GAAI,CAAC,EAAY,KAAK,CAAC,GAAc,AAA+B,WAAW,MAAnC,EAAW,QAAQ,EAC7D,MAAM,AAAI,MAAM,2DAElB,GAAI,CAAC,EAAY,KAAK,CAAC,GAAc,CAAC,EAAW,IAAI,EAA+B,UAA3B,CAAsC,MAA/B,EAAW,IAAI,EAC7E,MAAM,AAAI,MAAM,yDAElB,GAAI,CAAC,EAAY,KAAK,CAAC,GAAc,CAAC,EAAW,WAAW,EAAI,AAAkC,WAAW,MAAtC,EAAW,WAAW,EAC3F,MAAM,AAAI,MAAM,gEAElB,IAAI,CAAC,WAAW,CAAG,CACrB,CACF,CAKA,cAAc,CAAU,CAAE,CACpB,IAAI,CAAC,cAAc,CAAC,aAAc,EAAY,CAAC,IAAI,CAAC,eAAe,CAAE,IAAI,CAAC,gBAAgB,CAAC,UAAU,GAAG,AAC1G,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAE1B,CAKA,cAAc,CAAU,CAAE,CAOE,UAAtB,AAAgC,OAAzB,GACT,GAAa,CAAC,EAAW,EAGvB,IAAI,CAAC,cAAc,CAAC,aAAc,EAAY,CAAC,IAAI,CAAC,eAAe,CAV3C,CAAC,EAAc,KACzC,GAAI,CAAC,MAAM,OAAO,CAAC,IAAU,CAAC,EAAM,KAAK,CAAC,GAAwB,UAAhB,CAA2B,MAApB,GACvD,MAAM,AAAI,MAAM,kCAAoC,EAAe,IAEvE,EAM+F,GAAG,CAChG,IAAI,CAAC,UAAU,CAAG,CAAA,CAEtB,CAKA,YAAY,CAAQ,CAAE,CAChB,IAAI,CAAC,cAAc,CAAC,WAAY,EAAU,CAAC,IAAI,CAAC,gBAAgB,CAAC,UAAU,GAAG,AAChF,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,EAEzB,CAKA,WAAW,CAAO,CAAE,CAClB,IAAI,CAAC,YAAY,CAAC,UAAW,EAAS,SACxC,CAKA,UAAU,CAAG,CAAE,CAAK,CAAE,CAChB,IAAI,CAAC,cAAc,CAAC,MAAO,EAAK,CAAC,IAAI,CAAC,gBAAgB,CAAC,UAAU,GAChE,IAAI,CAAC,cAAc,CAAC,QAAS,EAAO,CAAC,IAAI,CAAC,gBAAgB,CAAC,UAAU,GAAG,CAC3E,IAAI,CAAC,OAAO,CAAC,EAAI,CAAG,CAAA,CAExB,CAKA,YAAY,CAAQ,CAAE,CACpB,IAAI,CAAC,YAAY,CAAC,WAAY,EAAU,SAC1C,CAKA,cAAc,CAAU,CAAE,CACxB,IAAI,CAAC,YAAY,CAAC,aAAc,EAAY,SAC9C,CAKA,oBAAoB,CAAQ,CAAE,MACJ,IAAb,IAGX,EAAyB,GAHY,AAIrC,IAAI,CAAC,gBAAgB,CAAG,EAC1B,CAKA,gBAAgB,CAAQ,CAAE,MACA,IAAb,IAGX,EAAqB,GAHgB,AAIrC,IAAI,CAAC,YAAY,CAAG,EACtB,CAKA,gBAAgB,CAAI,CAAE,CACpB,GAAoB,AAAhB,SAAO,GAGX,CAHiC,EAG7B,AAAgB,WAAW,OAApB,EACT,MAAM,AAAI,MAAM,uCAElB,IAAI,CAAC,YAAY,CAAG,EACtB,CAKA,QAAS,CAGP,GAAM,MACJ,CAAI,SAAE,CAAO,QAAE,CAAM,SAAE,CAAO,SAAE,CAAO,YAAE,CAAU,kBACnD,CAAgB,aAAE,CAAW,YAAE,CAAU,SAAE,CAAO,KAAE,CAAG,UACvD,CAAQ,SAAE,CAAO,CAAE,YAAU,YAAE,CAAU,cAAE,CAAY,kBACvD,CAAgB,aAAE,CAAW,CAC9B,CAAG,IAAI,CAGF,EAAO,MACX,EAAM,UACN,iBAAkB,EAAY,EAChC,EAsDA,OAnDI,MAAM,OAAO,CAAC,IAAgB,EAAY,MAAM,CAAG,GAAG,CACxD,EAAK,WAAW,CAAG,EAAY,EAAA,EAE7B,MAAM,OAAO,CAAC,IAAe,EAAW,MAAM,CAAG,GAAG,CACtD,EAAK,UAAU,CAAG,EAAW,MAAM,CAAC,GAAe,KAAR,EAAQ,EAEjD,MAAM,OAAO,CAAC,IAAY,EAAQ,MAAM,CAAG,GAAG,CAChD,EAAK,OAAO,CAAG,EAAY,EAAA,EAIzB,OAAO,IAAI,CAAC,GAAS,MAAM,CAAG,GAAG,CACnC,EAAK,OAAO,CAAG,CAAA,EAEb,OAAO,IAAI,CAAC,GAAc,MAAM,CAAG,GAAG,CACxC,EAAK,YAAY,CAAG,CAAA,EAElB,OAAO,IAAI,CAAC,GAAkB,MAAM,CAAG,GAAG,CAC5C,EAAK,gBAAgB,CAAG,CAAA,EAEtB,OAAO,IAAI,CAAC,GAAY,MAAM,CAAG,GAAG,CACtC,EAAK,UAAU,CAAG,CAAA,EAEhB,OAAO,IAAI,CAAC,GAAU,MAAM,CAAG,GAAG,CACpC,EAAK,QAAQ,CAAG,CAAA,EAEd,OAAO,IAAI,CAAC,GAAK,MAAM,CAAG,GAAG,CAC/B,EAAK,GAAG,CAAG,CAAA,EAIT,KAAmB,IAAZ,IACT,EAAK,GAD6B,IACtB,CAAG,CAAA,EAEb,KAAkB,IAAX,IACT,EAAK,GAD4B,GACtB,CAAG,CAAA,EAEZ,KAAmB,IAAZ,IACT,EAAK,GAD6B,IACtB,CAAG,CAAA,EAEb,AAAsB,SAAf,IAA4B,AACrC,EAAK,UAAU,CAAG,CAAA,EAEhB,AAAsB,SAAf,IAA4B,AACrC,EAAK,UAAU,CAAG,CAAA,EAEjB,KAAuB,IAAhB,IACR,EAAK,GADgC,QACrB,CAAG,CAAA,EAId,EAAY,EAAM,CAAC,gBAAiB,sBAAuB,aAAc,UAAW,WAAW,CACxG,CASA,OAAO,OAAO,CAAI,CAAE,QAGlB,AAAI,MAAM,OAAO,CAAC,GACT,EACJ,EAFoB,IAEd,CAAC,GAAQ,CAAC,CAAC,GACjB,GAAG,CAAC,GAAQ,IAAI,CAAC,MAAM,CAAC,IAIzB,aAAgB,EACX,EAIF,EALmB,EAKf,EAAK,EAClB,CAUA,eAAe,CAAY,CAAE,CAAK,CAAE,CAAM,CAAE,CAC1C,MAAO,CAAC,EAAO,IAAI,CAAE,AAAD,GAAO,EAAE,EAAc,GAC7C,CAKA,aAAa,CAAY,CAAE,CAAK,CAAE,CAAY,CAAE,CAC9C,IAAI,EAAuB,IAAI,CAAC,cAAc,CAC5C,EACA,EACA,CAAC,IAAI,CAAC,eAAe,CAAE,IAAI,CAAC,gBAAgB,CAAC,GAAc,EAM7D,OAJI,IACF,IAAI,CAAC,EAAa,CAAG,CAAA,EAGhB,CACT,CAKA,KAV4B,WAUZ,CAAY,CAAE,CAAK,CAAE,CACnC,OAAO,KAAiB,IAAV,CAChB,CAKA,iBAAiB,CAAY,CAAE,CAC7B,MAAO,CAAC,EAAc,KACpB,GAAI,OAAO,IAAU,EACnB,MAAM,AAAI,MAAM,AADiB,EACF,kBAAoB,EAAe,IAEtE,CACF,CAMA,uBAAuB,CAAK,CAAE,CAAW,CAAE,CACzC,MAAO,CAAC,EAAc,KACpB,GAAI,CAAC,EAAM,GACT,KADiB,CACX,AAAI,MAAM,EAEpB,CACF,CAMA,kBAAkB,CAAY,CAAE,CAAK,CAAE,CACjC,IAAI,CAAC,aAAa,CAAC,EAAc,KACnC,GAD2C,CACvC,CAAC,EAAa,CAAG,CAAA,CAEzB,CAKA,cAAc,CAAY,CAAE,CAAK,CAAE,CACjC,OAAO,IAAI,CAAC,cAAc,CACxB,EACA,EACA,CAAC,IAAI,CAAC,eAAe,CAAE,IAAI,CAAC,sBAAsB,CAAC,MAAM,OAAO,CAAE,sBAAwB,EAAe,KAAK,CAClH,CAKC,eAAe,CAAW,CAAE,CAC3B,GAAI,IAAI,CAAC,aAAa,CAAC,cAAe,IAAgB,EAAY,MAAM,CAAE,CACxE,GAAI,CAAC,EAAY,KAAK,CAAC,GAAW,GAAoC,UAAzB,CAAoC,MAA7B,EAAQ,KAAK,EAC/D,MAAM,AAAI,MAAM,sDAElB,IAAI,CAAC,WAAW,CAAG,CACrB,CACF,CACF,CAGA,EAAO,OAAO,CAAG,+BClqBjB,GAAO,OAAO,CAZd,EAYiB,IAZX,AACJ,YAAY,CAAU,CAAE,CAAI,CAAE,CAAO,CAAE,CACrC,IAAI,CAAC,UAAU,CAAG,EAClB,IAAI,CAAC,IAAI,CAAG,EACZ,IAAI,CAAC,OAAO,CAAG,CACjB,CAEA,UAAW,CACT,MAAO,QAAU,IAAI,CAAC,UAAU,CAAG,IAAM,IAAI,CAAC,IAChD,AADoD,CAEtD,+BCgDA,EAAO,OAAO,CAvDd,EAuDiB,IAvDX,QAAsB,MAK1B,YAAY,CAAQ,CAAE,CAGpB,KAAK,GAGL,KAAM,SAAE,CAAO,QAAE,CAAM,YAAE,CAAU,MAAE,CAAI,CAAE,CAAG,EAG9C,IAAI,CAAC,IAAI,CAAG,EACZ,IAAI,CAAC,OAAO,CAAG,EACf,IAAI,CAAC,QAAQ,CAAG,SAAE,EAAS,KAAM,CAAK,EAGlC,AAAC,IAAI,CAAC,KAAK,EAAE,AACf,MAAM,iBAAiB,CAAC,IAAI,CAAE,IAAI,CAAC,WAAW,EAIhD,MAAM,EAAQ,AAAI,OAAO,QAAQ,GAAG,GAAK,IAAK,MAC9C,IAAI,CAAC,KAAK,CAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,EAAO,GACzC,CAKA,UAAW,CACT,GAAM,MAAE,CAAI,CAAE,CAAG,IAAI,CAAC,QAAQ,CAC1B,EAAM,CAAA,EAAG,IAAI,CAAC,OAAO,CAAC,EAAE,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAS1C,OARI,GAAQ,MAAM,OAAO,CAAC,EAAK,MAAM,GAAG,AACtC,EAAK,MAAM,CAAC,OAAO,CAAC,IAClB,IAAM,EAAU,EAAM,OAAO,CACvB,EAAQ,EAAM,KAAK,CACnB,EAAO,EAAM,IAAI,CACvB,GAAO,CAAC;AAAA,EAAI,EAAE,QAAQ;AAAA,IAAM,EAAE,MAAM;AAAA,IAAM,EAAE,EAAA,CAAM,AACpD,GAEK,CACT,CAKA,QAAS,CACP,GAAM,SAAE,CAAO,MAAE,CAAI,UAAE,CAAQ,CAAE,CAAG,IAAI,CACxC,MAAO,SAAE,OAAS,WAAM,CAAS,CACnC,CACF,gCCpDA,IAAM,EAAA,EAAA,CAAA,CAAA,KACA,EAAA,EAAA,CAAA,CAAA,OAKA,EAAsB,CAAC,MAAO,OAAQ,QAAQ,CAC9C,EAAiB,CAAC,KAAM,KAAK,CAC7B,EAAkB,CAAC,OAAQ,MAAM,AA6QvC,GAAO,OAAO,CAxQd,EAwQiB,IAxQX,AACJ,YAAY,CAAI,CAAE,CAChB,IAAI,CAAC,SAAS,CAAG,KACjB,IAAI,CAAC,OAAO,CAAG,KACf,IAAI,CAAC,YAAY,CAAG,KAEhB,GACF,GADQ,CACJ,CAAC,QAAQ,CAAC,EAElB,CAKA,SAAS,CAAI,CAAE,CAGb,GAAoB,UAAhB,AAA0B,OAAnB,EACT,MAAM,AAAI,MAAM,wCAQlB,GAAM,WAAE,CAAS,SACf,CAAO,cACP,CAAY,CACb,CALD,EAAO,AAKH,EANJ,EAAO,EAAU,GACQ,CAAC,EAAP,cAAwB,aAAa,EAOxD,IAAI,CAAC,YAAY,CAAC,GAClB,IAAI,CAAC,UAAU,CAAC,GAChB,IAAI,CAAC,eAAe,CAAC,EACvB,CAKA,aAAa,CAAS,CAAE,CACtB,IAAI,IAAqB,IAAd,GAKP,MALkC,AAK5B,IAAI,KAAK,IAJjB,MAAM,AAAI,GAIoB,GAJd,iCAQlB,QAAQ,GAAG,CAAC,GAEZ,IAAI,CAAC,SAAS,CAAG,IAAI,KAAK,GAAW,WAAW,GAAG,KAAK,CAAC,EAAG,GAC9D,CAKA,WAAW,CAAO,CAAE,CAClB,GAAI,AAAmB,SAAZ,EAAyB,CAClC,IAAI,CAAC,OAAO,CAAG,IAAI,OAAO,WAAW,GAAG,KAAK,CAAC,EAAG,IACjD,MACF,CAEA,GAA4C,CAAxC,IAAI,CAA0C,IAArC,AAAyC,KAAK,IACzD,IADwB,EAClB,AAAI,CAD0D,KACpD,+BAGlB,IAAI,CAAC,OAAO,CAAG,IAAI,KAAK,GAAS,WAAW,GAAG,KAAK,CAAC,EAAG,GAC1D,CAKA,gBAAgB,CAAY,CAAE,CAC5B,GAAI,KAAwB,IAAjB,EAIX,GAA4B,IAJa,MAIrC,OAAO,GACP,EAAoB,QAAQ,CAAC,EAAa,WAAW,IACvD,CAD4D,GACxD,CAAC,YAAY,CAAG,OAEpB,MAAM,AAAI,MAAM,qCAEpB,CAKA,WAAY,CACV,GAAM,WAAE,CAAS,SAAE,CAAO,cAAE,CAAY,CAAE,CAAG,IAAI,CAEjD,MAAO,WAAE,UAAW,eAAS,CAAa,CAC5C,CAKA,YAAY,CAAO,CAAE,CACnB,IAAM,EAAO,IAAI,CAAC,SAAS,eAEJ,IAAZ,GAIY,MAJa,IAIhC,OAAO,GACP,EAAe,QAAQ,CAAC,EAAQ,WAAW,KAAK,CAClD,EAAK,OAAO,CAAG,CAAA,EALR,CASX,CAKA,4BAA4B,CAAgB,CAAE,CAC5C,IAAM,EAAO,IAAI,CAAC,SAAS,GAE3B,GAAI,KAA4B,IAArB,EACT,OAD2C,AACpC,EAGT,GAAI,MAAM,OAAO,CAAC,IACd,EAAiB,IAAI,CAAC,GAAK,AAAa,WAAW,MAAjB,GACpC,MAAM,AAAI,MAAM,oDAKlB,OAFA,EAAK,gBAAgB,CAAG,EAEjB,CACT,CAKA,oBAAoB,CAAQ,CAAE,CAC5B,IAAM,EAAO,IAAI,CAAC,SAAS,GAE3B,GAAwB,AAApB,SAAO,EACT,EADmC,KAC5B,EAGT,GAAI,MAAM,OAAO,CAAC,IAAa,EAAS,IAAI,CAAC,GAAkB,UAAb,CAAwB,MAAjB,GACvD,MAAM,AAAI,MAAM,4CAKlB,OAFA,EAAK,QAAQ,CAAG,EAET,CACT,CAKA,cAAc,CAAU,CAAE,CACxB,IAAI,IAAsB,IAAf,GAIP,CAAC,IAAI,CAJ8B,AAI7B,sBAAsB,CAAC,GAH/B,MAAU,AAAJ,IAGsC,EAH5B,8CAOlB,IAAM,EAAO,IAAI,CAAC,SAAS,GAG3B,OAFA,EAAK,UAAU,CAAG,EAEX,CACT,CAKA,WAAW,CAAQ,CAAE,CACnB,IAAI,IAAoB,IAAb,GAIP,CAAC,IAAI,CAJ4B,AAI3B,sBAAsB,CAAC,GAH/B,MAAM,AAAI,EAGgC,IAH1B,4CAOlB,IAAM,EAAO,IAAI,CAAC,SAAS,GAG3B,OAFA,EAAK,QAAQ,CAAG,EAET,CACT,CAKA,cAAc,EAAe,WAAW,CACtC,EAAkB,CAAe,CAAC,EAAE,CAAE,EAAQ,CAAC,CAAE,EAAS,CAAC,CAAE,CAC7D,GAA4B,UAAxB,AAAkC,OAA3B,EACT,MAAM,AAAI,MAAM,sCAGlB,GAAI,CAAC,EAAgB,QAAQ,CAAC,EAAgB,WAAW,IACvD,CAD4D,KACtD,AAAI,MAAM,8CAGlB,GAAqB,UAAU,AAA3B,OAAO,EACT,MAAM,AAAI,MAAM,+BAGlB,GAAsB,AAAlB,UAA4B,OAArB,EACT,MAAM,AAAI,MAAM,gCAGlB,IAAM,EAAO,IAAI,CAAC,SAAS,GAO3B,OALA,EAAK,YAAY,CAAG,EACpB,EAAK,eAAe,CAAG,EACvB,EAAK,KAAK,CAAG,EACb,EAAK,MAAM,CAAG,EAEP,CACT,CAKA,kBAAkB,EAAe,WAAW,CAC1C,EAAkB,CAAe,CAAC,EAAE,CAAE,EAAQ,CAAC,CAAE,EAAS,CAAC,CAAE,CAC7D,GAA4B,UAAxB,AAAkC,OAA3B,EACT,MAAM,AAAI,MAAM,sCAGlB,GAAI,CAAC,EAAgB,QAAQ,CAAC,EAAgB,WAAW,IACvD,CAD4D,KACtD,AAAI,MAAM,8CAGlB,GAAqB,UAAjB,AAA2B,OAApB,EACT,MAAU,AAAJ,MAAU,+BAGlB,GAAsB,UAAlB,AAA4B,OAArB,EACT,MAAM,AAAI,MAAM,gCAGlB,IAAM,EAAO,IAAI,CAAC,SAAS,GAO3B,OALA,EAAK,YAAY,CAAG,EACpB,EAAK,eAAe,CAAG,EACvB,EAAK,KAAK,CAAG,EACb,EAAK,MAAM,CAAG,EAEP,CACT,CAEA,uBAAuB,CAAG,CAAE,SACtB,CAAC,MAAM,OAAO,CAAC,IAIf,EAJqB,AAIjB,MAAM,CAAG,GAAK,EAAI,IAAI,CAAC,GAAkB,UAAb,CAAwB,MAAjB,GAK7C,CACF,gCClRA,IAAM,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAON,EAAO,OAAO,CAAG,YACf,eACA,OACA,kBACA,WACA,EACA,cAZI,EAAA,CAAA,CAAA,MAaJ,WAZI,EAAA,CAAA,CAAA,MAaN,+BCnBA,GAAO,OAAO,CAAG,SAAS,AAAU,CAAI,CAAE,CAAI,EAG5C,GAAoB,UAAhB,OAAO,GAA8B,MAAM,CAAf,EAC9B,MAAM,AAAI,MAAM,mCAElB,GAAoB,UAAhB,OAAO,GAAqB,AAAS,MAAM,GAC7C,MAAM,AAAI,MAAM,mCAIlB,IAAM,EAAS,OAAO,MAAM,CAAC,CAAC,EAAG,GAGjC,IAAK,IAAM,KAAO,EAEZ,EAAK,CAFa,aAEC,CAAC,KAClB,CADwB,AACpB,CAAC,EAAI,EAAI,MAAM,OAAO,CAAC,CAAI,CAAC,EAAI,EACtC,CADyC,AACnC,CAAC,EAAI,CAAG,CAAI,CAAC,EAAI,CACd,CAAI,CAAC,EAAI,EAAyB,UAArB,AAA+B,OAAxB,CAAI,CAAC,EAAI,CACtC,CAAM,CAAC,EAAI,CAAG,OAAO,MAAM,CAAC,CAAC,EAAG,CAAI,CAAC,EAAI,EAChC,CAAI,CAAC,EAAI,EAAE,CACpB,CAAM,CAAC,EAAI,CAAG,CAAI,CAAC,EAAA,AAAI,GAM7B,OAAO,CACT,gCC7BA,IAAM,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,KAON,EAAO,OAAO,CAAG,CACf,0BACA,YACA,YACA,iBACA,EACA,cACA,YAbI,EAAA,CAAA,CAAA,OAcJ,kBAbI,EAAA,CAAA,CAAA,MAcN,gCCfA,EAAO,OAAO,CAAG,CAAC,QANZ,EAAA,CAAA,CAAA,OAMqB,QALrB,EAAA,CAAA,CAAA,MAK4B,gCCVlC,IAAM,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,CACJ,QAAS,WACP,CAAS,CACV,CACD,QAAS,UACP,CAAQ,eACR,CAAa,CACd,CACF,CAAA,EAAA,CAAA,CAAA,OAOK,EAAkB,CACtB,GAAI,+BACJ,OAAQ,2BACV,CAuKA,GAAO,OAAO,CAtKd,EAsKiB,IAtKX,AACJ,aAAc,CACZ,IAAI,CAAC,IAAI,CAAG,GACZ,IAAI,CAAC,kBAAkB,CAAG,GAC1B,IAAI,CAAC,eAAe,CAVA,EAUG,OAEvB,IAAI,CAAC,cAAc,CAAG,CACpB,OAAQ,mBACR,eAAgB,mBAChB,aAAc,YAAc,EAAI,OAAO,CAAG,SAC5C,EAEA,IAAI,CAAC,cAAc,CAAG,CACpB,QArBoB,CAqBX,2BACT,IAAK,GACL,OAAQ,MACR,QAAS,CAAC,EACV,iBAAkB,IAClB,cAAe,GACjB,CACF,CAEA,UAAU,CAAM,CAAE,CAChB,IAAI,CAAC,IAAI,CAAG,UAAY,EACxB,IAAI,CAAC,iBAAiB,CAAC,UAAW,CAAe,CAAC,IAAI,CAAC,eAAe,CAAC,EAEnE,AAAC,IAAI,CAAC,aAAa,CAAC,IACtB,KAD+B,GACvB,IAAI,CAAC,CAAC,6BAA6B,EAAE,KAEjD,CAEA,SAJgE,EAAE,CAAC,OAIhD,CAAQ,CAAE,CAAQ,CAAE,CACrC,IAAM,EAAU,OAAO,IAAI,CAAC,EAAW,IAAM,GAAU,QAAQ,CAAC,UAChE,IAAI,CAAC,IAAI,CAAG,SAAW,EACvB,IAAI,CAAC,iBAAiB,CAAC,UAzCH,CAyCc,4BAE9B,AAAC,IAAI,CAAC,iBAAiB,CAAC,EAAU,IACpC,OAD+C,CACvC,IAAI,CAAC,sDAEjB,CAEA,cAAc,CAAM,CAAE,CACpB,OAAO,IAAI,CAAC,QAAQ,CAAC,IAAW,EAAO,IAAI,GAAG,UAAU,CAAC,AAnDtC,MAoDrB,CAEA,kBAAkB,CAAQ,CAAE,CAAQ,CAAE,CACpC,OAAO,IAAI,CAAC,QAAQ,CAAC,IAAa,GAC7B,IAAI,CAAC,QAAQ,CAAC,IAAa,CAClC,CAEA,SAAS,CAAK,CAAE,CACd,MAAwB,UAAjB,OAAO,GAAsB,aAAiB,MACvD,CAEA,sBAAsB,CAAO,CAAE,CAC7B,IAAI,CAAC,kBAAkB,CAAG,CAC5B,CAEA,iBAAiB,CAAG,CAAE,CAAK,CAAE,QACvB,AAAQ,UAAuB,UAAf,AAAyB,OAAlB,EAEzB,OAAO,MAAM,CAAC,IAAI,CAAC,cAAc,CAAE,GAIrC,IAAI,CAAC,cAAc,CAAC,EAAI,CAAG,EACpB,IAAI,AACb,CAEA,kBAAkB,CAAG,CAAE,CAAK,CAAE,QAChB,OAAR,GAA+B,UAAf,AAAyB,OAAlB,EAEzB,OAAO,MAAM,CAAC,IAAI,CAAC,cAAc,CAAE,GAIrC,IAAI,CAAC,cAAc,CAAC,EAAI,CAAG,EACpB,IAAI,AACb,CAOA,iBAAiB,CAAM,CAAE,CAOvB,OANK,EAAgB,cAAc,CAAC,IAGlC,IAAI,CAAC,AAHsC,eAGvB,CAAG,EACvB,IAAI,CAAC,iBAAiB,CAAC,UAAW,CAAe,CAAC,EAAO,GAHzD,QAAQ,IAAI,CAAC,wCAKR,IAAI,AACb,CAEA,cAAc,CAAI,CAAE,CAElB,IAAM,EAAU,EAAU,IAAI,CAAC,cAAc,CAAE,GAW/C,OARI,KAAiC,IAA1B,EAAQ,aAAa,EAAoB,IAAI,CAAC,IAAI,EAAE,CAC7D,EAAQ,aAAa,CAAG,IAAI,CAAC,IAAA,AAAI,EAG/B,IAAI,CAAC,kBAAkB,EAAE,CAC3B,CAAO,CAAC,eAAe,CAAG,IAAI,CAAC,kBAAA,AAAkB,EAG5C,CACT,CAEA,cAAc,CAAI,CAAE,CAClB,IAAI,EAAU,CACZ,IAAK,EAAK,GAAG,EAAI,EAAK,GAAG,CACzB,QAAS,EAAK,OAAO,CACrB,OAAQ,EAAK,MAAM,CACnB,KAAM,EAAK,IAAI,CACf,OAAQ,EAAK,EAAE,CACf,QAAS,EAAK,OAAO,AACvB,EAQA,MAJA,CADA,EAAU,EAAU,IAAI,CAAC,cAAc,CAAE,EAAA,EACjC,OAAO,CAAG,IAAI,CAAC,aAAa,CAAC,EAAQ,OAAO,EACpD,EAAQ,OAAO,CAAG,EAAQ,OAAO,CACjC,OAAO,EAAQ,OAAO,CAEf,CACT,CAEA,QAAQ,CAAI,CAAE,CAAE,CAAE,CAChB,EAAO,IAAI,CAAC,aAAa,CAAC,GAE1B,IAAM,EAAU,IAAI,QAAQ,CAAC,EAAS,KACpC,EAAM,GACH,IAAI,CAAC,GACG,EAAQ,CACb,IAAI,EAAS,EAAS,MAAM,CAAE,EAAS,IAAI,CAAE,EAAS,OAAO,EAC7D,EAAS,IAAI,CACd,GAEF,KAAK,CAAC,GACL,AAAI,EAAM,QAAQ,EAAE,AACd,EAAM,QAAQ,CAAC,MAAM,EAAI,IACpB,CADyB,CAClB,IAAI,EAAc,EAAM,QAAQ,GAG3C,EAAO,GAEpB,GAGA,GAAI,GAAoB,YAAd,AAA0B,OAAnB,EACf,MAAM,AAAI,MAAM,6CAGlB,AAAI,EACK,EACJ,AAFG,IAEC,CAAC,GAAU,EAAG,KAAM,IACxB,KAAK,CAAC,GAAS,EAAG,EAAO,OAGvB,CACT,CACF,gCClLA,EAAO,OAAO,CAAG,GAHX,CAGe,AAHf,EAAA,CAAA,CAAA,MAAA,+BCHN,IAAM,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEN,EAAO,OAAO,CAAG,EACjB,EAAO,OAAO,CAAC,MAAM,CAAG,gCCDxB,GAAM,QAAC,CAAM,CAAC,CAAA,EAAA,CAAA,CAAA,MACR,CAAC,QAAS,MAAC,CAAI,CAAC,CAAC,CAAA,EAAA,CAAA,CAAA,MAiOvB,GAAO,OAAO,CA5Nd,EA4NiB,IA5NX,AAKJ,aAAc,CAGZ,IAAI,CAAC,SAAS,CAAC,IAAI,GACnB,IAAI,CAAC,uBAAuB,CAAC,KAAM,MACnC,IAAI,CAAC,WAAW,CAAG,EAAE,AACvB,CAKA,UAAU,CAAM,CAAE,CAGhB,OAFA,IAAI,CAAC,MAAM,CAAG,EAEP,IAAI,AACb,CAKA,UAAU,CAAM,CAAE,CAGhB,OAFA,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,GAEf,IAAI,AACb,CAKA,mBAAmB,CAAQ,CAAE,CAAQ,CAAE,CACrC,IAAI,CAAC,MAAM,CAAC,kBAAkB,CAAC,EAAU,EAC3C,CAKA,WAAW,CAAO,CAAE,MACK,IAAZ,GAIX,IAAI,CAAC,CAJ+B,KAIzB,CAAC,iBAAiB,CAAC,UAAW,EAC3C,CAKA,wBAAwB,CAAI,CAAE,CAAK,CAAE,CACnC,GAAI,KAAgB,IAAT,GAAwB,KAAiB,IAAV,EACxC,MAAM,AAAI,CADqD,KAC/C,kDAQlB,OANI,AAAC,MAAM,OAAO,CAAC,IAAI,CAAC,oBAAoB,GAAG,CAC7C,IAAI,CAAC,oBAAoB,CAAG,EAAA,AAAE,EAEhC,IAAI,CAAC,oBAAoB,CAAC,EAAE,CAAG,EAC/B,IAAI,CAAC,oBAAoB,CAAC,EAAE,CAAG,EAExB,IAAI,AACb,CAKA,eAAe,CAAK,CAAE,CAChB,AAAE,CAAD,YAAkB,KAAK,GAC1B,AAD6B,EACrB,CAAC,EAAM,EAGjB,IAAM,EAAW,EAAM,GAAG,CAAC,SAAU,CAAI,EACvC,IAAM,EAAW,OAAO,EAExB,GAAiB,UAAU,CAAvB,EACF,MAAO,CACL,QAAS,IAAI,OAAO,EACtB,EACK,GAAiB,WAAb,EAAuB,CAE5B,aAAgB,OAClB,CAD0B,CACnB,CACL,QAAS,CACX,EACS,EAAK,cAAc,CAAC,YACD,AAAxB,UACJ,OADW,EAAK,OAAO,GAEvB,EAAK,OAAO,CAAG,IAAI,OAAO,EAAK,QAAO,EAGxC,GAAI,CAGF,OADA,EAAK,OAAO,CAAC,IAAI,CAAC,IACX,CACT,CAAE,MAAO,EAAK,CAEd,CACF,CACF,EAEA,KAAI,CAAC,WAAW,CAAG,EAAS,MAAM,CAAC,SAAU,CAAG,EAC9C,OAAO,CACT,EACF,CAKA,cAAc,CAAI,CAAE,CAClB,GAAK,AAAgB,iBAAT,GAAsB,CAAC,EAAK,cAAc,CAAC,WACrD,CADiE,MAInE,IAAM,EAAO,IAAI,CAEjB,EAAK,OAAO,CAAC,OAAO,CAAC,SAAU,CAAI,EACjC,EAAK,WAAW,CAAC,OAAO,CAAC,SAAU,CAAI,EACrC,GAAI,EAAK,cAAc,CAAC,YACnB,CAAC,EAAK,OAAO,CAAC,IAAI,CAAC,EAAK,KAAK,EAEhC,CADA,MAIF,IAAI,EAAU,CAAC,aAAa,EAAE,EAAK,OAAO,CAAC,CAAC,CAAC,AAQ7C,OANI,EAAK,IAAI,EAAE,CACb,GAAW,CAAC,eAAe,EAAE,EAAK,IAAI,CAAC,EAAE,AAAD,EAKpC,AAAI,MAFV,AAEgB,GAFL,kCAGb,EACF,EACF,CAKA,KAAK,CAAI,CAAE,GAAa,CAAK,CAAE,CAAE,CAAE,CASjC,GAN0B,YAAtB,AAAkC,OAA3B,IACT,EAAK,EACL,GAAa,GAIX,MAAM,OAAO,CAAC,GAAO,CAGvB,IAAM,EAAU,QAAQ,GAAG,CAAC,EAAK,GAAG,CAAC,GAC5B,IAAI,CAAC,IAAI,CAAC,EAAM,KAWzB,OAPI,GACF,CADM,CAEH,IAAI,CAAC,GAAU,EAAG,KAAM,IACxB,KAAK,CAAC,GAAS,EAAG,EAAO,OAIvB,CACT,CAGA,GAAI,CAGE,AAA2B,SAApB,EAAK,EAA4B,QAAlB,GACxB,EAAK,UAAU,CAAG,CAAA,EAIhB,KAAqC,IAA9B,EAAK,OAAsC,aAAlB,GAClC,EAAK,oBAAoB,CAAG,IAAI,CAAC,oBAAA,AAAoB,EAIvD,IAAM,EAAO,EAAK,MAAM,CAAC,GACnB,EAAO,EAAK,MAAM,GAGxB,IAAI,CAAC,aAAa,CAAC,GAGnB,IAAM,EAAU,CACd,OAAQ,OACR,IAAK,gBACL,QAAS,EAAK,OAAO,MACrB,CACF,EAGA,OAAO,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,EAAS,EACtC,CAAE,MAAO,EAAO,CASd,OANI,GAEF,CAFM,CAEH,EAAO,MAIL,QAAQ,MAAM,CAAC,EACxB,CACF,CAKA,aAAa,CAAI,CAAE,CAAE,CAAE,CACrB,OAAO,IAAI,CAAC,IAAI,CAAC,GAAM,EAAM,EAC/B,CACF,gCC5NA,EAAO,OAAO,CAAG,GAHX,CAAA,AAGe,EAHf,CAAA,CAAA,MAAA,gCCHN,IAAM,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEN,EAAO,OAAO,CAAG,EACjB,EAAO,OAAO,CAAC,WAAW,CAAG,0BCN7B,IAAA,EAAA,EAAA,CAAA,CAAA,OAGA,IAAI,GAAgB,EAeb,eAAe,EAAU,CAK/B,EAjBC,GAAI,CAAC,EAAe,CAClB,IAAM,EAAS,QAAQ,GAAG,CAAC,gBAAgB,CAC3C,GAAI,CAAC,EACH,MADW,AACL,AAAI,MAAM,uHAGlB,EAAA,OAAM,CAAC,SAAS,CAAC,GACjB,GAAgB,CAClB,CAYA,GAAI,CACF,IAAM,EAAM,CACV,GAAI,EAAO,EAAE,CACb,KAAM,EAAO,IAAI,EAAI,CACnB,MAAO,QAAQ,GAAG,CAAC,mBAAmB,CACtC,KAAM,QAAQ,GAAG,CAAC,kBAAkB,EAAI,OAC1C,EACA,WAAY,EAAO,UAAU,CAC7B,oBAAqB,EAAO,mBAC9B,AADiD,CAGjD,OAAM,EAAA,OAAM,CAAC,IAAI,CAAC,GAClB,QAAQ,GAAG,CAAC,CAAC,gBAAgB,EAAE,EAAO,EAAE,CAAA,CAAE,CAC5C,CAAE,MAAO,EAAO,CAEd,MADA,QAAQ,KAAK,CAAC,wBAAyB,GACjC,AAAI,MAAM,uBAClB,CACF,CAGO,eAAe,EAAiB,CAWtC,EACC,IAAM,EAAa,QAAQ,GAAG,CAAC,4BAA4B,AAE3D,OAAM,EAAU,CACd,GAAI,EAAO,OAAO,YAClB,EACA,oBAAqB,CACnB,eAAgB,EAAO,cAAc,CACrC,iBAAkB,EAAO,gBAAgB,CACzC,OAAQ,EAAO,MAAM,CAAC,OAAO,CAAC,GAC9B,SAAU,EAAO,QAAQ,EAAI,MAC7B,QAAS,EAAO,OAAO,EAAE,cACzB,YAAa,EAAO,WAAW,CAC/B,YAAa,EAAO,WAAW,CAC/B,WAAY,EAAO,UAAU,CAC7B,gBAAiB,EAAO,eAAe,AACzC,CACF,EACF,CAGO,eAAe,EAAsB,CAQ3C,EACC,IAAM,EAAa,QAAQ,GAAG,CAAC,kCAAkC,AAEjE,OAAM,EAAU,CACd,GAAI,EAAO,OAAO,YAClB,EACA,oBAAqB,CACnB,eAAgB,EAAO,cAAc,CACrC,iBAAkB,EAAO,gBAAgB,CACzC,OAAQ,EAAO,MAAM,CAAC,OAAO,CAAC,GAC9B,SAAU,EAAO,QAAQ,CACzB,QAAS,EAAO,OAAO,CAAC,WAAW,GACnC,YAAa,EAAO,WAAW,AACjC,CACF,EACF,CAGO,eAAe,EAAuB,CAQ5C,EACC,IAAM,EAAa,QAAQ,GAAG,CAAC,mCAE/B,AAFkE,OAE5D,EAAU,CACd,GAAI,EAAO,OAAO,YAClB,EACA,oBAAqB,CACnB,eAAgB,EAAO,cAAc,CACrC,iBAAkB,EAAO,gBAAgB,CACzC,OAAQ,EAAO,MAAM,CAAC,OAAO,CAAC,GAC9B,SAAU,EAAO,QAAQ,CACzB,QAAS,EAAO,OAAO,CAAC,WAAW,GACnC,YAAa,EAAO,WAAW,AACjC,CACF,EACF,CAuBO,eAAe,EAAsB,CAK3C,EACC,IAAM,EAAa,QAAQ,GAAG,CAAC,iCAAiC,AAEhE,OAAM,EAAU,CACd,GAAI,EAAO,OAAO,YAClB,EACA,oBAAqB,CACnB,QAAS,EAAO,OAAO,CACvB,QAAS,EAAO,OAAO,CACvB,UAAW,EAAO,SAAS,AAC7B,CACF,EACF","ignoreList":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29]}